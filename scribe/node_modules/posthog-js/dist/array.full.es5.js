!function(){"use strict";var e,t,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r={};function i(){if(t)return e;t=1;var r=function(e){return e&&e.Math===Math&&e};return e=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}var o,s,a,u,l,c,d,f,p={};function h(){return s?o:(s=1,o=function(e){try{return!!e()}catch(e){return!0}})}function _(){if(u)return a;u=1;var e=h();return a=!e((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function v(){if(c)return l;c=1;var e=h();return l=!e((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))}function g(){if(f)return d;f=1;var e=v(),t=Function.prototype.call;return d=e?t.bind(t):function(){return t.apply(t,arguments)},d}var m,y,b,w,S,k,x,E,C,T,I,P,R,F,M,L,O,A,D,q,N,H,B,j,U,V,z,W,G,Z,Y,Q,X,J,K,ee,te,ne,re,ie,oe,se={};function ae(){if(m)return se;m=1;var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,n=t&&!e.call({1:2},1);return se.f=n?function(e){var n=t(this,e);return!!n&&n.enumerable}:e,se}function ue(){return b?y:(b=1,y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}})}function le(){if(S)return w;S=1;var e=v(),t=Function.prototype,n=t.call,r=e&&t.bind.bind(n,n);return w=e?r:function(e){return function(){return n.apply(e,arguments)}},w}function ce(){if(x)return k;x=1;var e=le(),t=e({}.toString),n=e("".slice);return k=function(e){return n(t(e),8,-1)}}function de(){return I?T:(I=1,T=function(e){return null==e})}function fe(){if(R)return P;R=1;var e=de(),t=TypeError;return P=function(n){if(e(n))throw new t("Can't call method on "+n);return n}}function pe(){if(M)return F;M=1;var e=function(){if(C)return E;C=1;var e=le(),t=h(),n=ce(),r=Object,i=e("".split);return E=t((function(){return!r("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?i(e,""):r(e)}:r}(),t=fe();return F=function(n){return e(t(n))}}function he(){if(O)return L;O=1;var e="object"==typeof document&&document.all;return L=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(e){return"function"==typeof e}}function _e(){if(D)return A;D=1;var e=he();return A=function(t){return"object"==typeof t?null!==t:e(t)}}function ve(){if(N)return q;N=1;var e=i(),t=he();return q=function(n,r){return arguments.length<2?(i=e[n],t(i)?i:void 0):e[n]&&e[n][r];var i},q}function ge(){if(B)return H;B=1;var e=le();return H=e({}.isPrototypeOf)}function me(){if(z)return V;z=1;var e,t,n=i(),r=function(){if(U)return j;U=1;var e=i().navigator,t=e&&e.userAgent;return j=t?String(t):""}(),o=n.process,s=n.Deno,a=o&&o.versions||s&&s.version,u=a&&a.v8;return u&&(t=(e=u.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!t&&r&&(!(e=r.match(/Edge\/(\d+)/))||e[1]>=74)&&(e=r.match(/Chrome\/(\d+)/))&&(t=+e[1]),V=t}function ye(){if(G)return W;G=1;var e=me(),t=h(),n=i().String;return W=!!Object.getOwnPropertySymbols&&!t((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&e&&e<41}))}function be(){if(Y)return Z;Y=1;var e=ye();return Z=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function we(){if(X)return Q;X=1;var e=ve(),t=he(),n=ge(),r=be(),i=Object;return Q=r?function(e){return"symbol"==typeof e}:function(r){var o=e("Symbol");return t(o)&&n(o.prototype,i(r))}}function Se(){if(K)return J;K=1;var e=String;return J=function(t){try{return e(t)}catch(e){return"Object"}}}function ke(){if(te)return ee;te=1;var e=he(),t=Se(),n=TypeError;return ee=function(r){if(e(r))return r;throw new n(t(r)+" is not a function")}}function xe(){if(re)return ne;re=1;var e=ke(),t=de();return ne=function(n,r){var i=n[r];return t(i)?void 0:e(i)},ne}function Ee(){if(oe)return ie;oe=1;var e=g(),t=he(),n=_e(),r=TypeError;return ie=function(i,o){var s,a;if("string"===o&&t(s=i.toString)&&!n(a=e(s,i)))return a;if(t(s=i.valueOf)&&!n(a=e(s,i)))return a;if("string"!==o&&t(s=i.toString)&&!n(a=e(s,i)))return a;throw new r("Can't convert object to primitive value")}}var Ce,Te,Ie,Pe,Re,Fe,Me,Le,Oe,Ae,De,qe,$e,Ne,He,Be,je,Ue,Ve,ze,We,Ge,Ze,Ye,Qe={exports:{}};function Xe(){return Te?Ce:(Te=1,Ce=!1)}function Je(){if(Pe)return Ie;Pe=1;var e=i(),t=Object.defineProperty;return Ie=function(n,r){try{t(e,n,{value:r,configurable:!0,writable:!0})}catch(t){e[n]=r}return r}}function Ke(){if(Re)return Qe.exports;Re=1;var e=Xe(),t=i(),n=Je(),r="__core-js_shared__",o=Qe.exports=t[r]||n(r,{});return(o.versions||(o.versions=[])).push({version:"3.38.1",mode:e?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Qe.exports}function et(){if(Me)return Fe;Me=1;var e=Ke();return Fe=function(t,n){return e[t]||(e[t]=n||{})}}function tt(){if(Oe)return Le;Oe=1;var e=fe(),t=Object;return Le=function(n){return t(e(n))}}function nt(){if(De)return Ae;De=1;var e=le(),t=tt(),n=e({}.hasOwnProperty);return Ae=Object.hasOwn||function(e,r){return n(t(e),r)}}function rt(){if($e)return qe;$e=1;var e=le(),t=0,n=Math.random(),r=e(1..toString);return qe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+r(++t+n,36)}}function it(){if(He)return Ne;He=1;var e=i(),t=et(),n=nt(),r=rt(),o=ye(),s=be(),a=e.Symbol,u=t("wks"),l=s?a.for||a:a&&a.withoutSetter||r;return Ne=function(e){return n(u,e)||(u[e]=o&&n(a,e)?a[e]:l("Symbol."+e)),u[e]}}function ot(){if(je)return Be;je=1;var e=g(),t=_e(),n=we(),r=xe(),i=Ee(),o=it(),s=TypeError,a=o("toPrimitive");return Be=function(o,u){if(!t(o)||n(o))return o;var l,c=r(o,a);if(c){if(void 0===u&&(u="default"),l=e(c,o,u),!t(l)||n(l))return l;throw new s("Can't convert object to primitive value")}return void 0===u&&(u="number"),i(o,u)}}function st(){if(Ve)return Ue;Ve=1;var e=ot(),t=we();return Ue=function(n){var r=e(n,"string");return t(r)?r:r+""}}function at(){if(We)return ze;We=1;var e=i(),t=_e(),n=e.document,r=t(n)&&t(n.createElement);return ze=function(e){return r?n.createElement(e):{}}}function ut(){if(Ze)return Ge;Ze=1;var e=_(),t=h(),n=at();return Ge=!e&&!t((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))}function lt(){if(Ye)return p;Ye=1;var e=_(),t=g(),n=ae(),r=ue(),i=pe(),o=st(),s=nt(),a=ut(),u=Object.getOwnPropertyDescriptor;return p.f=e?u:function(e,l){if(e=i(e),l=o(l),a)try{return u(e,l)}catch(e){}if(s(e,l))return r(!t(n.f,e,l),e[l])},p}var ct,dt,ft,pt,ht,_t,vt,gt={};function mt(){if(dt)return ct;dt=1;var e=_(),t=h();return ct=e&&t((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}function yt(){if(pt)return ft;pt=1;var e=_e(),t=String,n=TypeError;return ft=function(r){if(e(r))return r;throw new n(t(r)+" is not an object")}}function bt(){if(ht)return gt;ht=1;var e=_(),t=ut(),n=mt(),r=yt(),i=st(),o=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u="enumerable",l="configurable",c="writable";return gt.f=e?n?function(e,t,n){if(r(e),t=i(t),r(n),"function"==typeof e&&"prototype"===t&&"value"in n&&c in n&&!n[c]){var o=a(e,t);o&&o[c]&&(e[t]=n.value,n={configurable:l in n?n[l]:o[l],enumerable:u in n?n[u]:o[u],writable:!1})}return s(e,t,n)}:s:function(e,n,a){if(r(e),n=i(n),r(a),t)try{return s(e,n,a)}catch(e){}if("get"in a||"set"in a)throw new o("Accessors not supported");return"value"in a&&(e[n]=a.value),e},gt}function wt(){if(vt)return _t;vt=1;var e=_(),t=bt(),n=ue();return _t=e?function(e,r,i){return t.f(e,r,n(1,i))}:function(e,t,n){return e[t]=n,e}}var St,kt,xt,Et,Ct,Tt,It,Pt,Rt,Ft,Mt,Lt,Ot,At,Dt,qt={exports:{}};function $t(){if(kt)return St;kt=1;var e=_(),t=nt(),n=Function.prototype,r=e&&Object.getOwnPropertyDescriptor,i=t(n,"name"),o=i&&"something"===function(){}.name,s=i&&(!e||e&&r(n,"name").configurable);return St={EXISTS:i,PROPER:o,CONFIGURABLE:s}}function Nt(){if(Et)return xt;Et=1;var e=le(),t=he(),n=Ke(),r=e(Function.toString);return t(n.inspectSource)||(n.inspectSource=function(e){return r(e)}),xt=n.inspectSource}function Ht(){if(Pt)return It;Pt=1;var e=et(),t=rt(),n=e("keys");return It=function(e){return n[e]||(n[e]=t(e))}}function Bt(){return Ft?Rt:(Ft=1,Rt={})}function jt(){if(Lt)return Mt;Lt=1;var e,t,n,r=function(){if(Tt)return Ct;Tt=1;var e=i(),t=he(),n=e.WeakMap;return Ct=t(n)&&/native code/.test(String(n))}(),o=i(),s=_e(),a=wt(),u=nt(),l=Ke(),c=Ht(),d=Bt(),f="Object already initialized",p=o.TypeError,h=o.WeakMap;if(r||l.state){var _=l.state||(l.state=new h);_.get=_.get,_.has=_.has,_.set=_.set,e=function(e,t){if(_.has(e))throw new p(f);return t.facade=e,_.set(e,t),t},t=function(e){return _.get(e)||{}},n=function(e){return _.has(e)}}else{var v=c("state");d[v]=!0,e=function(e,t){if(u(e,v))throw new p(f);return t.facade=e,a(e,v,t),t},t=function(e){return u(e,v)?e[v]:{}},n=function(e){return u(e,v)}}return Mt={set:e,get:t,has:n,enforce:function(r){return n(r)?t(r):e(r,{})},getterFor:function(e){return function(n){var r;if(!s(n)||(r=t(n)).type!==e)throw new p("Incompatible receiver, "+e+" required");return r}}}}function Ut(){if(Ot)return qt.exports;Ot=1;var e=le(),t=h(),n=he(),r=nt(),i=_(),o=$t().CONFIGURABLE,s=Nt(),a=jt(),u=a.enforce,l=a.get,c=String,d=Object.defineProperty,f=e("".slice),p=e("".replace),v=e([].join),g=i&&!t((function(){return 8!==d((function(){}),"length",{value:8}).length})),m=String(String).split("String"),y=qt.exports=function(e,t,n){"Symbol("===f(c(t),0,7)&&(t="["+p(c(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!r(e,"name")||o&&e.name!==t)&&(i?d(e,"name",{value:t,configurable:!0}):e.name=t),g&&n&&r(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?i&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var s=u(e);return r(s,"source")||(s.source=v(m,"string"==typeof t?t:"")),e};return Function.prototype.toString=y((function(){return n(this)&&l(this).source||s(this)}),"toString"),qt.exports}function Vt(){if(Dt)return At;Dt=1;var e=he(),t=bt(),n=Ut(),r=Je();return At=function(i,o,s,a){a||(a={});var u=a.enumerable,l=void 0!==a.name?a.name:o;if(e(s)&&n(s,l,a),a.global)u?i[o]=s:r(o,s);else{try{a.unsafe?i[o]&&(u=!0):delete i[o]}catch(e){}u?i[o]=s:t.f(i,o,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return i},At}var zt,Wt,Gt,Zt,Yt,Qt,Xt,Jt,Kt,en,tn,nn,rn,on,sn,an,un,ln={};function cn(){if(Zt)return Gt;Zt=1;var e=function(){if(Wt)return zt;Wt=1;var e=Math.ceil,t=Math.floor;return zt=Math.trunc||function(n){var r=+n;return(r>0?t:e)(r)},zt}();return Gt=function(t){var n=+t;return n!=n||0===n?0:e(n)}}function dn(){if(Qt)return Yt;Qt=1;var e=cn(),t=Math.max,n=Math.min;return Yt=function(r,i){var o=e(r);return o<0?t(o+i,0):n(o,i)}}function fn(){if(Jt)return Xt;Jt=1;var e=cn(),t=Math.min;return Xt=function(n){var r=e(n);return r>0?t(r,9007199254740991):0}}function pn(){if(en)return Kt;en=1;var e=fn();return Kt=function(t){return e(t.length)}}function hn(){if(on)return rn;on=1;var e=le(),t=nt(),n=pe(),r=function(){if(nn)return tn;nn=1;var e=pe(),t=dn(),n=pn(),r=function(r){return function(i,o,s){var a=e(i),u=n(a);if(0===u)return!r&&-1;var l,c=t(s,u);if(r&&o!=o){for(;u>c;)if((l=a[c++])!=l)return!0}else for(;u>c;c++)if((r||c in a)&&a[c]===o)return r||c||0;return!r&&-1}};return tn={includes:r(!0),indexOf:r(!1)}}().indexOf,i=Bt(),o=e([].push);return rn=function(e,s){var a,u=n(e),l=0,c=[];for(a in u)!t(i,a)&&t(u,a)&&o(c,a);for(;s.length>l;)t(u,a=s[l++])&&(~r(c,a)||o(c,a));return c},rn}function _n(){return an?sn:(an=1,sn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}var vn,gn,mn,yn,bn,wn,Sn,kn,xn,En,Cn,Tn,In,Pn,Rn,Fn,Mn,Ln,On,An,Dn,qn,$n,Nn,Hn,Bn,jn,Un,Vn,zn={};function Wn(){if(mn)return gn;mn=1;var e=ve(),t=le(),n=function(){if(un)return ln;un=1;var e=hn(),t=_n().concat("length","prototype");return ln.f=Object.getOwnPropertyNames||function(n){return e(n,t)},ln}(),r=(vn||(vn=1,zn.f=Object.getOwnPropertySymbols),zn),i=yt(),o=t([].concat);return gn=e("Reflect","ownKeys")||function(e){var t=n.f(i(e)),s=r.f;return s?o(t,s(e)):t}}function Gn(){if(bn)return yn;bn=1;var e=nt(),t=Wn(),n=lt(),r=bt();return yn=function(i,o,s){for(var a=t(o),u=r.f,l=n.f,c=0;c<a.length;c++){var d=a[c];e(i,d)||s&&e(s,d)||u(i,d,l(o,d))}},yn}function Zn(){if(xn)return kn;xn=1;var e=i(),t=lt().f,n=wt(),r=Vt(),o=Je(),s=Gn(),a=function(){if(Sn)return wn;Sn=1;var e=h(),t=he(),n=/#|\.prototype\./,r=function(n,r){var u=o[i(n)];return u===a||u!==s&&(t(r)?e(r):!!r)},i=r.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=r.data={},s=r.NATIVE="N",a=r.POLYFILL="P";return wn=r}();return kn=function(i,u){var l,c,d,f,p,h=i.target,_=i.global,v=i.stat;if(l=_?e:v?e[h]||o(h,{}):e[h]&&e[h].prototype)for(c in u){if(f=u[c],d=i.dontCallGetSet?(p=t(l,c))&&p.value:l[c],!a(_?c:h+(v?".":"#")+c,i.forced)&&void 0!==d){if(typeof f==typeof d)continue;s(f,d)}(i.sham||d&&d.sham)&&n(f,"sham",!0),r(l,c,f,i)}}}function Yn(){if(In)return Tn;In=1;var e=nt(),t=he(),n=tt(),r=Ht(),i=function(){if(Cn)return En;Cn=1;var e=h();return En=!e((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),En}(),o=r("IE_PROTO"),s=Object,a=s.prototype;return Tn=i?s.getPrototypeOf:function(r){var i=n(r);if(e(i,o))return i[o];var u=i.constructor;return t(u)&&i instanceof u?u.prototype:i instanceof s?a:null},Tn}function Qn(){if(Rn)return Pn;Rn=1;var e=hn(),t=_n();return Pn=Object.keys||function(n){return e(n,t)},Pn}function Xn(){if(Ln)return r;Ln=1;var $=Zn(),e=function(){if(Mn)return Fn;Mn=1;var e=_(),t=h(),n=le(),r=Yn(),i=Qn(),o=pe(),s=n(ae().f),a=n([].push),u=e&&t((function(){var e=Object.create(null);return e[2]=2,!s(e,2)})),l=function(t){return function(n){for(var l,c=o(n),d=i(c),f=u&&null===r(c),p=d.length,h=0,_=[];p>h;)l=d[h++],e&&!(f?l in c:s(c,l))||a(_,t?[l,c[l]]:c[l]);return _}};return Fn={entries:l(!0),values:l(!1)}}().entries;return $({target:"Object",stat:!0},{entries:function(t){return e(t)}}),r}function Jn(){if(An)return On;An=1;var e=i();return On=e}function Kn(){if(Nn)return $n;Nn=1;var e=function(){if(qn)return Dn;qn=1,Xn();var e=Jn();return Dn=e.Object.entries}();return $n=e}function er(){if(Un)return jn;Un=1;var e=function(){if(Bn)return Hn;Bn=1;var e=Kn();return Hn=e}();return jn=e}Vn||(Vn=1,er());var tr,nr,rr,ir,or,sr,ar,ur,lr,cr,dr,fr,pr,hr,_r,vr,gr,mr,yr,br,wr,Sr,kr,xr,Er,Cr,Tr,Ir,Pr,Rr={};function Fr(){if(rr)return nr;rr=1;var e=ve();return nr=e("document","documentElement")}function Mr(){if(or)return ir;or=1;var e,t=yt(),n=function(){if(tr)return Rr;tr=1;var e=_(),t=mt(),n=bt(),r=yt(),i=pe(),o=Qn();return Rr.f=e&&!t?Object.defineProperties:function(e,t){r(e);for(var s,a=i(t),u=o(t),l=u.length,c=0;l>c;)n.f(e,s=u[c++],a[s]);return e},Rr}(),r=_n(),i=Bt(),o=Fr(),s=at(),a=Ht(),u="prototype",l="script",c=a("IE_PROTO"),d=function(){},f=function(e){return"<"+l+">"+e+"</"+l+">"},p=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},h=function(){try{e=new ActiveXObject("htmlfile")}catch(e){}var t,n,i;h="undefined"!=typeof document?document.domain&&e?p(e):(n=s("iframe"),i="java"+l+":",n.style.display="none",o.appendChild(n),n.src=String(i),(t=n.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F):p(e);for(var a=r.length;a--;)delete h[u][r[a]];return h()};return i[c]=!0,ir=Object.create||function(e,r){var i;return null!==e?(d[u]=t(e),i=new d,d[u]=null,i[c]=e):i=h(),void 0===r?i:n.f(i,r)},ir}function Lr(){if(ar)return sr;ar=1;var e=it(),t=Mr(),n=bt().f,r=e("unscopables"),i=Array.prototype;return void 0===i[r]&&n(i,r,{configurable:!0,value:t(null)}),sr=function(e){i[r][e]=!0}}function Or(){return lr?ur:(lr=1,ur={})}function Ar(){if(dr)return cr;dr=1;var e,t,n,r=h(),i=he(),o=_e(),s=Mr(),a=Yn(),u=Vt(),l=it(),c=Xe(),d=l("iterator"),f=!1;return[].keys&&("next"in(n=[].keys())?(t=a(a(n)))!==Object.prototype&&(e=t):f=!0),!o(e)||r((function(){var t={};return e[d].call(t)!==t}))?e={}:c&&(e=s(e)),i(e[d])||u(e,d,(function(){return this})),cr={IteratorPrototype:e,BUGGY_SAFARI_ITERATORS:f}}function Dr(){if(pr)return fr;pr=1;var e=bt().f,t=nt(),n=it()("toStringTag");return fr=function(r,i,o){r&&!o&&(r=r.prototype),r&&!t(r,n)&&e(r,n,{configurable:!0,value:i})}}function qr(){if(yr)return mr;yr=1;var e=_e();return mr=function(t){return e(t)||null===t}}function $r(){if(wr)return br;wr=1;var e=qr(),t=String,n=TypeError;return br=function(r){if(e(r))return r;throw new n("Can't set "+t(r)+" as a prototype")}}function Nr(){if(kr)return Sr;kr=1;var e=function(){if(gr)return vr;gr=1;var e=le(),t=ke();return vr=function(n,r,i){try{return e(t(Object.getOwnPropertyDescriptor(n,r)[i]))}catch(e){}}}(),t=_e(),n=fe(),r=$r();return Sr=Object.setPrototypeOf||("__proto__"in{}?function(){var i,o=!1,s={};try{(i=e(Object.prototype,"__proto__","set"))(s,[]),o=s instanceof Array}catch(e){}return function(e,s){return n(e),r(s),t(e)?(o?i(e,s):e.__proto__=s,e):e}}():void 0),Sr}function Hr(){if(Er)return xr;Er=1;var $=Zn(),e=g(),t=Xe(),n=$t(),r=he(),i=function(){if(_r)return hr;_r=1;var e=Ar().IteratorPrototype,t=Mr(),n=ue(),r=Dr(),i=Or(),o=function(){return this};return hr=function(s,a,u,l){var c=a+" Iterator";return s.prototype=t(e,{next:n(+!l,u)}),r(s,c,!1,!0),i[c]=o,s},hr}(),o=Yn(),s=Nr(),a=Dr(),u=wt(),l=Vt(),c=it(),d=Or(),f=Ar(),p=n.PROPER,h=n.CONFIGURABLE,_=f.IteratorPrototype,v=f.BUGGY_SAFARI_ITERATORS,m=c("iterator"),y="keys",b="values",w="entries",S=function(){return this};return xr=function(n,c,f,g,k,x,E){i(f,c,g);var C,T,I,P=function(e){if(e===k&&O)return O;if(!v&&e&&e in M)return M[e];switch(e){case y:case b:case w:return function(){return new f(this,e)}}return function(){return new f(this)}},R=c+" Iterator",F=!1,M=n.prototype,L=M[m]||M["@@iterator"]||k&&M[k],O=!v&&L||P(k),A="Array"===c&&M.entries||L;if(A&&(C=o(A.call(new n)))!==Object.prototype&&C.next&&(t||o(C)===_||(s?s(C,_):r(C[m])||l(C,m,S)),a(C,R,!0,!0),t&&(d[R]=S)),p&&k===b&&L&&L.name!==b&&(!t&&h?u(M,"name",b):(F=!0,O=function(){return e(L,this)})),k)if(T={values:P(b),keys:x?O:P(y),entries:P(w)},E)for(I in T)(v||F||!(I in M))&&l(M,I,T[I]);else $({target:c,proto:!0,forced:v||F},T);return t&&!E||M[m]===O||l(M,m,O,{name:k}),d[c]=O,T},xr}function Br(){return Tr?Cr:(Tr=1,Cr=function(e,t){return{value:e,done:t}})}function jr(){if(Pr)return Ir;Pr=1;var e=pe(),t=Lr(),n=Or(),r=jt(),i=bt().f,o=Hr(),s=Br(),a=Xe(),u=_(),l="Array Iterator",c=r.set,d=r.getterFor(l);Ir=o(Array,"Array",(function(t,n){c(this,{type:l,target:e(t),index:0,kind:n})}),(function(){var e=d(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,s(void 0,!0);switch(e.kind){case"keys":return s(n,!1);case"values":return s(t[n],!1)}return s([n,t[n]],!1)}),"values");var f=n.Arguments=n.Array;if(t("keys"),t("values"),t("entries"),!a&&u&&"values"!==f.name)try{i(f,"name",{value:"values"})}catch(e){}return Ir}var Ur,Vr,zr,Wr,Gr,Zr,Yr,Qr,Xr,Jr,Kr,ei,ti,ni,ri,ii,oi,si,ai,ui,li,ci,di,fi={};function pi(){if(Wr)return zr;Wr=1;var e=function(){if(Vr)return Ur;Vr=1;var e=ce(),t=le();return Ur=function(n){if("Function"===e(n))return t(n)}}(),t=ke(),n=v(),r=e(e.bind);return zr=function(e,i){return t(e),void 0===i?e:n?r(e,i):function(){return e.apply(i,arguments)}},zr}function hi(){if(Zr)return Gr;Zr=1;var e=it(),t=Or(),n=e("iterator"),r=Array.prototype;return Gr=function(e){return void 0!==e&&(t.Array===e||r[n]===e)}}function _i(){if(Jr)return Xr;Jr=1;var e=function(){if(Qr)return Yr;Qr=1;var e={};return e[it()("toStringTag")]="z",Yr="[object z]"===String(e)}(),t=he(),n=ce(),r=it()("toStringTag"),i=Object,o="Arguments"===n(function(){return arguments}());return Xr=e?n:function(e){var s,a,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(e){}}(s=i(e),r))?a:o?n(s):"Object"===(u=n(s))&&t(s.callee)?"Arguments":u},Xr}function vi(){if(ei)return Kr;ei=1;var e=_i(),t=xe(),n=de(),r=Or(),i=it()("iterator");return Kr=function(o){if(!n(o))return t(o,i)||t(o,"@@iterator")||r[e(o)]}}function gi(){if(ni)return ti;ni=1;var e=g(),t=ke(),n=yt(),r=Se(),i=vi(),o=TypeError;return ti=function(s,a){var u=arguments.length<2?i(s):a;if(t(u))return n(e(u,s));throw new o(r(s)+" is not iterable")},ti}function mi(){if(ii)return ri;ii=1;var e=g(),t=yt(),n=xe();return ri=function(r,i,o){var s,a;t(r);try{if(!(s=n(r,"return"))){if("throw"===i)throw o;return o}s=e(s,r)}catch(e){a=!0,s=e}if("throw"===i)throw o;if(a)throw s;return t(s),o}}function yi(){if(si)return oi;si=1;var e=pi(),t=g(),n=yt(),r=Se(),i=hi(),o=pn(),s=ge(),a=gi(),u=vi(),l=mi(),c=TypeError,d=function(e,t){this.stopped=e,this.result=t},f=d.prototype;return oi=function(p,h,_){var v,g,m,y,b,w,S,k=_&&_.that,x=!(!_||!_.AS_ENTRIES),E=!(!_||!_.IS_RECORD),C=!(!_||!_.IS_ITERATOR),T=!(!_||!_.INTERRUPTED),I=e(h,k),P=function(e){return v&&l(v,"normal",e),new d(!0,e)},R=function(e){return x?(n(e),T?I(e[0],e[1],P):I(e[0],e[1])):T?I(e,P):I(e)};if(E)v=p.iterator;else if(C)v=p;else{if(!(g=u(p)))throw new c(r(p)+" is not iterable");if(i(g)){for(m=0,y=o(p);y>m;m++)if((b=R(p[m]))&&s(f,b))return b;return new d(!1)}v=a(p,g)}for(w=E?p.next:v.next;!(S=t(w,v)).done;){try{b=R(S.value)}catch(e){l(v,"throw",e)}if("object"==typeof b&&b&&s(f,b))return b}return new d(!1)}}function bi(){if(ui)return ai;ui=1;var e=_(),t=bt(),n=ue();return ai=function(r,i,o){e?t.f(r,i,n(0,o)):r[i]=o}}function wi(){if(di)return ci;di=1,jr(),function(){if(li)return fi;li=1;var $=Zn(),e=yi(),t=bi();$({target:"Object",stat:!0},{fromEntries:function(n){var r={};return e(n,(function(e,n){t(r,e,n)}),{AS_ENTRIES:!0}),r}})}();var e=Jn();return ci=e.Object.fromEntries}var Si,ki,xi,Ei,Ci,Ti,Ii,Pi,Ri,Fi,Mi,Li,Oi={};function Ai(){if(Ci)return Oi;Ci=1;var e=i(),t=ki?Si:(ki=1,Si={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),n=function(){if(Ei)return xi;Ei=1;var e=at()("span").classList,t=e&&e.constructor&&e.constructor.prototype;return xi=t===Object.prototype?void 0:t}(),r=jr(),o=wt(),s=Dr(),a=it()("iterator"),u=r.values,l=function(e,n){if(e){if(e[a]!==u)try{o(e,a,u)}catch(t){e[a]=u}if(s(e,n,!0),t[n])for(var i in r)if(e[i]!==r[i])try{o(e,i,r[i])}catch(t){e[i]=r[i]}}};for(var c in t)l(e[c]&&e[c].prototype,c);return l(n,"DOMTokenList"),Oi}function Di(){if(Ri)return Pi;Ri=1;var e=function(){if(Ii)return Ti;Ii=1;var e=wi();return Ai(),Ti=e}();return Pi=e}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $i(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function Ni(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){$i(o,r,i,s,a,"next",e)}function a(e){$i(o,r,i,s,a,"throw",e)}s(void 0)}))}}function Hi(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zi(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qi(e,t):void 0}}(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(null,arguments)}function Ui(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function Vi(){Vi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(e,t,n,r){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(t,n,r,i){var o=n&&n.prototype instanceof f?n:f,s=Object.create(o.prototype);return u(s,"_invoke",function(t,n,r){var i=1;return function(o,s){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw s;return{value:e,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var l=c(t,n,r);if("normal"===l.type){if(i=r.done?4:2,l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=4,r.method="throw",r.arg=l.arg)}}}(t,r,new x(i||[])),!0),s}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d={};function f(){}function p(){}function h(){}var _={};u(_,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==n&&r.call(g,o)&&(_=g);var m=h.prototype=f.prototype=Object.create(_);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,o,s,a){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(u.arg)}var i;u(this,"_invoke",(function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}),!0)}function w(t,n){var r=n.method,i=t.i[r];if(i===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=c(i,t.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var s=o.arg;return s?s.done?(n[t.r]=s.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(e){this.tryEntries.push(e)}function k(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function x(e){this.tryEntries=[[-1]],e.forEach(S,this),this.reset(!0)}function E(t){if(null!=t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(typeof t+" is not iterable")}return p.prototype=h,u(m,"constructor",h),u(h,"constructor",p),p.displayName=u(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},t.awrap=function(e){return{__await:e}},y(b.prototype),u(b.prototype,s,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new b(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},t.values=E,x.prototype={constructor:x,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){s.type="throw",s.arg=t,n.next=e}for(var i=n.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o[4],a=this.prev,u=o[1],l=o[2];if(-1===o[0])return r("end"),!1;if(!u&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<u)return this.method="next",this.arg=e,r(u),!0;if(a<l)return r(l),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===e||"continue"===e)&&i[0]<=t&&t<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var r=n[4];if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:E(t),r:n,n:r},"next"===this.method&&(this.arg=e),d}},t}function zi(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}Li||(Li=1,function(){if(Mi)return Fi;Mi=1;var e=Di();Fi=e}());var Wi,Gi,Zi,Yi,Qi,Xi,Ji,Ki,eo={},to=[],no=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ro=Array.isArray;function io(e,t){for(var n in t)e[n]=t[n];return e}function oo(e){var t=e.parentNode;t&&t.removeChild(e)}function so(e,t,n){var r,i,o,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?Wi.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return ao(e,s,r,i,null)}function ao(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++Zi:i,__i:-1,__u:0};return null==i&&null!=Gi.vnode&&Gi.vnode(o),o}function uo(e){return e.children}function lo(e,t){this.props=e,this.context=t}function co(e,t){if(null==t)return e.__?co(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?co(e):null}function fo(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return fo(e)}}function po(e){(!e.__d&&(e.__d=!0)&&Yi.push(e)&&!ho.__r++||Qi!==Gi.debounceRendering)&&((Qi=Gi.debounceRendering)||Xi)(ho)}function ho(){var e,t,n,r,i,o,s,a,u;for(Yi.sort(Ji);e=Yi.shift();)e.__d&&(t=Yi.length,r=void 0,o=(i=(n=e).__v).__e,a=[],u=[],(s=n.__P)&&((r=io({},i)).__v=i.__v+1,Gi.vnode&&Gi.vnode(r),So(s,r,i,n.__n,void 0!==s.ownerSVGElement,32&i.__u?[o]:null,a,null==o?co(i):o,!!(32&i.__u),u),r.__.__k[r.__i]=r,ko(a,r,u),r.__e!=o&&fo(r)),Yi.length>t&&Yi.sort(Ji));ho.__r=0}function _o(e,t,n,r,i,o,s,a,u,l,c){var d,f,p,h,_,v=r&&r.__k||to,g=t.length;for(n.__d=u,function(e,t,n){var r,i,o,s,a,u=t.length,l=n.length,c=l,d=0;for(e.__k=[],r=0;r<u;r++)null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?ao(null,i,null,null,i):ro(i)?ao(uo,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?ao(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,a=go(i,n,s=r+d,c),i.__i=a,o=null,-1!==a&&(c--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&d--,"function"!=typeof i.type&&(i.__u|=65536)):a!==s&&(a===s+1?d++:a>s?c>u-s?d+=a-s:d--:d=a<s&&a==s-1?a-s:0,a!==r+d&&(i.__u|=65536))):(o=n[r])&&null==o.key&&o.__e&&(o.__e==e.__d&&(e.__d=co(o)),Co(o,o,!1),n[r]=null,c--);if(c)for(r=0;r<l;r++)null!=(o=n[r])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=co(o)),Co(o,o))}(n,t,v),u=n.__d,d=0;d<g;d++)null!=(p=n.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(f=-1===p.__i?eo:v[p.__i]||eo,p.__i=d,So(e,p,f,i,o,s,a,u,l,c),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Eo(f.ref,null,p),c.push(p.ref,p.__c||h,p)),null==_&&null!=h&&(_=h),65536&p.__u||f.__k===p.__k?u=vo(p,u,e):"function"==typeof p.type&&void 0!==p.__d?u=p.__d:h&&(u=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=u,n.__e=_}function vo(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=vo(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function go(e,t,n,r){var i=e.key,o=e.type,s=n-1,a=n+1,u=t[n];if(null===u||u&&i==u.key&&o===u.type)return n;if(r>(null!=u&&0==(131072&u.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((u=t[s])&&0==(131072&u.__u)&&i==u.key&&o===u.type)return s;s--}if(a<t.length){if((u=t[a])&&0==(131072&u.__u)&&i==u.key&&o===u.type)return a;a++}}return-1}function mo(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||no.test(t)?n:n+"px"}function yo(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||mo(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||mo(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?wo:bo,o)):e.removeEventListener(t,o?wo:bo,o);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function bo(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Gi.event?Gi.event(e):e)}function wo(e){return this.l[e.type+!0](Gi.event?Gi.event(e):e)}function So(e,t,n,r,i,o,s,a,u,l){var c,d,f,p,h,_,v,g,m,y,b,$,w,S,k,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(u=!!(32&n.__u),o=[a=t.__e=n.__e]),(c=Gi.__b)&&c(t);e:if("function"==typeof x)try{if(g=t.props,m=(c=x.contextType)&&r[c.__c],y=c?m?m.props.value:c.__:r,n.__c?v=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(g,y):(t.__c=d=new lo(g,y),d.constructor=x,d.render=To),m&&m.sub(d),d.props=g,d.state||(d.state={}),d.context=y,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=io({},d.__s)),io(d.__s,x.getDerivedStateFromProps(g,d.__s))),p=d.props,h=d.state,d.__v=t,f)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&g!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(g,y),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(g,d.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=g,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(g,d.__s,y),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,h,_)}))}if(d.context=y,d.props=g,d.__P=e,d.__e=!1,$=Gi.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,$&&$(t),c=d.render(d.props,d.state,d.context),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[]}else do{d.__d=!1,$&&$(t),c=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=io(io({},r),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(_=d.getSnapshotBeforeUpdate(p,h)),_o(e,ro(k=null!=c&&c.type===uo&&null==c.key?c.props.children:c)?k:[k],t,n,r,i,o,s,a,u,l),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),v&&(d.__E=d.__=null)}catch(e){t.__v=null,u||null!=o?(t.__e=a,t.__u|=u?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Gi.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=xo(n.__e,t,n,r,i,o,s,u,l);(c=Gi.diffed)&&c(t)}function ko(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Eo(n[r],n[++r],n[++r]);Gi.__c&&Gi.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Gi.__e(e,t.__v)}}))}function xo(e,t,n,r,i,o,s,a,u){var l,c,d,f,p,h,_,v=n.props,g=t.props,m=t.type;if("svg"===m&&(i=!0),null!=o)for(l=0;l<o.length;l++)if((p=o[l])&&"setAttribute"in p==!!m&&(m?p.localName===m:3===p.nodeType)){e=p,o[l]=null;break}if(null==e){if(null===m)return document.createTextNode(g);e=i?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,g.is&&g),o=null,a=!1}if(null===m)v===g||a&&e.data===g||(e.data=g);else{if(o=o&&Wi.call(e.childNodes),v=n.props||eo,!a&&null!=o)for(v={},l=0;l<e.attributes.length;l++)v[(p=e.attributes[l]).name]=p.value;for(l in v)p=v[l],"children"==l||("dangerouslySetInnerHTML"==l?d=p:"key"===l||l in g||yo(e,l,null,p,i));for(l in g)p=g[l],"children"==l?f=p:"dangerouslySetInnerHTML"==l?c=p:"value"==l?h=p:"checked"==l?_=p:"key"===l||a&&"function"!=typeof p||v[l]===p||yo(e,l,p,v[l],i);if(c)a||d&&(c.__html===d.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(d&&(e.innerHTML=""),_o(e,ro(f)?f:[f],t,n,r,i&&"foreignObject"!==m,o,s,o?o[0]:n.__k&&co(n,0),a,u),null!=o)for(l=o.length;l--;)null!=o[l]&&oo(o[l]);a||(l="value",void 0!==h&&(h!==e[l]||"progress"===m&&!h||"option"===m&&h!==v[l])&&yo(e,l,h,v[l],!1),l="checked",void 0!==_&&_!==e[l]&&yo(e,l,_,v[l],!1))}return e}function Eo(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Gi.__e(e,n)}}function Co(e,t,n){var r,i;if(Gi.unmount&&Gi.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Eo(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Gi.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Co(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||oo(e.__e),e.__=e.__e=e.__d=void 0}function To(e,t,n){return this.constructor(e,n)}function Io(e,t,n){var r,i,o;Gi.__&&Gi.__(e,t),r=!1?null:t.__k,i=[],o=[],So(t,e=t.__k=so(uo,null,[e]),r||eo,eo,void 0!==t.ownerSVGElement,r?null:t.firstChild?Wi.call(t.childNodes):null,i,r?r.__e:t.firstChild,false,o),ko(i,e,o)}function Po(e,t,n){var r,i,o,s,a=io({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==o?r=t[o]:"ref"==o?i=t[o]:a[o]=void 0===t[o]&&void 0!==s?s[o]:t[o];return arguments.length>2&&(a.children=arguments.length>3?Wi.call(arguments,2):n),ao(e.type,a,r||e.key,i||e.ref,null)}Wi=to.slice,Gi={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},Zi=0,lo.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=io({},this.state),"function"==typeof e&&(e=e(io({},n),this.props)),e&&io(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),po(this))},lo.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),po(this))},lo.prototype.render=uo,Yi=[],Xi="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ji=function(e,t){return e.__v.__b-t.__v.__b},ho.__r=0,Ki=0;var Ro,Fo,Mo,Lo,Oo=0,Ao=[],Do=[],qo=Gi.__b,$o=Gi.__r,No=Gi.diffed,Ho=Gi.__c,Bo=Gi.unmount;function jo(e,t){Gi.__h&&Gi.__h(Fo,e,Oo||t),Oo=0;var n=Fo.__H||(Fo.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Do}),n.__[e]}function Uo(e){return Oo=1,function(e,t,n){var r=jo(Ro++,2);if(r.t=e,!r.__c&&(r.__=[es(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Fo,!Fo.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return e.__c}));if(i.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var s=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!o||o.call(this,e,t,n))};Fo.u=!0;var o=Fo.shouldComponentUpdate,s=Fo.componentWillUpdate;Fo.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,i(e,t,n),o=r}s&&s.call(this,e,t,n)},Fo.shouldComponentUpdate=i}return r.__N||r.__}(es,e)}function Vo(e,t){var n=jo(Ro++,3);!Gi.__s&&Ko(n.__H,t)&&(n.__=e,n.i=t,Fo.__H.__h.push(n))}function zo(e){return Oo=5,Wo((function(){return{current:e}}),[])}function Wo(e,t){var n=jo(Ro++,7);return Ko(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Go(e){var t=Fo.context[e.__c],n=jo(Ro++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Fo)),t.props.value):e.__}function Zo(){for(var e;e=Ao.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Xo),e.__H.__h.forEach(Jo),e.__H.__h=[]}catch(t){e.__H.__h=[],Gi.__e(t,e.__v)}}Gi.__b=function(e){Fo=null,qo&&qo(e)},Gi.__r=function(e){$o&&$o(e),Ro=0;var t=(Fo=e.__c).__H;t&&(Mo===Fo?(t.__h=[],Fo.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Do,e.__N=e.i=void 0}))):(t.__h.forEach(Xo),t.__h.forEach(Jo),t.__h=[],Ro=0)),Mo=Fo},Gi.diffed=function(e){No&&No(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Ao.push(t)&&Lo===Gi.requestAnimationFrame||((Lo=Gi.requestAnimationFrame)||Qo)(Zo)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Do&&(e.__=e.__V),e.i=void 0,e.__V=Do}))),Mo=Fo=null},Gi.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Xo),e.__h=e.__h.filter((function(e){return!e.__||Jo(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Gi.__e(n,e.__v)}})),Ho&&Ho(e,t)},Gi.unmount=function(e){Bo&&Bo(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Xo(e)}catch(e){t=e}})),n.__H=void 0,t&&Gi.__e(t,n.__v))};var Yo="function"==typeof requestAnimationFrame;function Qo(e){var t,n=function(){clearTimeout(r),Yo&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Yo&&(t=requestAnimationFrame(n))}function Xo(e){var t=Fo,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Fo=t}function Jo(e){var t=Fo;e.__c=e.__(),Fo=t}function Ko(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function es(e,t){return"function"==typeof t?t(e):t}var ts=function(e){return e.Button="button",e.Tab="tab",e.Selector="selector",e}({}),ns=function(e){return e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger",e}({}),rs=function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e}({}),is=function(e){return e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link",e}({}),os=function(e){return e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question",e}({}),ss=function(e){return e.Once="once",e.Recurring="recurring",e.Always="always",e}({}),as=function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e}({}),us=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e}({}),ls=function(e){return e.Popover="popover",e.Inline="inline",e}({}),cs="undefined"!=typeof window?window:void 0,ds="undefined"!=typeof globalThis?globalThis:cs,fs=Array.prototype,ps=fs.forEach,hs=fs.indexOf,_s=null==ds?void 0:ds.navigator,vs=null==ds?void 0:ds.document,gs=null==ds?void 0:ds.location,ms=null==ds?void 0:ds.fetch,ys=null!=ds&&ds.XMLHttpRequest&&"withCredentials"in new ds.XMLHttpRequest?ds.XMLHttpRequest:void 0,bs=null==ds?void 0:ds.AbortController,ws=null==_s?void 0:_s.userAgent,Ss=null!=cs?cs:{},ks={DEBUG:!1,LIB_VERSION:"1.270.1"},xs=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function Es(e,t){return-1!==e.indexOf(t)}var Cs=function(e){return e.trim()},Ts=function(e){return e.replace(/^\$/,"")};var Is=Array.isArray,Ps=Object.prototype,Rs=Ps.hasOwnProperty,Fs=Ps.toString,Ms=Is||function(e){return"[object Array]"===Fs.call(e)},Ls=function(e){return"function"==typeof e},Os=function(e){return e===Object(e)&&!Ms(e)},As=function(e){if(Os(e)){for(var t in e)if(Rs.call(e,t))return!1;return!0}return!1},Ds=function(e){return void 0===e},qs=function(e){return"[object String]"==Fs.call(e)},$s=function(e){return qs(e)&&0===e.trim().length},Ns=function(e){return null===e},Hs=function(e){return Ds(e)||Ns(e)},Bs=function(e){return"[object Number]"==Fs.call(e)},js=function(e){return"[object Boolean]"===Fs.call(e)},Us=function(e){return e instanceof FormData},Vs=function(e){return Es(xs,e)};function zs(e){return null===e||"object"!=typeof e}function Ws(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function Gs(e){return!Ds(Event)&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)}var Zs=[!0,"true",1,"1","yes"],Ys=function(e){return Es(Zs,e)},Qs=[!1,"false",0,"0","no"];function Xs(e,t,n,r,i){return t>n&&(r.warn("min cannot be greater than max."),t=n),Bs(e)?e>n?(r.warn(" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(r.warn(" must be a number. using max or fallback. max: "+n+", fallback: "+i),Xs(i||n,t,n,r))}var Js,Ks,ea,ta=function(){function e(e){var t=this;this._options=e,this._buckets={},this._refillBuckets=function(){Object.keys(t._buckets).forEach((function(e){var n=t._getBucket(e)+t._refillRate;n>=t._bucketSize?delete t._buckets[e]:t._setBucket(e,n)}))},this._getBucket=function(e){return t._buckets[String(e)]},this._setBucket=function(e,n){t._buckets[String(e)]=n},this.consumeRateLimit=function(e){var n,r=null!==(n=t._getBucket(e))&&void 0!==n?n:t._bucketSize;if(0===(r=Math.max(r-1,0)))return!0;t._setBucket(e,r);var i=0===r;return i&&(null==t._onBucketRateLimited||t._onBucketRateLimited(e)),i},this._onBucketRateLimited=this._options._onBucketRateLimited,this._bucketSize=Xs(this._options.bucketSize,0,100,this._options._logger),this._refillRate=Xs(this._options.refillRate,0,this._bucketSize,this._options._logger),this._refillInterval=Xs(this._options.refillInterval,0,864e5,this._options._logger),this._removeInterval=setInterval((function(){t._refillBuckets()}),this._refillInterval)}return e.prototype.stop=function(){this._removeInterval&&(clearInterval(this._removeInterval),this._removeInterval=void 0)},e}(),na=function(e){return e instanceof Error};function ra(e){var t=globalThis._posthogChunkIds;if(t){var n=Object.keys(t);return ea&&n.length===Ks||(Ks=n.length,ea=n.reduce((function(n,r){Js||(Js={});var i=Js[r];if(i)n[i[0]]=i[1];else for(var o=e(r),s=o.length-1;s>=0;s--){var a=o[s],u=null==a?void 0:a.filename,l=t[r];if(u&&l){n[u]=l,Js[r]=[u,l];break}}return n}),{})),ea}}var ia="?";function oa(e,t,n,r){var i={platform:"web:javascript",filename:e,function:"<anonymous>"===t?ia:t,in_app:!0};return Ds(n)||(i.lineno=n),Ds(r)||(i.colno=r),i}var sa=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:ia,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},aa=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ua=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,la=/\((\S*)(?::(\d+))(?::(\d+))\)/,ca=function(e){var t=aa.exec(e);if(t){var n=t[1],r=t[2],i=t[3];return oa(n,ia,+r,+i)}var o=ua.exec(e);if(o){if(o[2]&&0===o[2].indexOf("eval")){var s=la.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var a=sa(o[1]||ia,o[2]),u=a[0];return oa(a[1],u,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},da=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,fa=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,pa=function(e){var t=da.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=fa.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}var r=t[3],i=t[1]||ia,o=sa(i,r);return i=o[0],oa(r=o[1],i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},ha=/\(error: (.*)\)/,_a=50;function va(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){void 0===n&&(n=0);for(var r=[],i=e.split("\n"),o=n;o<i.length;o++){var s=i[o];if(!(s.length>1024)){var a=ha.test(s)?s.replace(ha,"$1"):s;if(!a.match(/\S*Error: /)){for(var u=0,l=t;u<l.length;u++){var c=(0,l[u])(a);if(c){r.push(c);break}}if(r.length>=_a)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);return t.reverse(),t.slice(0,_a).map((function(e){return ji({},e,{filename:e.filename||(n=t,n[n.length-1]||{}).filename,function:e.function||ia});var n}))}(r)}}var ga=function(){function e(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=[]),this.coercers=e,this.modifiers=n,this.stackParser=va.apply(void 0,t)}var t=e.prototype;return t.buildFromUnknown=function(e,t){void 0===t&&(t={});var n=t&&t.mechanism||{handled:!0,type:"generic"},r=this.buildCoercingContext(n,t,0).apply(e),i=this.buildParsingContext(),o=this.parseStacktrace(r,i);return{$exception_list:this.convertToExceptionList(o,n),$exception_level:"error"}},t.modifyFrames=function(){var e=Ni(Vi().mark((function e(t){var n,r,i;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bi(t);case 1:if((r=n()).done){e.next=9;break}if(!((i=r.value).stacktrace&&i.stacktrace.frames&&Ms(i.stacktrace.frames))){e.next=7;break}return e.next=6,this.applyModifiers(i.stacktrace.frames);case 6:i.stacktrace.frames=e.sent;case 7:e.next=1;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.coerceFallback=function(e){var t;return{type:"Error",value:"Unknown error",stack:null==(t=e.syntheticException)?void 0:t.stack,synthetic:!0}},t.parseStacktrace=function(e,t){var n,r;return null!=e.cause&&(n=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(r=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),ji({},e,{cause:n,stack:r})},t.applyChunkIds=function(e,t){return e.map((function(e){return e.filename&&t&&(e.chunk_id=t[e.filename]),e}))},t.applyCoercers=function(e,t){for(var n,r=Bi(this.coercers);!(n=r()).done;){var i=n.value;if(i.match(e))return i.coerce(e,t)}return this.coerceFallback(t)},t.applyModifiers=function(){var e=Ni(Vi().mark((function e(t){var n,r,i,o;return Vi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,r=Bi(this.modifiers);case 2:if((i=r()).done){e.next=9;break}return o=i.value,e.next=6,o(n);case 6:n=e.sent;case 7:e.next=2;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.convertToExceptionList=function(e,t){var n,r,i,o={type:e.type,value:e.value,mechanism:{type:null!==(n=t.type)&&void 0!==n?n:"generic",handled:null===(r=t.handled)||void 0===r||r,synthetic:null!==(i=e.synthetic)&&void 0!==i&&i}};e.stack&&(o.stacktrace={type:"raw",frames:e.stack});var s=[o];return null!=e.cause&&s.push.apply(s,this.convertToExceptionList(e.cause,ji({},t,{handled:!0}))),s},t.buildParsingContext=function(){return{chunkIdMap:ra(this.stackParser)}},t.buildCoercingContext=function(e,t,n){var r=this;void 0===n&&(n=0);var i=function(n,i){if(i<=4){var o=r.buildCoercingContext(e,t,i);return r.applyCoercers(n,o)}};return ji({},t,{syntheticException:0==n?t.syntheticException:void 0,mechanism:e,apply:function(e){return i(e,n)},next:function(e){return i(e,n+1)}})},e}(),ma=function(){function e(){}var t=e.prototype;return t.match=function(e){return this.isDOMException(e)||this.isDOMError(e)},t.coerce=function(e,t){var n=qs(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:n?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}},t.getType=function(e){return this.isDOMError(e)?"DOMError":"DOMException"},t.getValue=function(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t},t.isDOMException=function(e){return Ws(e,"DOMException")},t.isDOMError=function(e){return Ws(e,"DOMError")},e}(),ya=function(){function e(){}var t=e.prototype;return t.match=function(e){return function(e){return e instanceof Error}(e)},t.coerce=function(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}},t.getType=function(e){return e.name||e.constructor.name},t.getMessage=function(e,t){var n=e.message;return n.error&&"string"==typeof n.error.message?String(n.error.message):String(n)},t.getStack=function(e){return e.stacktrace||e.stack||void 0},e}(),ba=function(){function e(){}var t=e.prototype;return t.match=function(e){return Ws(e,"ErrorEvent")&&null!=e.error},t.coerce=function(e,t){var n,r=t.apply(e.error);return r||{type:"ErrorEvent",value:e.message,stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}},e}(),wa=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,Sa=function(){function e(){}var t=e.prototype;return t.match=function(e){return"string"==typeof e},t.coerce=function(e,t){var n,r=this.getInfos(e),i=r[0],o=r[1];return{type:null!=i?i:"Error",value:null!=o?o:e,stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}},t.getInfos=function(e){var t="Error",n=e,r=e.match(wa);return r&&(t=r[1],n=r[2]),[t,n]},e}(),ka=["fatal","error","warning","log","info","debug"];function xa(e,t){void 0===t&&(t=40);var n=Object.keys(e);if(n.sort(),!n.length)return"[object has no keys]";for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length||i.length<=t?i:i.slice(0,t)+"..."}return""}var Ea=function(){function e(){}var t=e.prototype;return t.match=function(e){return"object"==typeof e&&null!==e},t.coerce=function(e,t){var n,r=this.getErrorPropertyFromObject(e);return r?t.apply(r):{type:this.getType(e),value:this.getValue(e),stack:null==(n=t.syntheticException)?void 0:n.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}},t.getType=function(e){return Gs(e)?e.constructor.name:"Error"},t.getValue=function(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;var n=this.getObjectClassName(e);return(n&&"Object"!==n?"'"+n+"'":"Object")+" captured as exception with keys: "+xa(e)},t.isSeverityLevel=function(e){return qs(e)&&!$s(e)&&ka.indexOf(e)>=0},t.getErrorPropertyFromObject=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(na(n))return n}},t.getObjectClassName=function(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){return}},e}(),Ca=function(){function e(){}var t=e.prototype;return t.match=function(e){return Gs(e)},t.coerce=function(e,t){var n,r=e.constructor.name;return{type:r,value:r+" captured as exception with keys: "+xa(e),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}},e}(),Ta=function(){function e(){}var t=e.prototype;return t.match=function(e){return zs(e)},t.coerce=function(e,t){var n;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}},e}(),Ia=function(){function e(){}var t=e.prototype;return t.match=function(e){return Ws(e,"PromiseRejectionEvent")},t.coerce=function(e,t){var n,r=this.getUnhandledRejectionReason(e);return zs(r)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(r),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}:t.apply(r)},t.getUnhandledRejectionReason=function(e){if(zs(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e},e}(),Pa=function(e){var t={_log:function(t){if(cs&&(ks.DEBUG||Ss.POSTHOG_DEBUG)&&!Ds(cs.console)&&cs.console){for(var n=("__rrweb_original__"in cs.console[t]?cs.console[t].__rrweb_original__:cs.console[t]),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n.apply(void 0,[e].concat(i))}},info:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log.apply(t,["log"].concat(n))},warn:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log.apply(t,["warn"].concat(n))},error:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log.apply(t,["error"].concat(n))},critical:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).error.apply(t,[e].concat(r))},uninitializedWarning:function(e){t.error("You must initialize PostHog before calling "+e)},createLogger:function(t){return Pa(e+" "+t)}};return t},Ra=Pa("[PostHog.js]"),Fa=Ra.createLogger,Ma={};function La(e,t,n){if(Ms(e))if(ps&&e.forEach===ps)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Ma)return}function Oa(e,t,n){if(!Hs(e)){if(Ms(e))return La(e,t,n);if(Us(e))for(var r,i=Bi(e.entries());!(r=i()).done;){var o=r.value;if(t.call(n,o[1],o[0])===Ma)return}else for(var s in e)if(Rs.call(e,s)&&t.call(n,e[s],s)===Ma)return}}var Aa=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return La(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},Da=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return La(n,(function(t){La(t,(function(t){e.push(t)}))})),e};function qa(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var $a=function(e){try{return e()}catch(e){return}},Na=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){Ra.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ra.critical(e)}}},Ha=function(e){var t={};return Oa(e,(function(e,n){(qs(e)&&e.length>0||Bs(e))&&(t[n]=e)})),t};function Ba(e,t){return n=e,r=function(e){return qs(e)&&!Ns(t)?e.slice(0,t):e},i=new Set,function e(t,n){return t!==Object(t)?r?r(t,n):t:i.has(t)?void 0:(i.add(t),Ms(t)?(o=[],La(t,(function(t){o.push(e(t))}))):(o={},Oa(t,(function(t,n){i.has(t)||(o[n]=e(t,n))}))),o);var o}(n);var n,r,i}var ja=["herokuapp.com","vercel.app","netlify.app"];function Ua(e){var t=null==e?void 0:e.hostname;if(!qs(t))return!1;for(var n,r=t.split(".").slice(-2).join("."),i=Bi(ja);!(n=i()).done;){if(r===n.value)return!1}return!0}function Va(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function za(e,t,n,r){var i=null!=r?r:{},o=i.capture,s=void 0!==o&&o,a=i.passive,u=void 0===a||a;null==e||e.addEventListener(t,n,{capture:s,passive:u})}var Wa=Fa("[Surveys]");function Ga(e){return!(!e.start_date||e.end_date)}function Za(e){var t;return!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)}function Ya(e){var t;return!(null==(t=e.conditions)||null==(t=t.actions)||null==(t=t.values)||!t.length)}var Qa="seenSurvey_",Xa="inProgressSurvey_",Ja=function(e,t){var n="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(n="$survey_"+t+"/"+e.id+"/"+e.current_iteration),n},Ka=function(e){var t=""+Qa+e.id;return e.current_iteration&&e.current_iteration>0&&(t=""+Qa+e.id+"_"+e.current_iteration),t},eu=function(e){localStorage.getItem(Ka(e))||localStorage.setItem(Ka(e),"true")},tu=[rs.Popover,rs.Widget,rs.API],nu={ignoreConditions:!1,ignoreDelay:!1,displayType:ls.Popover};Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Bs(e)&&isFinite(e)&&Math.floor(e)===e});var ru="0123456789abcdef",iu=function(){function e(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}e.fromFieldsV7=function(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new e(o)};var t=e.prototype;return t.toString=function(){for(var e="",t=0;t<this.bytes.length;t++)e=e+ru.charAt(this.bytes[t]>>>4)+ru.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e},t.clone=function(){return new e(this.bytes.slice(0))},t.equals=function(e){return 0===this.compareTo(e)},t.compareTo=function(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0},e}(),ou=function(){function e(){this._timestamp=0,this._counter=0,this._random=new lu}var t=e.prototype;return t.generate=function(){var e=this.generateOrAbort();if(Ds(e)){this._timestamp=0;var t=this.generateOrAbort();if(Ds(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e},t.generateOrAbort=function(){var e=Date.now();if(e>this._timestamp)this._timestamp=e,this._resetCounter();else{if(!(e+1e4>this._timestamp))return;this._counter++,this._counter>4398046511103&&(this._timestamp++,this._resetCounter())}return iu.fromFieldsV7(this._timestamp,Math.trunc(this._counter/Math.pow(2,30)),this._counter&Math.pow(2,30)-1,this._random.nextUint32())},t._resetCounter=function(){this._counter=1024*this._random.nextUint32()+(1023&this._random.nextUint32())},e}(),su=function(e){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};cs&&!Ds(cs.crypto)&&crypto.getRandomValues&&(su=function(e){return crypto.getRandomValues(e)});var au,uu,lu=function(){function e(){this._buffer=new Uint32Array(8),this._cursor=1/0}return e.prototype.nextUint32=function(){return this._cursor>=this._buffer.length&&(su(this._buffer),this._cursor=0),this._buffer[this._cursor++]},e}(),cu=function(){return du().toString()},du=function(){return(au||(au=new ou)).generate()},fu="Mobile",pu="iOS",hu="Android",_u="Tablet",vu=hu+" "+_u,gu="iPad",mu="Apple",yu=mu+" Watch",bu="Safari",wu="BlackBerry",Su="Samsung",ku=Su+"Browser",xu=Su+" Internet",Eu="Chrome",Cu=Eu+" OS",Tu=Eu+" "+pu,Iu="Internet Explorer",Pu=Iu+" "+fu,Ru="Opera",Fu=Ru+" Mini",Mu="Edge",Lu="Microsoft "+Mu,Ou="Firefox",Au=Ou+" "+pu,Du="Nintendo",qu="PlayStation",$u="Xbox",Nu=hu+" "+fu,Hu=fu+" "+bu,Bu="Windows",ju=Bu+" Phone",Uu="Nokia",Vu="Ouya",zu="Generic",Wu=zu+" "+fu.toLowerCase(),Gu=zu+" "+_u.toLowerCase(),Zu="Konqueror",Yu="(\\d+(\\.\\d+)?)",Qu=new RegExp("Version/"+Yu),Xu=new RegExp($u,"i"),Ju=new RegExp(qu+" \\w+","i"),Ku=new RegExp(Du+" \\w+","i"),el=new RegExp(wu+"|PlayBook|BB10","i"),tl={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"};var nl=function(e,t){return t&&Es(t,mu)||function(e){return Es(e,bu)&&!Es(e,Eu)&&!Es(e,hu)}(e)},rl=function(e,t){return t=t||"",Es(e," OPR/")&&Es(e,"Mini")?Fu:Es(e," OPR/")?Ru:el.test(e)?wu:Es(e,"IE"+fu)||Es(e,"WPDesktop")?Pu:Es(e,ku)?xu:Es(e,Mu)||Es(e,"Edg/")?Lu:Es(e,"FBIOS")?"Facebook "+fu:Es(e,"UCWEB")||Es(e,"UCBrowser")?"UC Browser":Es(e,"CriOS")?Tu:Es(e,"CrMo")||Es(e,Eu)?Eu:Es(e,hu)&&Es(e,bu)?Nu:Es(e,"FxiOS")?Au:Es(e.toLowerCase(),Zu.toLowerCase())?Zu:nl(e,t)?Es(e,fu)?Hu:bu:Es(e,Ou)?Ou:Es(e,"MSIE")||Es(e,"Trident/")?Iu:Es(e,"Gecko")?Ou:""},il=((uu={})[Pu]=[new RegExp("rv:"+Yu)],uu[Lu]=[new RegExp(Mu+"?\\/"+Yu)],uu[Eu]=[new RegExp("("+Eu+"|CrMo)\\/"+Yu)],uu[Tu]=[new RegExp("CriOS\\/"+Yu)],uu["UC Browser"]=[new RegExp("(UCBrowser|UCWEB)\\/"+Yu)],uu[bu]=[Qu],uu[Hu]=[Qu],uu[Ru]=[new RegExp("(Opera|OPR)\\/"+Yu)],uu[Ou]=[new RegExp(Ou+"\\/"+Yu)],uu[Au]=[new RegExp("FxiOS\\/"+Yu)],uu[Zu]=[new RegExp("Konqueror[:/]?"+Yu,"i")],uu[wu]=[new RegExp(wu+" "+Yu),Qu],uu[Nu]=[new RegExp("android\\s"+Yu,"i")],uu[xu]=[new RegExp(ku+"\\/"+Yu)],uu[Iu]=[new RegExp("(rv:|MSIE )"+Yu)],uu.Mozilla=[new RegExp("rv:"+Yu)],uu),ol=function(e,t){var n=rl(e,t),r=il[n];if(Ds(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},sl=[[new RegExp($u+"; "+$u+" (.*?)[);]","i"),function(e){return[$u,e&&e[1]||""]}],[new RegExp(Du,"i"),[Du,""]],[new RegExp(qu,"i"),[qu,""]],[el,[wu,""]],[new RegExp(Bu,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[ju,""];if(new RegExp(fu).test(t)&&!/IEMobile\b/.test(t))return[Bu+" "+fu,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=tl[r]||"";return/arm/i.test(t)&&(i="RT"),[Bu,i]}return[Bu,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[pu,t.join(".")]}return[pu,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=Ds(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+hu+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+hu+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[hu,t.join(".")]}return[hu,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Cu,""]],[/Linux|debian/i,["Linux",""]]],al=function(e){return Ku.test(e)?Du:Ju.test(e)?qu:Xu.test(e)?$u:new RegExp(Vu,"i").test(e)?Vu:new RegExp("("+ju+"|WPDesktop)","i").test(e)?ju:/iPad/.test(e)?gu:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?yu:el.test(e)?wu:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Uu,"i").test(e)?Uu:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(fu).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?hu:vu:hu:new RegExp("(pda|"+fu+")","i").test(e)?Wu:new RegExp(_u,"i").test(e)&&!new RegExp(_u+" pc","i").test(e)?Gu:""},ul=function(e){var t=al(e);return t===gu||t===vu||"Kobo"===t||"Kindle Fire"===t||t===Gu?_u:t===Du||t===$u||t===qu||t===Vu?"Console":t===yu?"Wearable":t?fu:"Desktop"},ll="$copy_autocapture",cl=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),dl=["localhost","127.0.0.1"],fl=function(e){var t=null==vs?void 0:vs.createElement("a");return Ds(t)?null:(t.href=e,t)},pl=function(e,t){var n,r;void 0===t&&(t="&");var i=[];return Oa(e,(function(e,t){Ds(e)||Ds(t)||"undefined"===t||(n=encodeURIComponent(function(e){return e instanceof File}(e)?e.name:e.toString()),r=encodeURIComponent(t),i[i.length]=r+"="+n)})),i.join(t)},hl=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!Ms(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(e){Ra.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},_l=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",o=r[1],s=i.split("?"),a=s[1],u=s[0],l=(a||"").split("&"),c=[],d=0;d<l.length;d++){var f=l[d].split("=");Ms(f)&&(t.includes(f[0])?c.push(f[0]+"="+n):c.push(l[d]))}var p=u;return null!=a&&(p+="?"+c.join("&")),null!=o&&(p+="#"+o),p},vl=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},gl=Uint8Array,ml=Uint16Array,yl=Uint32Array,bl=new gl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wl=new gl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sl=new gl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kl=function(e,t){for(var n=new ml(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new yl(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},xl=kl(bl,2),El=xl[0],Cl=xl[1];El[28]=258,Cl[258]=28;for(var Tl=kl(wl,0)[1],Il=new ml(32768),Pl=0;Pl<32768;++Pl){var Rl=(43690&Pl)>>>1|(21845&Pl)<<1;Rl=(61680&(Rl=(52428&Rl)>>>2|(13107&Rl)<<2))>>>4|(3855&Rl)<<4,Il[Pl]=((65280&Rl)>>>8|(255&Rl)<<8)>>>1}var Fl=function(e,t,n){for(var r=e.length,i=0,o=new ml(t);i<r;++i)++o[e[i]-1];var s,a=new ml(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(n){s=new ml(1<<t);var u=15-t;for(i=0;i<r;++i)if(e[i])for(var l=i<<4|e[i],c=t-e[i],d=a[e[i]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)s[Il[d]>>>u]=l}else for(s=new ml(r),i=0;i<r;++i)s[i]=Il[a[e[i]-1]++]>>>15-e[i];return s},Ml=new gl(288);for(Pl=0;Pl<144;++Pl)Ml[Pl]=8;for(Pl=144;Pl<256;++Pl)Ml[Pl]=9;for(Pl=256;Pl<280;++Pl)Ml[Pl]=7;for(Pl=280;Pl<288;++Pl)Ml[Pl]=8;var Ll=new gl(32);for(Pl=0;Pl<32;++Pl)Ll[Pl]=5;var Ol=Fl(Ml,9,0),Al=Fl(Ll,5,0),Dl=function(e){return(e/8>>0)+(7&e&&1)},ql=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof ml?ml:e instanceof yl?yl:gl)(n-t);return r.set(e.subarray(t,n)),r},$l=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},Nl=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Hl=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new gl(0),0];if(1==i){var s=new gl(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],u=n[1],l=0,c=1,d=2;for(n[0]={s:-1,f:a.f+u.f,l:a,r:u};c!=i-1;)a=n[n[l].f<n[d].f?l++:d++],u=n[l!=c&&n[l].f<n[d].f?l++:d++],n[c++]={s:-1,f:a.f+u.f,l:a,r:u};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var p=new ml(f+1),h=Bl(n[c-1],p,0);if(h>t){r=0;var _=0,v=h-t,g=1<<v;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<i;++r){var m=o[r].s;if(!(p[m]>t))break;_+=g-(1<<h-p[m]),p[m]=t}for(_>>>=v;_>0;){var y=o[r].s;p[y]<t?_-=1<<t-p[y]++-1:++r}for(;r>=0&&_;--r){var b=o[r].s;p[b]==t&&(--p[b],++_)}h=t}return[new gl(p),h]},Bl=function(e,t,n){return-1==e.s?Math.max(Bl(e.l,t,n+1),Bl(e.r,t,n+1)):t[e.s]=n},jl=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ml(++t),r=0,i=e[0],o=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},Ul=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Vl=function(e,t,n){var r=n.length,i=Dl(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},zl=function(e,t,n,r,i,o,s,a,u,l,c){$l(t,c++,n),++i[256];for(var d=Hl(i,15),f=d[0],p=d[1],h=Hl(o,15),_=h[0],v=h[1],g=jl(f),m=g[0],y=g[1],b=jl(_),w=b[0],S=b[1],k=new ml(19),x=0;x<m.length;++x)k[31&m[x]]++;for(x=0;x<w.length;++x)k[31&w[x]]++;for(var E=Hl(k,7),C=E[0],T=E[1],I=19;I>4&&!C[Sl[I-1]];--I);var P,R,F,M,L=l+5<<3,O=Ul(i,Ml)+Ul(o,Ll)+s,A=Ul(i,f)+Ul(o,_)+s+14+3*I+Ul(k,C)+(2*k[16]+3*k[17]+7*k[18]);if(L<=O&&L<=A)return Vl(t,c,e.subarray(u,u+l));if($l(t,c,1+(A<O)),c+=2,A<O){P=Fl(f,p,0),R=f,F=Fl(_,v,0),M=_;var D=Fl(C,T,0);$l(t,c,y-257),$l(t,c+5,S-1),$l(t,c+10,I-4),c+=14;for(x=0;x<I;++x)$l(t,c+3*x,C[Sl[x]]);c+=3*I;for(var q=[m,w],N=0;N<2;++N){var H=q[N];for(x=0;x<H.length;++x){var B=31&H[x];$l(t,c,D[B]),c+=C[B],B>15&&($l(t,c,H[x]>>>5&127),c+=H[x]>>>12)}}}else P=Ol,R=Ml,F=Al,M=Ll;for(x=0;x<a;++x)if(r[x]>255){B=r[x]>>>18&31;Nl(t,c,P[B+257]),c+=R[B+257],B>7&&($l(t,c,r[x]>>>23&31),c+=bl[B]);var j=31&r[x];Nl(t,c,F[j]),c+=M[j],j>3&&(Nl(t,c,r[x]>>>5&8191),c+=wl[j])}else Nl(t,c,P[r[x]]),c+=R[r[x]];return Nl(t,c,P[256]),c+R[256]},Wl=new yl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gl=function(){for(var e=new yl(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Zl=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Gl[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}},Yl=function(e,t,n,r,i){return function(e,t,n,r,i,o){var s=e.length,a=new gl(r+s+5*(1+Math.floor(s/7e3))+i),u=a.subarray(r,a.length-i),l=0;if(!t||s<8)for(var c=0;c<=s;c+=65535){var d=c+65535;d<s?l=Vl(u,l,e.subarray(c,d)):(u[c]=o,l=Vl(u,l,e.subarray(c,s)))}else{for(var f=Wl[t-1],p=f>>>13,h=8191&f,_=(1<<n)-1,v=new ml(32768),g=new ml(_+1),m=Math.ceil(n/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&_},w=new yl(25e3),S=new ml(288),k=new ml(32),x=0,E=0,C=(c=0,0),T=0,I=0;c<s;++c){var P=b(c),R=32767&c,F=g[P];if(v[R]=F,g[P]=R,T<=c){var M=s-c;if((x>7e3||C>24576)&&M>423){l=zl(e,u,0,w,S,k,E,C,I,c-I,l),C=x=E=0,I=c;for(var L=0;L<286;++L)S[L]=0;for(L=0;L<30;++L)k[L]=0}var O=2,A=0,D=h,q=R-F&32767;if(M>2&&P==b(c-q))for(var N=Math.min(p,M)-1,H=Math.min(32767,c),B=Math.min(258,M);q<=H&&--D&&R!=F;){if(e[c+O]==e[c+O-q]){for(var j=0;j<B&&e[c+j]==e[c+j-q];++j);if(j>O){if(O=j,A=q,j>N)break;var U=Math.min(q,j-2),V=0;for(L=0;L<U;++L){var z=c-q+L+32768&32767,W=z-v[z]+32768&32767;W>V&&(V=W,F=z)}}}q+=(R=F)-(F=v[R])+32768&32767}if(A){w[C++]=268435456|Cl[O]<<18|Tl[A];var G=31&Cl[O],Z=31&Tl[A];E+=bl[G]+wl[Z],++S[257+G],++k[Z],T=c+O,++x}else w[C++]=e[c],++S[e[c]]}}l=zl(e,u,o,w,S,k,E,C,I,c-I,l)}return ql(a,0,r+Dl(l)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},Ql=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Xl=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Ql(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},Jl=function(e){return 10+(e.filename&&e.filename.length+1||0)};function Kl(e,t){void 0===t&&(t={});var n=Zl(),r=e.length;n.p(e);var i=Yl(e,t,Jl(t),8),o=i.length;return Xl(i,t),Ql(i,o-8,n.d()),Ql(i,o-4,r),i}function ec(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new gl(e.length+(e.length>>>1)),i=0,o=function(e){r[i++]=e},s=0;s<n;++s){if(i+5>r.length){var a=new gl(i+8+(n-s<<1));a.set(r),r=a}var u=e.charCodeAt(s);u<128||t?o(u):u<2048?(o(192|u>>>6),o(128|63&u)):u>55295&&u<57344?(o(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++s))>>>18),o(128|u>>>12&63),o(128|u>>>6&63),o(128|63&u)):(o(224|u>>>12),o(128|u>>>6&63),o(128|63&u))}return ql(r,0,i)}var tc=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),Ns(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},nc=!!ys||!!ms,rc="text/plain",ic=function(e,t){var n=e.split("?"),r=n[0],i=n[1],o=ji({},t);null==i||i.split("&").forEach((function(e){var t=e.split("=")[0];delete o[t]}));var s=pl(o);return r+"?"+(s=s?(i?i+"&":"")+s:i)},oc=function(e,t){return JSON.stringify(e,(function(e,t){return"bigint"==typeof t?t.toString():t}),t)},sc=function(e){var t=e.data,n=e.compression;if(t){if(n===cl.GZipJS){var r=Kl(ec(oc(t)),{mtime:0}),i=new Blob([r],{type:rc});return{contentType:rc,body:i,estimatedSize:i.size}}if(n===cl.Base64){var o=function(e){var t,n,r,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,l="",c=[];if(!e)return e;e=tc(e);do{t=(o=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,c[u++]=s.charAt(t)+s.charAt(n)+s.charAt(r)+s.charAt(i)}while(a<e.length);switch(l=c.join(""),e.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l}(oc(t)),s=function(e){return"data="+encodeURIComponent("string"==typeof e?e:oc(e))}(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=oc(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},ac=[];ms&&ac.push({transport:"fetch",method:function(e){var t,n,r=null!==(t=sc(e))&&void 0!==t?t:{},i=r.contentType,o=r.body,s=r.estimatedSize,a=new Headers;Oa(e.headers,(function(e,t){a.append(t,e)})),i&&a.append("Content-Type",i);var u=e.url,l=null;if(bs){var c=new bs;l={signal:c.signal,timeout:setTimeout((function(){return c.abort()}),e.timeout)}}ms(u,ji({method:(null==e?void 0:e.method)||"GET",headers:a,keepalive:"POST"===e.method&&(s||0)<52428.8,body:o,signal:null==(n=l)?void 0:n.signal},e.fetchOptions)).then((function(t){return t.text().then((function(n){var r={statusCode:t.status,text:n};if(200===t.status)try{r.json=JSON.parse(n)}catch(e){Ra.error(e)}null==e.callback||e.callback(r)}))})).catch((function(t){Ra.error(t),null==e.callback||e.callback({statusCode:0,text:t})})).finally((function(){return l?clearTimeout(l.timeout):null}))}}),ys&&ac.push({transport:"XHR",method:function(e){var t,n=new ys;n.open(e.method||"GET",e.url,!0);var r=null!==(t=sc(e))&&void 0!==t?t:{},i=r.contentType,o=r.body;Oa(e.headers,(function(e,t){n.setRequestHeader(t,e)})),i&&n.setRequestHeader("Content-Type",i),e.timeout&&(n.timeout=e.timeout),e.disableXHRCredentials||(n.withCredentials=!0),n.onreadystatechange=function(){if(4===n.readyState){var t={statusCode:n.status,text:n.responseText};if(200===n.status)try{t.json=JSON.parse(n.responseText)}catch(e){}null==e.callback||e.callback(t)}},n.send(o)}}),null!=_s&&_s.sendBeacon&&ac.push({transport:"sendBeacon",method:function(e){var t=ic(e.url,{beacon:"1"});try{var n,r=null!==(n=sc(e))&&void 0!==n?n:{},i=r.contentType,o=r.body,s="string"==typeof o?new Blob([o],{type:i}):o;_s.sendBeacon(t,s)}catch(e){}}});var uc=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};function lc(e,t,n){return oc({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}var cc={exact:function(e,t){return t.some((function(t){return e.some((function(e){return t===e}))}))},is_not:function(e,t){return t.every((function(t){return e.every((function(e){return t!==e}))}))},regex:function(e,t){return t.some((function(t){return e.some((function(e){return uc(t,e)}))}))},not_regex:function(e,t){return t.every((function(t){return e.every((function(e){return!uc(t,e)}))}))},icontains:function(e,t){return t.map(dc).some((function(t){return e.map(dc).some((function(e){return t.includes(e)}))}))},not_icontains:function(e,t){return t.map(dc).every((function(t){return e.map(dc).every((function(e){return!t.includes(e)}))}))}},dc=function(e){return e.toLowerCase()},fc=Fa("[Stylesheet Loader]"),pc=cs,hc=vs;function _c(e){return"$survey_response_"+e}var vc="#020617",gc={fontFamily:"inherit",backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:ns.Right,widgetType:ts.Tab,widgetLabel:"Feedback",widgetColor:"black",zIndex:"2147483647",disabledButtonOpacity:"0.6",maxWidth:"300px",textSubtleColor:"#939393",boxPadding:"20px 24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderRadius:"10px",shuffleQuestions:!1,surveyPopupDelaySeconds:void 0,outlineColor:"rgba(59, 130, 246, 0.8)",inputBackground:"white",inputTextColor:vc,scrollbarThumbColor:"var(--ph-survey-border-color)",scrollbarTrackColor:"var(--ph-survey-background-color)"};function mc(e){if("#"===e[0]){var t=e.replace(/^#/,"");return"rgb("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function yc(e){var t;void 0===e&&(e=gc.backgroundColor),"#"===e[0]&&(t=mc(e)),e.startsWith("rgb")&&(t=e);var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[e.toLowerCase()];if(n&&(t=mc(n)),!t)return vc;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(r){var i=parseInt(r[1]),o=parseInt(r[2]),s=parseInt(r[3]);return Math.sqrt(i*i*.299+o*o*.587+s*s*.114)>127.5?vc:"white"}return vc}function bc(e){var t=function(e,t,n){var r,i=e.createElement("style");return i.innerText=t,null!=n&&null!=(r=n.config)&&r.prepare_external_dependency_stylesheet&&(i=n.config.prepare_external_dependency_stylesheet(i)),i||(fc.error("prepare_external_dependency_stylesheet returned null"),null)}(hc,':host{--ph-survey-font-family:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI","Roboto",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--ph-survey-box-padding:20px 24px;--ph-survey-max-width:300px;--ph-survey-z-index:2147483647;--ph-survey-border-color:#dcdcdc;--ph-survey-border-bottom:1.5px solid var(--ph-survey-border-color);--ph-survey-border-radius:10px;--ph-survey-background-color:#eeeded;--ph-survey-box-shadow:0 4px 12px rgba(0,0,0,.15);--ph-survey-submit-button-color:#000;--ph-survey-submit-button-text-color:#fff;--ph-survey-rating-bg-color:#fff;--ph-survey-rating-text-color:#020617;--ph-survey-rating-active-bg-color:#000;--ph-survey-rating-active-text-color:#fff;--ph-survey-text-primary-color:#020617;--ph-survey-text-subtle-color:#939393;--ph-widget-color:#e0a045;--ph-widget-text-color:#fff;--ph-survey-scrollbar-thumb-color:var(--ph-survey-border-color);--ph-survey-scrollbar-track-color:var(--ph-survey-background-color);--ph-survey-outline-color:rgba(59,130,246,.8);--ph-survey-input-background:#fff;--ph-survey-input-text-color:#020617;--ph-survey-disabled-button-opacity:0.6}.ph-survey{bottom:0;height:fit-content;margin:0;max-width:85%;min-width:300px;position:fixed;width:var(--ph-survey-max-width);z-index:var(--ph-survey-z-index)}.ph-survey h3,.ph-survey p{margin:0}.ph-survey *{box-sizing:border-box;color:var(--ph-survey-text-primary-color);font-family:var(--ph-survey-font-family)}.ph-survey .multiple-choice-options label,.ph-survey input[type=text],.ph-survey textarea{background:var(--ph-survey-input-background);border:1.5px solid var(--ph-survey-border-color);border-radius:4px;color:var(--ph-survey-input-text-color);padding:10px;transition:border-color .2s ease-out,box-shadow .2s ease-out,transform .15s ease-out}.ph-survey input[type=text],.ph-survey textarea{transition:border-color .2s ease-out,box-shadow .2s ease-out,transform .15s ease-out}.ph-survey input{margin:0}.ph-survey .form-submit:focus,.ph-survey .form-submit:focus-visible,.ph-survey input[type=checkbox]:focus,.ph-survey input[type=checkbox]:focus-visible,.ph-survey input[type=radio]:focus,.ph-survey input[type=radio]:focus-visible,.ph-survey input[type=text]:focus,.ph-survey input[type=text]:focus-visible,.ph-survey textarea:focus,.ph-survey textarea:focus-visible{border-color:var(--ph-survey-rating-active-bg-color);outline:1.5px solid var(--ph-survey-outline-color);outline-offset:2px}.ph-survey button:focus:not(:focus-visible),.ph-survey input[type=checkbox]:focus:not(:focus-visible),.ph-survey input[type=radio]:focus:not(:focus-visible),.ph-survey input[type=text]:focus:not(:focus-visible),.ph-survey textarea:focus:not(:focus-visible){outline:none}.ph-survey input[type=text]:hover:not(:focus),.ph-survey textarea:hover:not(:focus){border-color:var(--ph-survey-rating-active-bg-color)}@media (max-width:768px){.ph-survey input[type=text],.ph-survey textarea{font-size:1rem}}.ph-survey .form-cancel,.ph-survey .multiple-choice-options label,.ph-survey .rating-options-number,.ph-survey input[type=checkbox],.ph-survey input[type=radio]{border:1.5px solid var(--ph-survey-border-color)}.ph-survey .footer-branding,.ph-survey .form-cancel,.ph-survey .form-submit,.ph-survey .ratings-emoji,.ph-survey .ratings-number,.ph-survey input[type=checkbox],.ph-survey input[type=radio],.ph-survey label{transition:all .2s ease-out}@media (prefers-reduced-motion:no-preference){.ph-survey button:active,.ph-survey input[type=checkbox]:active,.ph-survey input[type=radio]:active,.ph-survey label:active{transition-duration:.1s}}.ph-survey-widget-tab{background:var(--ph-widget-color);border:none;border-radius:3px 3px 0 0;color:var(--ph-widget-text-color);cursor:pointer;padding:10px 12px;position:fixed;right:0;text-align:center;top:50%;transform:rotate(-90deg) translateY(-100%);transform-origin:right top;transition:padding-bottom .2s ease-out;z-index:var(--ph-survey-z-index)}.ph-survey-widget-tab:hover{padding-bottom:16px}@keyframes ph-survey-fade-in{0%{opacity:0}to{opacity:1}}.survey-box{gap:16px}.bottom-section,.survey-box{display:flex;flex-direction:column}.bottom-section{gap:8px}.thank-you-message-header~.bottom-section{padding-top:16px}.question-container,.thank-you-message{display:flex;flex-direction:column;gap:8px}.survey-question{font-size:14px;font-weight:500}.survey-question-description{font-size:13px;opacity:.8;padding-top:4px}.question-textarea-wrapper{display:flex;flex-direction:column}.survey-form{animation:ph-survey-fade-in .3s ease-out forwards}.survey-form,.thank-you-message{background:var(--ph-survey-background-color);border:1.5px solid var(--ph-survey-border-color);border-bottom:var(--ph-survey-border-bottom);border-radius:var(--ph-survey-border-radius);box-shadow:var(--ph-survey-box-shadow);margin:0;padding:var(--ph-survey-box-padding);position:relative;text-align:left;width:100%;z-index:var(--ph-survey-z-index)}.survey-form input[type=text],.survey-form textarea{min-width:100%}:is(.survey-form textarea):focus,:is(.survey-form textarea):focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.08)}:is(.survey-form textarea):focus:not(:focus-visible){box-shadow:none}.survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options,.survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea{margin-top:0}.multiple-choice-options{border:none;display:flex;flex-direction:column;font-size:14px;gap:8px;margin:0;padding:1px 0}.multiple-choice-options .response-choice,.multiple-choice-options label{align-items:center;color:inherit;display:flex;gap:8px}.multiple-choice-options label{cursor:pointer;font-size:13px}:is(.multiple-choice-options label):hover:not(:has(input:checked)){border-color:var(--ph-survey-text-subtle-color);box-shadow:0 2px 8px rgba(0,0,0,.08)}:is(.multiple-choice-options label):has(input:checked){border-color:var(--ph-survey-rating-active-bg-color);box-shadow:0 1px 4px rgba(0,0,0,.05)}.choice-option-open:is(.multiple-choice-options label){flex-wrap:wrap}:is(.multiple-choice-options label) span{color:inherit}.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--ph-survey-input-background);border-radius:3px;cursor:pointer;flex-shrink:0;height:1rem;position:relative;transition:all .2s cubic-bezier(.4,0,.2,1),transform .15s ease-out;width:1rem;z-index:1}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):focus{transform:scale(1.05)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):hover{border-color:var(--ph-survey-rating-active-bg-color);transform:scale(1.05)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):active{transform:scale(.95)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):checked{background:var(--ph-survey-rating-active-bg-color);border-color:var(--ph-survey-rating-active-bg-color);transform:scale(1)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):checked:hover{transform:scale(1.05)}.multiple-choice-options input[type=checkbox]:checked:after{animation:ph-survey-checkmark-reveal .2s ease-out .1s forwards;border:solid var(--ph-survey-rating-active-text-color);border-width:0 2px 2px 0;height:8px;left:4px;transform:rotate(45deg) scale(0);width:4px}.multiple-choice-options input[type=radio]:checked:after{animation:ph-survey-radio-reveal .15s ease-out .05s forwards;background:var(--ph-survey-rating-active-text-color);border-radius:50%;height:6px;left:5px;top:5px;transform:scale(0);width:6px}.multiple-choice-options input[type=checkbox]:checked:after,.multiple-choice-options input[type=radio]:checked:after{box-sizing:content-box;content:"";position:absolute}.multiple-choice-options input[type=radio]{border-radius:50%}.multiple-choice-options input[type=radio]:checked{border:none}:is(.multiple-choice-options input[type=checkbox]:checked,.multiple-choice-options input[type=radio]:checked)~*{font-weight:700}:is(:is(.multiple-choice-options .choice-option-open) input[type=text])::placeholder{color:var(--ph-survey-text-subtle-color);font-weight:400}.rating-options-emoji{display:flex;justify-content:space-between}.ratings-emoji{background-color:transparent;border:none;font-size:16px;opacity:.5;padding:0}.ratings-emoji:hover{cursor:pointer;opacity:1;transform:scale(1.15)}.ratings-emoji.rating-active{opacity:1}.ratings-emoji svg{fill:var(--ph-survey-text-primary-color);transition:fill .2s ease-out}.rating-options-number{border-radius:6px;display:grid;grid-auto-columns:1fr;grid-auto-flow:column;overflow:hidden}.rating-options-number .ratings-number{border:none;border-right:1px solid var(--ph-survey-border-color);color:var(--ph-survey-rating-text-color);cursor:pointer;font-weight:700;text-align:center}:is(.rating-options-number .ratings-number):last-of-type{border-right:0}.rating-active:is(.rating-options-number .ratings-number){background:var(--ph-survey-rating-active-bg-color);color:var(--ph-survey-rating-active-text-color)}.ratings-number{background-color:var(--ph-survey-rating-bg-color);border:none;padding:8px 0}.ratings-number .rating-active{background-color:var(--ph-survey-rating-active-bg-color)}.ratings-number:hover{cursor:pointer}.rating-text{display:flex;flex-direction:row;font-size:11px;justify-content:space-between;opacity:.7}.form-submit{background:var(--ph-survey-submit-button-color);border:none;border-radius:6px;box-shadow:0 2px 0 rgba(0,0,0,.045);color:var(--ph-survey-submit-button-text-color);cursor:pointer;font-weight:700;min-width:100%;padding:12px;text-align:center;user-select:none}.form-submit:not([disabled]):hover{box-shadow:0 4px 8px rgba(0,0,0,.1);transform:scale(1.02)}.form-submit:not([disabled]):active{box-shadow:0 1px 2px rgba(0,0,0,.05);transform:scale(.98)}.form-submit[disabled]{cursor:not-allowed;opacity:var(--ph-survey-disabled-button-opacity)}.form-cancel{background:#fff;border-radius:100%;cursor:pointer;line-height:0;padding:12px;position:absolute;right:0;top:0;transform:translate(50%,-50%)}.form-cancel:hover{opacity:.7;transform:translate(50%,-50%) scale(1.1)}.footer-branding{align-items:center;display:flex;font-size:11px;font-weight:500;gap:4px;justify-content:center;opacity:.6;text-decoration:none}.footer-branding:hover{opacity:1}.footer-branding a{text-decoration:none}.thank-you-message{text-align:center}.thank-you-message-header{margin:10px 0 0}.thank-you-message-body{font-size:14px;opacity:.8}.limit-height{max-height:256px;overflow-x:hidden;overflow-y:auto;scrollbar-color:var(--ph-survey-scrollbar-thumb-color) var(--ph-survey-scrollbar-track-color);scrollbar-width:thin}.limit-height::-webkit-scrollbar{width:8px}.limit-height::-webkit-scrollbar-track{background:var(--ph-survey-scrollbar-track-color);border-radius:4px}.limit-height::-webkit-scrollbar-thumb{background-color:var(--ph-survey-scrollbar-thumb-color);border:2px solid var(--ph-survey-scrollbar-track-color);border-radius:4px}:is(.limit-height::-webkit-scrollbar-thumb):hover{background-color:var(--ph-survey-text-subtle-color)}.sr-only{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}@media (prefers-reduced-motion:reduce){.ph-survey *{animation-duration:.01ms!important;animation-iteration-count:1!important;scroll-behavior:auto!important;transition-duration:.01ms!important}}@keyframes ph-survey-checkmark-reveal{0%{opacity:0;transform:rotate(45deg) scale(0)}50%{opacity:1;transform:rotate(45deg) scale(1.2)}to{opacity:1;transform:rotate(45deg) scale(1)}}@keyframes ph-survey-radio-reveal{0%{opacity:0;transform:scale(0)}50%{opacity:1;transform:scale(1.3)}to{opacity:1;transform:scale(1)}}',e);return null==t||t.setAttribute("data-ph-survey-style","true"),t}var wc=function(e,t,n){var r=Nc(e),i=hc.querySelector("."+r);if(i&&i.shadowRoot)return{shadow:i.shadowRoot,isNewlyCreated:!1};var o=hc.createElement("div");!function(e,t,n){var r=ji({},gc,n),i=e.style,o=![ns.Center,ns.Left,ns.Right].includes(r.position)||t===rs.Widget&&(null==n?void 0:n.widgetType)===ts.Tab;i.setProperty("--ph-survey-font-family",function(e){if("inherit"===e)return"inherit";var t='BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';return e?e+", "+t:"-apple-system, "+t}(r.fontFamily)),i.setProperty("--ph-survey-box-padding",r.boxPadding),i.setProperty("--ph-survey-max-width",r.maxWidth),i.setProperty("--ph-survey-z-index",r.zIndex),i.setProperty("--ph-survey-border-color",r.borderColor),o?(i.setProperty("--ph-survey-border-radius",r.borderRadius),i.setProperty("--ph-survey-border-bottom","1.5px solid var(--ph-survey-border-color)")):(i.setProperty("--ph-survey-border-bottom","none"),i.setProperty("--ph-survey-border-radius",r.borderRadius+" "+r.borderRadius+" 0 0")),i.setProperty("--ph-survey-background-color",r.backgroundColor),i.setProperty("--ph-survey-box-shadow",r.boxShadow),i.setProperty("--ph-survey-disabled-button-opacity",r.disabledButtonOpacity),i.setProperty("--ph-survey-submit-button-color",r.submitButtonColor),i.setProperty("--ph-survey-submit-button-text-color",(null==n?void 0:n.submitButtonTextColor)||yc(r.submitButtonColor)),i.setProperty("--ph-survey-rating-bg-color",r.ratingButtonColor),i.setProperty("--ph-survey-rating-text-color",yc(r.ratingButtonColor)),i.setProperty("--ph-survey-rating-active-bg-color",r.ratingButtonActiveColor),i.setProperty("--ph-survey-rating-active-text-color",yc(r.ratingButtonActiveColor)),i.setProperty("--ph-survey-text-primary-color",yc(r.backgroundColor)),i.setProperty("--ph-survey-text-subtle-color",r.textSubtleColor),i.setProperty("--ph-widget-color",r.widgetColor),i.setProperty("--ph-widget-text-color",yc(r.widgetColor)),i.setProperty("--ph-widget-z-index",r.zIndex),"white"===r.backgroundColor&&i.setProperty("--ph-survey-input-background","#f8f8f8"),i.setProperty("--ph-survey-input-background",r.inputBackground),i.setProperty("--ph-survey-input-text-color",yc(r.inputBackground)),i.setProperty("--ph-survey-scrollbar-thumb-color",r.scrollbarThumbColor),i.setProperty("--ph-survey-scrollbar-track-color",r.scrollbarTrackColor),i.setProperty("--ph-survey-outline-color",r.outlineColor)}(o,e.type,e.appearance),o.className=r;var s=o.attachShadow({mode:"open"}),a=bc(t);if(a){var u=s.querySelector("style");u&&s.removeChild(u),s.appendChild(a)}return hc.body.appendChild(o),{shadow:s,isNewlyCreated:!0}},Sc=function(e,t){if(!t)return null;var n=e[_c(t)];return Ms(n)?[].concat(n):n},kc=function(e){var t,n,r=e.responses,i=e.survey,o=e.surveySubmissionId,s=e.posthog,a=e.isSurveyCompleted;s?(eu(i),s.capture(as.SENT,ji(((t={})[us.SURVEY_NAME]=i.name,t[us.SURVEY_ID]=i.id,t[us.SURVEY_ITERATION]=i.current_iteration,t[us.SURVEY_ITERATION_START_DATE]=i.current_iteration_start_date,t[us.SURVEY_QUESTIONS]=i.questions.map((function(e){return{id:e.id,question:e.question,response:Sc(r,e.id)}})),t[us.SURVEY_SUBMISSION_ID]=o,t[us.SURVEY_COMPLETED]=a,t.sessionRecordingUrl=null==s.get_session_replay_url?void 0:s.get_session_replay_url(),t),r,{$set:(n={},n[Ja(i,"responded")]=!0,n)})),a&&(pc.dispatchEvent(new CustomEvent("PHSurveySent",{detail:{surveyId:i.id}})),$c(i))):Wa.error("[survey sent] event not captured, PostHog instance not found.")},xc=function(e,t,n){var r,i,o;if(t){if(!n){var s=Dc(e);t.capture(as.DISMISSED,ji(((r={})[us.SURVEY_NAME]=e.name,r[us.SURVEY_ID]=e.id,r[us.SURVEY_ITERATION]=e.current_iteration,r[us.SURVEY_ITERATION_START_DATE]=e.current_iteration_start_date,r[us.SURVEY_PARTIALLY_COMPLETED]=Object.values((null==s?void 0:s.responses)||{}).filter((function(e){return!Hs(e)})).length>0,r.sessionRecordingUrl=null==t.get_session_replay_url?void 0:t.get_session_replay_url(),r),null==s?void 0:s.responses,((o={})[us.SURVEY_SUBMISSION_ID]=null==s?void 0:s.surveySubmissionId,o[us.SURVEY_QUESTIONS]=e.questions.map((function(e){return{id:e.id,question:e.question,response:Sc((null==s?void 0:s.responses)||{},e.id)}})),o.$set=((i={})[Ja(e,"dismissed")]=!0,i),o))),$c(e),eu(e),pc.dispatchEvent(new CustomEvent("PHSurveyClosed",{detail:{surveyId:e.id}}))}}else Wa.error("[survey dismissed] event not captured, PostHog instance not found.")},Ec=function(e){return e.map((function(e){return{sort:Math.floor(10*Math.random()),value:e}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))},Cc=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))?t.reverse():t},Tc=function(e){return e.appearance&&e.appearance.shuffleQuestions&&!e.enable_partial_responses?Cc(e.questions,Ec(e.questions)):e.questions},Ic=function(e){var t;return!(null==(t=e.conditions)||null==(t=t.events)||!t.repeatedActivation||!function(e){var t,n;return null!=(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)?void 0:t.length)&&(null==(n=e.conditions)||null==(n=n.events)||null==(n=n.values)?void 0:n.length)>0}(e))||e.schedule===ss.Always||qc(e)},Pc=function(e,t){var n={__c:t="__cC"+Ki++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,po(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}({isPreviewMode:!1,previewPageIndex:0,onPopupSurveyDismissed:function(){},isPopup:!0,onPreviewSubmit:function(){},surveySubmissionId:""}),Rc=function(){return Go(Pc)},Fc=function(e){var t=e.component,n=e.children,r=e.renderAsHtml,i=e.style;return Po(t,r?{dangerouslySetInnerHTML:{__html:n},style:i}:{children:n,style:i})};function Mc(e){return null!=e?e:"icontains"}function Lc(e){var t,n,r;if(null==(t=e.conditions)||!t.url)return!0;var i=null==pc||null==(n=pc.location)?void 0:n.href;if(!i)return!1;var o=[e.conditions.url],s=Mc(null==(r=e.conditions)?void 0:r.urlMatchType);return cc[s](o,[i])}var Oc=function(e){var t=""+Xa+e.id;return e.current_iteration&&e.current_iteration>0&&(t=""+Xa+e.id+"_"+e.current_iteration),t},Ac=function(e,t){try{localStorage.setItem(Oc(e),JSON.stringify(t))}catch(e){Wa.error("Error setting in-progress survey state in localStorage",e)}},Dc=function(e){try{var t=localStorage.getItem(Oc(e));if(t)return JSON.parse(t)}catch(e){Wa.error("Error getting in-progress survey state from localStorage",e)}return null},qc=function(e){var t=Dc(e);return!Hs(null==t?void 0:t.surveySubmissionId)},$c=function(e){try{localStorage.removeItem(Oc(e))}catch(e){Wa.error("Error clearing in-progress survey state from localStorage",e)}};function Nc(e,t){void 0===t&&(t=!1);var n="PostHogSurvey-"+e.id;return t?"."+n:n}var Hc=0;function Bc(e,t,n,r,i,o){var s,a,u={};for(a in t)"ref"==a?s=t[a]:u[a]=t[a];var l={type:e,props:u,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Hc,__i:-1,__u:0,__source:i,__self:o};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===u[a]&&(u[a]=s[a]);return Gi.vnode&&Gi.vnode(l),l}var jc=Bc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Bc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Uc=Bc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Bc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Vc=Bc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Bc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),zc=Bc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Bc("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),Wc=Bc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Bc("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Gc=Bc("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-survey-title",children:[Bc("title",{id:"close-survey-title",children:"Close survey"}),Bc("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})]}),Zc=Bc("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Bc("g",{"clip-path":"url(#clip0_2415_6911)",children:[Bc("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:Bc("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),Bc("g",{mask:"url(#mask0_2415_6911)",children:[Bc("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),Bc("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),Bc("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),Bc("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),Bc("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),Bc("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),Bc("defs",{children:Bc("clipPath",{id:"clip0_2415_6911",children:Bc("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]});function Yc(){return Bc("a",{href:"https://posthog.com/surveys",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",Zc]})}function Qc(e){var t=e.text,n=e.submitDisabled,r=e.appearance,i=e.onSubmit,o=e.link,s=e.onPreviewSubmit,a=e.skipSubmitButton,u=Go(Pc).isPreviewMode;return Bc("div",{className:"bottom-section",children:[!a&&Bc("button",{className:"form-submit",disabled:n,"aria-label":"Submit survey",type:"button",onClick:function(){o&&(null==cs||cs.open(o)),u?null==s||s():i()},children:t}),!r.whiteLabel&&Bc(Yc,{})]})}function Xc(e){var t=e.question,n=e.forceDisableHtml,r=e.htmlFor;return Bc("div",{class:"question-header",children:[Bc(t.type===is.Open?"label":"h3",{className:"survey-question",htmlFor:r,children:t.question}),t.description&&Fc({component:so("p",{className:"survey-question-description"}),children:t.description,renderAsHtml:!n&&"text"!==t.descriptionContentType})]})}function Jc(e){return Bc("button",{className:"form-cancel",onClick:e.onClick,disabled:Go(Pc).isPreviewMode,"aria-label":"Close survey",type:"button",children:Gc})}Bc("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Bc("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});var Kc=cs;function ed(e){var t=e.header,n=e.description,r=e.contentType,i=e.forceDisableHtml,o=e.appearance,s=e.onClose,a=Go(Pc).isPopup;return Vo((function(){var e=function(e){"Enter"!==e.key&&"Escape"!==e.key||(e.preventDefault(),s())};return za(Kc,"keydown",e),function(){Kc.removeEventListener("keydown",e)}}),[s]),Bc("div",{className:"thank-you-message",role:"status",tabIndex:0,"aria-atomic":"true",children:[a&&Bc(Jc,{onClick:function(){return s()}}),Bc("h3",{className:"thank-you-message-header",children:t}),n&&Fc({component:so("p",{className:"thank-you-message-body"}),children:n,renderAsHtml:!i&&"text"!==r}),a&&Bc(Qc,{text:o.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:o,onSubmit:function(){return s()}})]})}var td=function(e){return Ms(e)&&e.every((function(e){return qs(e)}))};function nd(e){var t=e.question,n=e.forceDisableHtml,r=e.appearance,i=e.onSubmit,o=e.onPreviewSubmit,s=e.displayQuestionIndex,a=e.initialValue,u=Rc().isPreviewMode,l=zo(null),c=Uo((function(){return qs(a)?a:""})),d=c[0],f=c[1];Vo((function(){setTimeout((function(){var e;u||(null==(e=l.current)||e.focus())}),100)}),[u]);var p="surveyQuestion"+s;return Bc(uo,{children:[Bc("div",{className:"question-container",children:[Bc(Xc,{question:t,forceDisableHtml:n,htmlFor:p}),Bc("textarea",{ref:l,id:p,rows:4,placeholder:null==r?void 0:r.placeholder,onInput:function(e){f(e.currentTarget.value),e.stopPropagation()},onKeyDown:function(e){e.stopPropagation()},value:d})]}),Bc(Qc,{text:t.buttonText||"Submit",submitDisabled:!d&&!t.optional,appearance:r,onSubmit:function(){return i(d)},onPreviewSubmit:function(){return o(d)}})]})}function rd(e){var t=e.question,n=e.forceDisableHtml,r=e.appearance,i=e.onSubmit,o=e.onPreviewSubmit;return Bc(uo,{children:[Bc("div",{className:"question-container",children:Bc(Xc,{question:t,forceDisableHtml:n})}),Bc(Qc,{text:t.buttonText||"Submit",submitDisabled:!1,link:t.link,appearance:r,onSubmit:function(){return i("link clicked")},onPreviewSubmit:function(){return o("link clicked")}})]})}function id(e){var t=e.question,n=e.forceDisableHtml,r=e.displayQuestionIndex,i=e.appearance,o=e.onSubmit,s=e.onPreviewSubmit,a=e.initialValue,u=t.scale,l=10===t.scale?0:1,c=Uo((function(){return Bs(a)?a:Ms(a)&&a.length>0&&Bs(parseInt(a[0]))?parseInt(a[0]):qs(a)&&Bs(parseInt(a))?parseInt(a):null})),d=c[0],f=c[1],p=Rc().isPreviewMode,h=function(e){return p?s(e):o(e)};return Bc(uo,{children:[Bc("div",{className:"question-container",children:[Bc(Xc,{question:t,forceDisableHtml:n}),Bc("div",{className:"rating-section",children:[Bc("div",{className:"rating-options",children:["emoji"===t.display&&Bc("div",{className:"rating-options-emoji",children:(3===t.scale?ad:ud).map((function(e,n){return Bc("button",{"aria-label":"Rate "+(n+1),className:"ratings-emoji question-"+r+"-rating-"+n+" "+(n+1===d?"rating-active":""),value:n+1,type:"button",onClick:function(){var e=n+1;f(e),t.skipSubmitButton&&h(e)},children:e},n)}))}),"number"===t.display&&Bc("div",{className:"rating-options-number",style:{gridTemplateColumns:"repeat("+(u-l+1)+", minmax(0, 1fr))"},children:fd(t.scale).map((function(e,n){return Bc(od,{displayQuestionIndex:r,active:d===e,appearance:i,num:e,setActiveNumber:function(e){f(e),t.skipSubmitButton&&h(e)}},n)}))})]}),Bc("div",{className:"rating-text",children:[Bc("div",{children:t.lowerBoundLabel}),Bc("div",{children:t.upperBoundLabel})]})]})]}),Bc(Qc,{text:t.buttonText||(null==i?void 0:i.submitButtonText)||"Submit",submitDisabled:Ns(d)&&!t.optional,appearance:i,onSubmit:function(){return o(d)},onPreviewSubmit:function(){return s(d)},skipSubmitButton:t.skipSubmitButton})]})}function od(e){var t=e.num,n=e.active,r=e.displayQuestionIndex,i=e.setActiveNumber;return Bc("button",{"aria-label":"Rate "+t,className:"ratings-number question-"+r+"-rating-"+t+" "+(n?"rating-active":""),type:"button",onClick:function(){i(t)},children:t})}function sd(e){var t=e.question,n=e.forceDisableHtml,r=e.displayQuestionIndex,i=e.appearance,o=e.onSubmit,s=e.onPreviewSubmit,a=e.initialValue,u=zo(null),l=Wo((function(){return function(e){if(!e.shuffleOptions)return e.choices;var t=e.choices,n="";e.hasOpenChoice&&(n=t.pop());var r=Cc(t,Ec(t));return e.hasOpenChoice&&(e.choices.push(n),r.push(n)),r}(t)}),[t]),c=Uo((function(){return function(e,t){return qs(e)||td(e)?e:t===is.SingleChoice?null:[]}(a,t.type)})),d=c[0],f=c[1],p=Uo((function(){return function(e,t){if(qs(e)&&!t.includes(e))return{isSelected:!0,inputValue:e};if(td(e)){var n=e.find((function(e){return!t.includes(e)}));if(n)return{isSelected:!0,inputValue:n}}return{isSelected:!1,inputValue:""}}(a,l)})),h=p[0],_=p[1],v=Rc().isPreviewMode,g=t.type===is.SingleChoice,m=t.type===is.MultipleChoice,y=t.skipSubmitButton&&g&&!t.hasOpenChoice,b=function(e,t){if(t){var n=!h.isSelected;return _((function(e){return ji({},e,{isSelected:n,inputValue:n?e.inputValue:""})})),g&&f(""),void(n&&setTimeout((function(){var e;return null==(e=u.current)?void 0:e.focus()}),75))}if(g)return f(e),_((function(e){return ji({},e,{isSelected:!1,inputValue:""})})),void(y&&(o(e),v&&s(e)));m&&Ms(d)&&(d.includes(e)?f(d.filter((function(t){return t!==e}))):f([].concat(d,[e])))},w=function(e){e.stopPropagation();var t=e.currentTarget.value;_((function(e){return ji({},e,{inputValue:t})})),g&&f(t)},S=function(e){e.stopPropagation(),"Enter"!==e.key||k()||(e.preventDefault(),x()),"Escape"===e.key&&(e.preventDefault(),_((function(e){return ji({},e,{isSelected:!1,inputValue:""})})),g&&f(null))},k=function(){return!t.optional&&(!!Ns(d)||(!(!Ms(d)||h.isSelected||0!==d.length)||!(!h.isSelected||""!==h.inputValue.trim())))},x=function(){h.isSelected&&m?Ms(d)&&(v?s([].concat(d,[h.inputValue])):o([].concat(d,[h.inputValue]))):v?s(d):o(d)};return Bc(uo,{children:[Bc("div",{className:"question-container",children:[Bc(Xc,{question:t,forceDisableHtml:n}),Bc("fieldset",{className:"multiple-choice-options limit-height",children:[Bc("legend",{className:"sr-only",children:m?" Select all that apply":" Select one"}),l.map((function(e,n){var i=!!t.hasOpenChoice&&n===t.choices.length-1,o="surveyQuestion"+r+"Choice"+n,s=o+"Open",a=i?h.isSelected:g?d===e:Ms(d)&&d.includes(e);return Bc("label",{className:i?"choice-option-open":"",children:[Bc("div",{className:"response-choice",children:[Bc("input",{type:g?"radio":"checkbox",name:o,checked:a,onChange:function(){return b(e,i)},id:o,"aria-controls":s}),Bc("span",{children:i?e+":":e})]}),i&&Bc("input",{type:"text",ref:u,id:s,name:"question"+r+"Open",value:h.inputValue,onKeyDown:S,onInput:w,onClick:function(t){h.isSelected||b(e,!0),t.stopPropagation()},"aria-label":e+" - please specify"})]},n)}))]})]}),Bc(Qc,{text:t.buttonText||"Submit",submitDisabled:k(),appearance:i,onSubmit:x,onPreviewSubmit:x,skipSubmitButton:y})]})}var ad=[Vc,Uc,jc],ud=[zc,Vc,Uc,jc,Wc],ld=[1,2,3,4,5],cd=[1,2,3,4,5,6,7],dd=[0,1,2,3,4,5,6,7,8,9,10];function fd(e){switch(e){case 5:default:return ld;case 7:return cd;case 10:return dd}}var pd=cs,hd=vs,_d="ph:show_survey_widget",vd="PHWidgetSurveyClickListener";function gd(e,t,n){var r,i=e.questions[t],o=t+1;if(null==(r=i.branching)||!r.type)return t===e.questions.length-1?os.End:o;if(i.branching.type===os.End)return os.End;if(i.branching.type===os.SpecificQuestion){if(Number.isInteger(i.branching.index))return i.branching.index}else if(i.branching.type===os.ResponseBased){if(i.type===is.SingleChoice){var s,a=i.choices.indexOf(""+n);if(-1===a&&i.hasOpenChoice&&(a=i.choices.length-1),null!=(s=i.branching)&&null!=(s=s.responseValues)&&s.hasOwnProperty(a)){var u=i.branching.responseValues[a];return Number.isInteger(u)?u:u===os.End?os.End:o}}else if(i.type===is.Rating){var l;if("number"!=typeof n||!Number.isInteger(n))throw new Error("The response type must be an integer");var c=function(e,t){if(3===t){if(e<1||e>3)throw new Error("The response must be in range 1-3");return 1===e?"negative":2===e?"neutral":"positive"}if(5===t){if(e<1||e>5)throw new Error("The response must be in range 1-5");return e<=2?"negative":3===e?"neutral":"positive"}if(7===t){if(e<1||e>7)throw new Error("The response must be in range 1-7");return e<=3?"negative":4===e?"neutral":"positive"}if(10===t){if(e<0||e>10)throw new Error("The response must be in range 0-10");return e<=6?"detractors":e<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(n,i.scale);if(null!=(l=i.branching)&&null!=(l=l.responseValues)&&l.hasOwnProperty(c)){var d=i.branching.responseValues[c];return Number.isInteger(d)?d:d===os.End?os.End:o}}return o}return Wa.warn("Falling back to next question index due to unexpected branching type"),o}var md=250,yd=20,bd=12;var wd=function(){function e(e){var t=this;this._surveyTimeouts=new Map,this._widgetSelectorListeners=new Map,this.handlePopoverSurvey=function(e){var n;t._clearSurveyTimeout(e.id),t._addSurveyToFocus(e);var r=(null==(n=e.appearance)?void 0:n.surveyPopupDelaySeconds)||0,i=wc(e,t._posthog).shadow;if(r<=0)return Io(Bc(Ed,{posthog:t._posthog,survey:e,removeSurveyFromFocus:t._removeSurveyFromFocus}),i);var o=setTimeout((function(){if(!Lc(e))return t._removeSurveyFromFocus(e);Io(Bc(Ed,{posthog:t._posthog,survey:ji({},e,{appearance:ji({},e.appearance,{surveyPopupDelaySeconds:0})}),removeSurveyFromFocus:t._removeSurveyFromFocus}),i)}),1e3*r);t._surveyTimeouts.set(e.id,o)},this._handleWidget=function(e){var n=wc(e,t._posthog),r=n.shadow;n.isNewlyCreated&&Io(Bc(Td,{posthog:t._posthog,survey:e},e.id),r)},this._removeWidgetSelectorListener=function(e){t._removeSurveyFromDom(e);var n=t._widgetSelectorListeners.get(e.id);n&&(n.element.removeEventListener("click",n.listener),n.element.removeAttribute(vd),t._widgetSelectorListeners.delete(e.id),Wa.info("Removed click listener for survey "+e.id))},this._manageWidgetSelectorListener=function(e,n){var r=hd.querySelector(n),i=t._widgetSelectorListeners.get(e.id);if(r){if(t._handleWidget(e),i){if(r===i.element)return;Wa.info("Selector element changed for survey "+e.id+". Re-attaching listener."),t._removeWidgetSelectorListener(e)}if(!r.hasAttribute(vd)){var o=function(t){var n,r;t.stopPropagation();var i=(null==(n=e.appearance)?void 0:n.position)===ns.NextToTrigger?function(e,t){try{var n=e.getBoundingClientRect(),r=pd.innerHeight,i=pd.innerWidth,o=md,s=n.left+n.width/2-t/2;s+t>i-yd&&(s=i-t-yd),s<yd&&(s=yd);var a=bd,u=r-n.bottom,l=n.top,c=u<o&&l>u;return{position:"fixed",top:c?"auto":n.bottom+a+"px",left:s+"px",right:"auto",bottom:c?r-n.top+a+"px":"auto",zIndex:gc.zIndex}}catch(e){return Wa.warn("Failed to calculate trigger position:",e),null}}(t.currentTarget,parseInt((null==(r=e.appearance)?void 0:r.maxWidth)||gc.maxWidth)):{};pd.dispatchEvent(new CustomEvent(_d,{detail:{surveyId:e.id,position:i}}))};za(r,"click",o),r.setAttribute(vd,"true"),t._widgetSelectorListeners.set(e.id,{element:r,listener:o,survey:e}),Wa.info("Attached click listener for feedback button survey "+e.id)}}else i&&t._removeWidgetSelectorListener(e)},this.renderPopover=function(e){var n=wc(e,t._posthog).shadow;Io(Bc(Ed,{posthog:t._posthog,survey:e,removeSurveyFromFocus:t._removeSurveyFromFocus}),n)},this.renderSurvey=function(e,n){Io(Bc(Ed,{posthog:t._posthog,survey:e,removeSurveyFromFocus:t._removeSurveyFromFocus,isPopup:!1}),n)},this.getActiveMatchingSurveys=function(e,n){var r;void 0===n&&(n=!1),null==(r=t._posthog)||r.surveys.getSurveys((function(n){var r=n.filter((function(e){return t.checkSurveyEligibility(e).eligible&&t._isSurveyConditionMatched(e)&&t._hasActionOrEventTriggeredSurvey(e)&&t._checkFlags(e)}));e(r)}),n)},this.callSurveysAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getActiveMatchingSurveys((function(e){var n=e.filter((function(e){return e.type===rs.Popover||e.type===rs.Widget})),r=t._sortSurveysByAppearanceDelay(n),i=new Set;r.forEach((function(e){if(e.type===rs.Widget){var n,r,o,s;if((null==(n=e.appearance)?void 0:n.widgetType)===ts.Tab)return void t._handleWidget(e);if((null==(r=e.appearance)?void 0:r.widgetType)===ts.Selector&&null!=(o=e.appearance)&&o.widgetSelector)i.add(e.id),t._manageWidgetSelectorListener(e,null==(s=e.appearance)?void 0:s.widgetSelector)}Ns(t._surveyInFocus)&&e.type===rs.Popover&&t.handlePopoverSurvey(e)})),t._widgetSelectorListeners.forEach((function(e){var n=e.survey;i.has(n.id)||t._removeWidgetSelectorListener(n)}))}),e)},this._addSurveyToFocus=function(e){Ns(t._surveyInFocus)||Wa.error("Survey "+t._surveyInFocus+" already in focus. Cannot add survey "+e.id+"."),t._surveyInFocus=e.id},this._removeSurveyFromFocus=function(e){t._surveyInFocus!==e.id&&Wa.error("Survey "+e.id+" is not in focus. Cannot remove survey "+e.id+"."),t._clearSurveyTimeout(e.id),t._surveyInFocus=null,t._removeSurveyFromDom(e)},this._posthog=e,this._surveyInFocus=null}var t=e.prototype;return t._clearSurveyTimeout=function(e){var t=this._surveyTimeouts.get(e);t&&(clearTimeout(t),this._surveyTimeouts.delete(e))},t._sortSurveysByAppearanceDelay=function(e){return e.sort((function(e,t){var n,r,i=qc(e),o=qc(t);if(i&&!o)return-1;if(!i&&o)return 1;var s=e.schedule===ss.Always,a=t.schedule===ss.Always;return s&&!a?1:!s&&a?-1:((null==(n=e.appearance)?void 0:n.surveyPopupDelaySeconds)||0)-((null==(r=t.appearance)?void 0:r.surveyPopupDelaySeconds)||0)}))},t._isSurveyFeatureFlagEnabled=function(e,t){if(void 0===t&&(t=void 0),!e)return!0;var n=!!this._posthog.featureFlags.isFeatureEnabled(e,{send_event:!e.startsWith("survey-targeting-")}),r=!0;t&&(r=this._posthog.featureFlags.getFeatureFlag(e,{send_event:!1})===t||"any"===t);return n&&r},t._isSurveyConditionMatched=function(e){return!e.conditions||Lc(e)&&function(e){var t,n,r;if(null==(t=e.conditions)||!t.deviceTypes||0===(null==(n=e.conditions)?void 0:n.deviceTypes.length))return!0;if(!ws)return!1;var i=ul(ws);return cc[Mc(null==(r=e.conditions)?void 0:r.deviceTypesMatchType)](e.conditions.deviceTypes,[i])}(e)&&function(e){var t;return null==(t=e.conditions)||!t.selector||!(null==hc||!hc.querySelector(e.conditions.selector))}(e)},t._internalFlagCheckSatisfied=function(e){return Ic(e)||this._isSurveyFeatureFlagEnabled(e.internal_targeting_flag_key)||qc(e)},t.checkSurveyEligibility=function(e){var t,n,r={eligible:!0,reason:void 0};if(!Ga(e))return r.eligible=!1,r.reason="Survey is not running. It was completed on "+e.end_date,r;if(!tu.includes(e.type))return r.eligible=!1,r.reason="Surveys of type "+e.type+" are never eligible to be shown in the app",r;var i=null==(t=e.conditions)?void 0:t.linkedFlagVariant;return this._isSurveyFeatureFlagEnabled(e.linked_flag_key,i)?this._isSurveyFeatureFlagEnabled(e.targeting_flag_key)?this._internalFlagCheckSatisfied(e)?function(e){var t=localStorage.getItem("lastSeenSurveyDate");if(!e||!t)return!0;var n=new Date,r=Math.abs(n.getTime()-new Date(t).getTime());return Math.ceil(r/864e5)>e}(null==(n=e.conditions)?void 0:n.seenSurveyWaitPeriodInDays)?function(e){return!!localStorage.getItem(Ka(e))&&!Ic(e)}(e)?(r.eligible=!1,r.reason="Survey has already been seen and it can't be activated again",r):r:(r.eligible=!1,r.reason="Survey wait period has not passed",r):(r.eligible=!1,r.reason="Survey internal targeting flag is not enabled and survey cannot activate repeatedly and survey is not in progress",r):(r.eligible=!1,r.reason="Survey targeting feature flag is not enabled",r):(r.eligible=!1,r.reason=i?"Survey linked feature flag is not enabled for variant "+i:"Survey linked feature flag is not enabled",r)},t._hasActionOrEventTriggeredSurvey=function(e){var t;if(!Za(e)&&!Ya(e))return!0;var n=null==(t=this._posthog.surveys._surveyEventReceiver)?void 0:t.getSurveys();return!(null==n||!n.includes(e.id))},t._checkFlags=function(e){var t,n=this;return null==(t=e.feature_flag_keys)||!t.length||e.feature_flag_keys.every((function(e){var t=e.key,r=e.value;return!t||!r||n._isSurveyFeatureFlagEnabled(r)}))},t._removeSurveyFromDom=function(e){try{var t=hd.querySelector(Nc(e,!0));null!=t&&t.shadowRoot&&Io(null,t.shadowRoot),null==t||t.remove()}catch(t){Wa.warn("Failed to remove survey "+e.id+" from DOM:",t)}},t.getTestAPI=function(){return{addSurveyToFocus:this._addSurveyToFocus,removeSurveyFromFocus:this._removeSurveyFromFocus,surveyInFocus:this._surveyInFocus,surveyTimeouts:this._surveyTimeouts,handleWidget:this._handleWidget,handlePopoverSurvey:this.handlePopoverSurvey,manageWidgetSelectorListener:this._manageWidgetSelectorListener,sortSurveysByAppearanceDelay:this._sortSurveysByAppearanceDelay,checkFlags:this._checkFlags.bind(this),isSurveyFeatureFlagEnabled:this._isSurveyFeatureFlagEnabled.bind(this)}},e}();function Sd(e,t){if(hd&&pd){var n=new wd(e);return e.config.disable_surveys_automatic_display?(Wa.info("Surveys automatic display is disabled. Skipping call surveys and evaluate display logic."),n):!1===t?(Wa.info("There are no surveys to load or Surveys is disabled in the project settings."),n):(n.callSurveysAndEvaluateDisplayLogic(!0),setInterval((function(){n.callSurveysAndEvaluateDisplayLogic(!1)}),1e3),n)}}function kd(e){var t=e.survey,n=e.removeSurveyFromFocus,r=void 0===n?function(){}:n,i=e.setSurveyVisible,o=e.isPreviewMode,s=void 0!==o&&o;Vo((function(){var e;if(!s&&null!=(e=t.conditions)&&e.url){var n=function(){var e,n=t.type===rs.Widget,o=Lc(t),s=(null==(e=t.appearance)?void 0:e.widgetType)===ts.Tab&&n;if(!o)return Wa.info("Hiding survey "+t.id+" because URL does not match"),i(!1),r(t);s&&(Wa.info("Showing survey "+t.id+" because it is a feedback button tab and URL matches"),i(!0))};za(pd,"popstate",n),za(pd,"hashchange",n);var o=pd.history.pushState,a=pd.history.replaceState;return pd.history.pushState=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.apply(this,t),n()},pd.history.replaceState=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];a.apply(this,t),n()},function(){pd.removeEventListener("popstate",n),pd.removeEventListener("hashchange",n),pd.history.pushState=o,pd.history.replaceState=a}}}),[s,t,r,i])}function xd(e,t,n){if(void 0===t&&(t=ns.Right),e===rs.ExternalSurvey)return{};switch(t){case ns.TopLeft:return{top:"0",left:"0",transform:"translate(30px, 30px)"};case ns.TopRight:return{top:"0",right:"0",transform:"translate(-30px, 30px)"};case ns.TopCenter:return{top:"0",left:"50%",transform:"translate(-50%, 30px)"};case ns.MiddleLeft:return{top:"50%",left:"0",transform:"translate(30px, -50%)"};case ns.MiddleRight:return{top:"50%",right:"0",transform:"translate(-30px, -50%)"};case ns.MiddleCenter:return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};case ns.Left:return{left:"30px"};case ns.Center:return{left:"50%",transform:"translateX(-50%)"};default:case ns.Right:return{right:e===rs.Widget&&n===ts.Tab?"60px":"30px"}}}function Ed(e){var t,n,r,i,o,s,a=e.survey,u=e.forceDisableHtml,l=e.posthog,c=e.style,d=void 0===c?{}:c,f=e.previewPageIndex,p=e.removeSurveyFromFocus,h=void 0===p?function(){}:p,_=e.isPopup,v=void 0===_||_,g=e.onPreviewSubmit,m=void 0===g?function(){}:g,y=e.onPopupSurveyDismissed,b=void 0===y?function(){}:y,w=e.onCloseConfirmationMessage,S=void 0===w?function(){}:w,k=zo(null),x=Number.isInteger(f),E=null!=(t=a.appearance)&&t.surveyPopupDelaySeconds?1e3*a.appearance.surveyPopupDelaySeconds:0,C=function(e,t,n,r,i,o){var s=Uo(r||0===n||e.type===rs.ExternalSurvey),a=s[0],u=s[1],l=Uo(!1),c=l[0],d=l[1],f=function(){var t=function(){e.type===rs.Popover&&i(e),u(!1)};hd.startViewTransition?hd.startViewTransition((function(){var e;null==o||null==(e=o.current)||e.remove()})).finished.then((function(){setTimeout((function(){t()}),100)})):t()},p=function(t){t.detail.surveyId===e.id&&f()};return Vo((function(){if(t){if(!r){var i=function(t){var n,r;if(t.detail.surveyId===e.id){if(null==(n=e.appearance)||!n.displayThankYouMessage)return f();d(!0),null!=(r=e.appearance)&&r.autoDisappear&&setTimeout((function(){f()}),5e3)}},o=function(){var n;Lc(e)&&(u(!0),pd.dispatchEvent(new Event("PHSurveyShown")),t.capture(as.SHOWN,((n={})[us.SURVEY_NAME]=e.name,n[us.SURVEY_ID]=e.id,n[us.SURVEY_ITERATION]=e.current_iteration,n[us.SURVEY_ITERATION_START_DATE]=e.current_iteration_start_date,n.sessionRecordingUrl=null==t.get_session_replay_url?void 0:t.get_session_replay_url(),n)),localStorage.setItem("lastSeenSurveyDate",(new Date).toISOString()))};if(za(pd,"PHSurveyClosed",p),za(pd,"PHSurveySent",i),n>0){var s=setTimeout(o,n);return function(){clearTimeout(s),pd.removeEventListener("PHSurveyClosed",p),pd.removeEventListener("PHSurveySent",i)}}return o(),function(){pd.removeEventListener("PHSurveyClosed",p),pd.removeEventListener("PHSurveySent",i)}}}else Wa.error("usePopupVisibility hook called without a PostHog instance.")}),[]),kd({survey:e,removeSurveyFromFocus:i,setSurveyVisible:u,isPreviewMode:r}),{isPopupVisible:a,isSurveySent:c,setIsPopupVisible:u,hidePopupWithViewTransition:f}}(a,l,E,x,h,k),T=C.isPopupVisible,I=C.isSurveySent,P=C.hidePopupWithViewTransition,R=I||f===a.questions.length,F=Wo((function(){var e=Dc(a);return{isPreviewMode:x,previewPageIndex:f,onPopupSurveyDismissed:function(){xc(a,l,x),b()},isPopup:v||!1,surveySubmissionId:(null==e?void 0:e.surveySubmissionId)||cu(),onPreviewSubmit:m,posthog:l}}),[x,f,v,l,a,b,m]);return T?Bc(Pc.Provider,{value:F,children:Bc("div",{className:"ph-survey",style:ji({},xd(a.type,null==(n=a.appearance)?void 0:n.position,null==(r=a.appearance)?void 0:r.widgetType),d),ref:k,children:R?Bc(ed,{header:(null==(i=a.appearance)?void 0:i.thankYouMessageHeader)||"Thank you!",description:(null==(o=a.appearance)?void 0:o.thankYouMessageDescription)||"",forceDisableHtml:!!u,contentType:null==(s=a.appearance)?void 0:s.thankYouMessageDescriptionContentType,appearance:a.appearance||gc,onClose:function(){P(),S()}}):Bc(Cd,{survey:a,forceDisableHtml:!!u,posthog:l})})}):null}function Cd(e){var t=e.survey,n=e.forceDisableHtml,r=e.posthog,i=Uo((function(){var e=Dc(t);return null!=e&&e.responses&&Wa.info("Survey is already in progress, filling in initial responses"),(null==e?void 0:e.responses)||{}})),o=i[0],s=i[1],a=Go(Pc),u=a.previewPageIndex,l=a.onPopupSurveyDismissed,c=a.isPopup,d=a.onPreviewSubmit,f=a.surveySubmissionId,p=a.isPreviewMode,h=Uo((function(){var e=Dc(t);return u||(null==e?void 0:e.lastQuestionIndex)||0})),_=h[0],v=h[1],g=Wo((function(){return Tc(t)}),[t]);Vo((function(){p&&!Ds(u)&&v(u)}),[u,p]);var m=g.at(_);return m?Bc("form",{className:"survey-form",name:"surveyForm",children:[c&&Bc(Jc,{onClick:function(){l()}}),Bc("div",{className:"survey-box",children:Id({question:m,forceDisableHtml:n,displayQuestionIndex:_,appearance:t.appearance||gc,onSubmit:function(e){return function(e){var n,i=e.res,a=e.displayQuestionIndex,u=e.questionId;if(r)if(u){var l=_c(u),c=ji({},o,((n={})[l]=i,n));s(c);var d=gd(t,a,i),p=d===os.End;p||(v(d),Ac(t,{surveySubmissionId:f,responses:c,lastQuestionIndex:d})),(t.enable_partial_responses||p)&&kc({responses:c,survey:t,surveySubmissionId:f,isSurveyCompleted:p,posthog:r})}else Wa.error("onNextButtonClick called without a questionId.");else Wa.error("onNextButtonClick called without a PostHog instance.")}({res:e,displayQuestionIndex:_,questionId:m.id})},onPreviewSubmit:d,initialValue:m.id?o[_c(m.id)]:void 0})})]}):null}function Td(e){var t,n,r,i,o,s=e.survey,a=e.forceDisableHtml,u=e.posthog,l=e.readOnly,c=Uo(!0),d=c[0],f=c[1],p=Uo(!1),h=p[0],_=p[1],v=Uo({}),g=v[0],m=v[1],y=function(){_(!h)};if(Vo((function(){var e;if(u){if(!l){"tab"===(null==(e=s.appearance)?void 0:e.widgetType)&&m({top:"50%",bottom:"auto"});var t=function(e){var t,n=e;(null==(t=n.detail)?void 0:t.surveyId)===s.id&&(Wa.info("Received show event for feedback button survey "+s.id),m(n.detail.position||{}),y())};return za(pd,_d,t),function(){pd.removeEventListener(_d,t)}}}else Wa.error("FeedbackWidget called without a PostHog instance.")}),[u,l,s.id,null==(t=s.appearance)?void 0:t.widgetType,null==(n=s.appearance)?void 0:n.widgetSelector,null==(r=s.appearance)?void 0:r.borderColor]),kd({survey:s,setSurveyVisible:f}),!d)return null;var b=function(){s.schedule!==ss.Always&&f(!1),setTimeout((function(){_(!1)}),200)};return Bc(uo,{children:["tab"===(null==(i=s.appearance)?void 0:i.widgetType)&&Bc("button",{className:"ph-survey-widget-tab",onClick:y,disabled:l,children:(null==(o=s.appearance)?void 0:o.widgetLabel)||""}),h&&Bc(Ed,{posthog:u,survey:s,forceDisableHtml:a,style:g,onPopupSurveyDismissed:b,onCloseConfirmationMessage:b})]})}var Id=function(e){var t=e.question,n=e.forceDisableHtml,r=e.displayQuestionIndex,i=e.appearance,o=e.onSubmit,s=e.onPreviewSubmit,a={forceDisableHtml:n,appearance:i,onPreviewSubmit:function(e){s(e)},onSubmit:function(e){o(e)},initialValue:e.initialValue,displayQuestionIndex:r};switch(t.type){case is.Open:return so(nd,ji({},a,{question:t,key:t.id}));case is.Link:return so(rd,ji({},a,{question:t,key:t.id}));case is.Rating:return so(id,ji({},a,{question:t,key:t.id}));case is.SingleChoice:case is.MultipleChoice:return so(sd,ji({},a,{question:t,key:t.id}));default:return Wa.error("Unsupported question type: "+t.type),null}};Ss.__PosthogExtensions__=Ss.__PosthogExtensions__||{},Ss.__PosthogExtensions__.generateSurveys=Sd,Ss.extendPostHogWithSurveys=Sd;var Pd="$people_distinct_id",Rd="__alias",Fd="__timers",Md="$autocapture_disabled_server_side",Ld="$heatmaps_enabled_server_side",Od="$exception_capture_enabled_server_side",Ad="$error_tracking_suppression_rules",Dd="$error_tracking_capture_extension_exceptions",qd="$web_vitals_enabled_server_side",$d="$dead_clicks_enabled_server_side",Nd="$web_vitals_allowed_metrics",Hd="$session_recording_remote_config",Bd="$session_recording_enabled_server_side",jd="$console_log_recording_enabled_server_side",Ud="$session_recording_network_payload_capture",Vd="$session_recording_masking",zd="$session_recording_canvas_recording",Wd="$replay_sample_rate",Gd="$replay_minimum_duration",Zd="$replay_script_config",Yd="$sesid",Qd="$session_is_sampled",Xd="$session_recording_url_trigger_activated_session",Jd="$session_recording_event_trigger_activated_session",Kd="$enabled_feature_flags",ef="$early_access_features",tf="$feature_flag_details",nf="$stored_person_properties",rf="$stored_group_properties",of="$surveys",sf="$surveys_activated",af="$flag_call_reported",uf="$user_state",lf="$client_session_props",cf="$capture_rate_limit",df="$initial_campaign_params",ff="$initial_referrer_info",pf="$initial_person_info",hf="$epp",_f="__POSTHOG_TOOLBAR__",vf="$posthog_cookieless",gf=[Pd,Rd,"__cmpns",Fd,Bd,Ld,Yd,Kd,Ad,uf,ef,tf,rf,nf,of,af,lf,cf,df,ff,hf,pf],mf=Fa("[Error tracking]");function yf(){return new ga([new ma,new Ia,new ba,new ya,new Ca,new Ea,new Sa,new Ta],[ca,pa])}var bf=function(){function e(e){var t,n;this._suppressionRules=[],this._errorPropertiesBuilder=yf(),this._instance=e,this._suppressionRules=null!==(t=null==(n=this._instance.persistence)?void 0:n.get_property(Ad))&&void 0!==t?t:[]}var t=e.prototype;return t.onRemoteConfig=function(e){var t,n,r,i,o=null!==(t=null==(n=e.errorTracking)?void 0:n.suppressionRules)&&void 0!==t?t:[],s=null==(r=e.errorTracking)?void 0:r.captureExtensionExceptions;(this._suppressionRules=o,this._instance.persistence)&&this._instance.persistence.register(((i={})[Ad]=this._suppressionRules,i[Dd]=s,i))},t.buildProperties=function(e,t){return this._errorPropertiesBuilder.buildFromUnknown(e,{syntheticException:null==t?void 0:t.syntheticException,mechanism:{handled:null==t?void 0:t.handled}})},t.sendExceptionEvent=function(e){if(this._matchesSuppressionRule(e))mf.info("Skipping exception capture because a suppression rule matched");else{if(this._captureExtensionExceptions||!this._isExtensionException(e))return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"});mf.info("Skipping exception capture because it was thrown by an extension")}},t._matchesSuppressionRule=function(e){var t=e.$exception_list;if(!t||!Ms(t)||0===t.length)return!1;var n=t.reduce((function(e,t){var n=t.type,r=t.value;return qs(n)&&n.length>0&&e.$exception_types.push(n),qs(r)&&r.length>0&&e.$exception_values.push(r),e}),{$exception_types:[],$exception_values:[]});return this._suppressionRules.some((function(e){var t=e.values.map((function(e){var t,r=cc[e.operator],i=Ms(e.value)?e.value:[e.value],o=null!==(t=n[e.key])&&void 0!==t?t:[];return i.length>0&&r(i,o)}));return"OR"===e.type?t.some(Boolean):t.every(Boolean)}))},t._isExtensionException=function(e){var t=e.$exception_list;if(!t||!Ms(t))return!1;var n=t.flatMap((function(e){var t,n;return null!==(t=null==(n=e.stacktrace)?void 0:n.frames)&&void 0!==t?t:[]}));return n.some((function(e){return e.filename&&e.filename.startsWith("chrome-extension://")}))},Hi(e,[{key:"_captureExtensionExceptions",get:function(){var e,t=!!this._instance.get_property(Dd),n=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(e=null!=n?n:t)&&void 0!==e&&e}}])}(),wf=Fa("[ExceptionAutocapture]"),Sf=yf();function kf(e){var t=e.event,n=e.error;return Sf.buildFromUnknown(n||t,{mechanism:{handled:!1}})}var xf={wrapOnError:function(e){var t=cs;t||wf.info("window not available, cannot wrap onerror");var n=t.onerror;return t.onerror=function(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=kf({event:i[0],error:i[4]});return e(s),null!==(t=null==n?void 0:n.apply(void 0,i))&&void 0!==t&&t},t.onerror.__POSTHOG_INSTRUMENTED__=!0,function(){var e;null==(e=t.onerror)||delete e.__POSTHOG_INSTRUMENTED__,t.onerror=n}},wrapUnhandledRejection:function(e){var t=cs;t||wf.info("window not available, cannot wrap onUnhandledRejection");var n=t.onunhandledrejection;return t.onunhandledrejection=function(r){var i,o=kf({event:r});return e(o),null!==(i=null==n?void 0:n.apply(t,[r]))&&void 0!==i&&i},t.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,function(){var e;null==(e=t.onunhandledrejection)||delete e.__POSTHOG_INSTRUMENTED__,t.onunhandledrejection=n}},wrapConsoleError:function(e){var t=console;t||wf.info("console not available, cannot wrap console.error");var n=t.error;return t.error=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.join(" "),s=kf({error:r.find((function(e){return e instanceof Error})),event:o});return e(s),null==n?void 0:n.apply(void 0,r)},t.error.__POSTHOG_INSTRUMENTED__=!0,function(){var e;null==(e=t.error)||delete e.__POSTHOG_INSTRUMENTED__,t.error=n}}};function Ef(e,t,n){try{if(!(t in e))return function(){};var r=e[t],i=n(r);return Ls(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,function(){e[t]=r}}catch(e){return function(){}}}Ss.__PosthogExtensions__=Ss.__PosthogExtensions__||{},Ss.__PosthogExtensions__.errorWrappingFunctions=xf,Ss.posthogErrorWrappingFunctions=xf;var Cf=function(e,t,n,r){var i;try{i=new URL(r.url).hostname}catch(e){return}if(!Ms(e)||e.includes(i)){if(n){var o=n.checkAndGetSessionAndWindowId(!0),s=o.sessionId,a=o.windowId;r.headers.set("X-POSTHOG-SESSION-ID",s),r.headers.set("X-POSTHOG-WINDOW-ID",a)}t!==vf&&r.headers.set("X-POSTHOG-DISTINCT-ID",t)}};Ss.__PosthogExtensions__=Ss.__PosthogExtensions__||{};var Tf={_patchFetch:function(e,t,n){return Ef(cs,"fetch",(function(r){return function(){var i=Ni(Vi().mark((function i(o,s){var a;return Vi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new Request(o,s),Cf(e,t,n,a),i.abrupt("return",r(a));case 3:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()}))},_patchXHR:function(e,t,n){return Ef(cs.XMLHttpRequest.prototype,"open",(function(r){return function(i,o,s,a,u){void 0===s&&(s=!0);var l=new Request(o);return Cf(e,t,n,l),r.call(this,i,l.url,s,a,u)}}))}};function If(e){return e instanceof Element&&(e.id===_f||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function Pf(e){return!!e&&1===e.nodeType}function Rf(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function Ff(e){return!!e&&3===e.nodeType}function Mf(e){return!!e&&11===e.nodeType}function Lf(e){return e?Cs(e).split(/\s+/):[]}function Of(e){var t=null==cs?void 0:cs.location.href;return!!(t&&e&&e.some((function(e){return t.match(e)})))}function Af(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Lf(t)}function Df(e){return Hs(e)?null:Cs(e).split(/(\s+)/).filter((function(e){return ep(e)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function qf(e){var t="";return Wf(e)&&!Gf(e)&&e.childNodes&&e.childNodes.length&&Oa(e.childNodes,(function(e){var n;Ff(e)&&e.textContent&&(t+=null!==(n=Df(e.textContent))&&void 0!==n?n:"")})),Cs(t)}function $f(e){return Ds(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}Ss.__PosthogExtensions__.tracingHeadersPatchFns=Tf,Ss.postHogTracingHeadersPatchFns=Tf;var Nf=["a","button","form","input","select","textarea","label"];function Hf(e,t){if(Ds(t))return!0;for(var n,r,i=function(){var e=r.value;if(t.some((function(t){return e.matches(t)})))return{v:!0}},o=Bi(e);!(r=o()).done;)if(n=i())return n.v;return!1}function Bf(e){var t=e.parentNode;return!(!t||!Pf(t))&&t}var jf=[".ph-no-rageclick",".ph-no-capture"];var Uf=function(e){return!e||Rf(e,"html")||!Pf(e)},Vf=function(e,t){if(!cs||Uf(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var n=!1,r=[e],i=e;i.parentNode&&!Rf(i,"body");)if(Mf(i.parentNode))r.push(i.parentNode.host),i=i.parentNode.host;else{var o=Bf(i);if(!o)break;if(t||Nf.indexOf(o.tagName.toLowerCase())>-1)n=!0;else{var s=cs.getComputedStyle(o);s&&"pointer"===s.getPropertyValue("cursor")&&(n=!0)}r.push(o),i=o}return{parentIsUsefulElement:n,targetElementList:r}};function zf(e,t,n,r,i){var o,s,a,u;if(void 0===n&&(n=void 0),!cs||Uf(e))return!1;if(null!=(o=n)&&o.url_allowlist&&!Of(n.url_allowlist))return!1;if(null!=(s=n)&&s.url_ignorelist&&Of(n.url_ignorelist))return!1;if(null!=(a=n)&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some((function(e){return t.type===e})))return!1}var c=Vf(e,r),d=c.parentIsUsefulElement,f=c.targetElementList;if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(Ds(n))return!0;for(var r,i,o=function(){var e=i.value;if(n.some((function(t){return e.tagName.toLowerCase()===t})))return{v:!0}},s=Bi(e);!(i=s()).done;)if(r=o())return r.v;return!1}(f,n))return!1;if(!Hf(f,null==(u=n)?void 0:u.css_selector_allowlist))return!1;var p=cs.getComputedStyle(e);if(p&&"pointer"===p.getPropertyValue("cursor")&&"click"===t.type)return!0;var h=e.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return d?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Nf.indexOf(h)>-1||"true"===e.getAttribute("contenteditable"))}}function Wf(e){for(var t=e;t.parentNode&&!Rf(t,"body");t=t.parentNode){var n=Af(t);if(Es(n,"ph-sensitive")||Es(n,"ph-no-capture"))return!1}if(Es(Af(e),"ph-include"))return!0;var r=e.type||"";if(qs(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";if(qs(i)){if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function Gf(e){return!!(Rf(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Rf(e,"select")||Rf(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Zf="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Yf=new RegExp("^(?:"+Zf+")$"),Qf=new RegExp(Zf),Xf="\\d{3}-?\\d{2}-?\\d{4}",Jf=new RegExp("^("+Xf+")$"),Kf=new RegExp("("+Xf+")");function ep(e,t){if(void 0===t&&(t=!0),Hs(e))return!1;if(qs(e)){if(e=Cs(e),(t?Yf:Qf).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Jf:Kf).test(e))return!1}return!0}function tp(e){var t=qf(e);return ep(t=(t+" "+np(e)).trim())?t:""}function np(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Oa(e.childNodes,(function(e){var n;if(e&&"span"===(null==(n=e.tagName)?void 0:n.toLowerCase()))try{var r=qf(e);t=(t+" "+r).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+np(e)).trim())}catch(e){Ra.error("[AutoCapture]",e)}})),t}function rp(e){return function(e){var t=e.map((function(e){var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class){e.attr_class.sort();for(var i,o=Bi(e.attr_class);!(i=o()).done;){r+="."+i.value.replace(/"/g,"")}}var s=ji({},e.text?{text:e.text}:{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),a={};return qa(s).sort((function(e,t){var n=e[0],r=t[0];return n.localeCompare(r)})).forEach((function(e){var t=e[0],n=e[1];return a[ip(t.toString())]=ip(n.toString())})),r+=":",r+=qa(a).map((function(e){return e[0]+'="'+e[1]+'"'})).join("")}));return t.join(";")}(function(e){return e.map((function(e){var t,n,r={text:null==(t=e.$el_text)?void 0:t.slice(0,400),tag_name:e.tag_name,href:null==(n=e.attr__href)?void 0:n.slice(0,2048),attr_class:op(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return qa(e).filter((function(e){return 0===e[0].indexOf("attr__")})).forEach((function(e){var t=e[0],n=e[1];return r.attributes[t]=n})),r}))}(e))}function ip(e){return e.replace(/"|\\"/g,'\\"')}function op(e){var t=e.attr__class;return t?Ms(t)?t:Lf(t):void 0}var sp=function(){function e(){this.clicks=[]}return e.prototype.isRageClick=function(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1},e}(),ap=Fa("[AutoCapture]");function up(e,t){return t.length>e?t.slice(0,e)+"...":t}function lp(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!Pf(t));return t}function cp(e,t,n,r){var i=e.tagName.toLowerCase(),o={tag_name:i};Nf.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?o.$el_text=up(1024,tp(e)):o.$el_text=up(1024,qf(e)));var s=Af(e);s.length>0&&(o.classes=s.filter((function(e){return""!==e}))),Oa(e.attributes,(function(n){var i;if((!Gf(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&((null==r||!r.includes(n.name))&&!t&&ep(n.value)&&(i=n.name,!qs(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7)))){var s=n.value;"class"===n.name&&(s=Lf(s).join(" ")),o["attr__"+n.name]=up(1024,s)}}));for(var a=1,u=1,l=e;l=lp(l);)a++,l.tagName===e.tagName&&u++;return o.nth_child=a,o.nth_of_type=u,o}function dp(e,t){for(var n,r,i=t.e,o=t.maskAllElementAttributes,s=t.maskAllText,a=t.elementAttributeIgnoreList,u=t.elementsChainAsString,l=[e],c=e;c.parentNode&&!Rf(c,"body");)Mf(c.parentNode)?(l.push(c.parentNode.host),c=c.parentNode.host):(l.push(c.parentNode),c=c.parentNode);var d,f=[],p={},h=!1,_=!1;if(Oa(l,(function(e){var t=Wf(e);"a"===e.tagName.toLowerCase()&&(h=e.getAttribute("href"),h=t&&h&&ep(h)&&h),Es(Af(e),"ph-no-capture")&&(_=!0),f.push(cp(e,o,s,a));var n=function(e){if(!Wf(e))return{};var t={};return Oa(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&ep(r)&&(t[n]=r)}})),t}(e);Aa(p,n)})),_)return{props:{},explicitNoCapture:_};if(s||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=tp(e):f[0].$el_text=qf(e)),h){var v,g;f[0].attr__href=h;var m=null==(v=fl(h))?void 0:v.host,y=null==cs||null==(g=cs.location)?void 0:g.host;m&&y&&m!==y&&(d=h)}return{props:Aa({$event_type:i.type,$ce_version:1},u?{}:{$elements:f},{$elements_chain:rp(f)},null!=(n=f[0])&&n.$el_text?{$el_text:null==(r=f[0])?void 0:r.$el_text}:{},d&&"click"===i.type?{$external_click_url:d}:{},p)}}var fp=function(){function e(e){this._initialized=!1,this._isDisabledServerSide=null,this.rageclicks=new sp,this._elementsChainAsString=!1,this.instance=e,this._elementSelectors=null}var t=e.prototype;return t._addDomEventHandlers=function(){var e=this;if(this.isBrowserSupported()){if(cs&&vs){var t=function(t){t=t||(null==cs?void 0:cs.event);try{e._captureEvent(t)}catch(e){ap.error("Failed to capture event",e)}};if(za(vs,"submit",t,{capture:!0}),za(vs,"change",t,{capture:!0}),za(vs,"click",t,{capture:!0}),this._config.capture_copied_text){var n=function(t){t=t||(null==cs?void 0:cs.event),e._captureEvent(t,ll)};za(vs,"copy",n,{capture:!0}),za(vs,"cut",n,{capture:!0})}}}else ap.info("Disabling Automatic Event Collection because this browser is not supported")},t.startIfEnabled=function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)},t.onRemoteConfig=function(e){var t;(e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence)&&this.instance.persistence.register(((t={})[Md]=!!e.autocapture_opt_out,t));this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()},t.setElementSelectors=function(e){this._elementSelectors=e},t.getElementSelectors=function(e){var t,n=[];return null==(t=this._elementSelectors)||t.forEach((function(t){var r=null==vs?void 0:vs.querySelectorAll(t);null==r||r.forEach((function(r){e===r&&n.push(t)}))})),n},t._captureEvent=function(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var n,r,i,o,s,a=$f(e);if(Ff(a)&&(a=a.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent)this.instance.config.rageclick&&null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&(r=a,i=this.instance.config.rageclick,!cs||Uf(r)||!1===(o=js(i)?!!i&&jf:null!==(s=null==i?void 0:i.css_selector_ignorelist)&&void 0!==s?s:jf)||Hf(Vf(r,!1).targetElementList,o)||this._captureEvent(e,"$rageclick"));var u=t===ll;if(a&&zf(a,e,this._config,u,u?["copy","cut"]:void 0)){var l=dp(a,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this._config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString}),c=l.props;if(l.explicitNoCapture)return!1;var d=this.getElementSelectors(a);if(d&&d.length>0&&(c.$element_selectors=d),t===ll){var f,p=Df(null==cs||null==(f=cs.getSelection())?void 0:f.toString()),h=e.type||"clipboard";if(!p)return!1;c.$selected_content=p,c.$copy_type=h}return this.instance.capture(t,c),!0}}},t.isBrowserSupported=function(){return Ls(null==vs?void 0:vs.querySelectorAll)},Hi(e,[{key:"_config",get:function(){var e,t,n=Os(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null==(e=n.url_allowlist)?void 0:e.map((function(e){return new RegExp(e)})),n.url_ignorelist=null==(t=n.url_ignorelist)?void 0:t.map((function(e){return new RegExp(e)})),n}},{key:"isEnabled",get:function(){var e,t,n=null==(e=this.instance.persistence)?void 0:e.props[Md],r=this._isDisabledServerSide;if(Ns(r)&&!js(n)&&!this.instance._shouldDisableFlags())return!1;var i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}}])}(),pp="";var hp=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function _p(e,t){if(t){var n=function(e,t){if(void 0===t&&(t=vs),pp)return pp;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+cu();!pp&&r--;){var o=n.slice(r).join("."),s=i+"=1;domain=."+o+";path=/";t.cookie=s+";max-age=3",t.cookie.includes(i)&&(t.cookie=s+";max-age=0",pp=o)}return pp}(e);if(!n){var r=function(e){var t=e.match(hp);return t?t[0]:""}(e);r!==n&&Ra.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var vp={_is_supported:function(){return!!vs},_error:function(e){Ra.error("cookieStore error: "+e)},_get:function(e){if(vs){try{for(var t=e+"=",n=vs.cookie.split(";").filter((function(e){return e.length})),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null}},_parse:function(e){var t;try{t=JSON.parse(vp._get(e))||{}}catch(e){}return t},_set:function(e,t,n,r,i){if(vs)try{var o="",s="",a=_p(vs.location.hostname,r);if(n){var u=new Date;u.setTime(u.getTime()+24*n*60*60*1e3),o="; expires="+u.toUTCString()}i&&(s="; secure");var l=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return l.length>3686.4&&Ra.warn("cookieStore warning: large cookie, len="+l.length),vs.cookie=l,l}catch(e){return}},_remove:function(e,t){if(null!=vs&&vs.cookie)try{vp._set(e,"",-1,t)}catch(e){return}}},gp=null,mp={_is_supported:function(){if(!Ns(gp))return gp;var e=!0;if(Ds(cs))e=!1;else try{var t="__mplssupport__";mp._set(t,"xyz"),'"xyz"'!==mp._get(t)&&(e=!1),mp._remove(t)}catch(t){e=!1}return e||Ra.error("localStorage unsupported; falling back to cookie store"),gp=e,e},_error:function(e){Ra.error("localStorage error: "+e)},_get:function(e){try{return null==cs?void 0:cs.localStorage.getItem(e)}catch(e){mp._error(e)}return null},_parse:function(e){try{return JSON.parse(mp._get(e))||{}}catch(e){}return null},_set:function(e,t){try{null==cs||cs.localStorage.setItem(e,JSON.stringify(t))}catch(e){mp._error(e)}},_remove:function(e){try{null==cs||cs.localStorage.removeItem(e)}catch(e){mp._error(e)}}},yp=["distinct_id",Yd,Qd,hf,pf],bp=ji({},mp,{_parse:function(e){try{var t={};try{t=vp._parse(e)||{}}catch(e){}var n=Aa(t,JSON.parse(mp._get(e)||"{}"));return mp._set(e,n),n}catch(e){}return null},_set:function(e,t,n,r,i,o){try{mp._set(e,t,void 0,void 0,o);var s={};yp.forEach((function(e){t[e]&&(s[e]=t[e])})),Object.keys(s).length&&vp._set(e,s,n,r,i,o)}catch(e){mp._error(e)}},_remove:function(e,t){try{null==cs||cs.localStorage.removeItem(e),vp._remove(e,t)}catch(e){mp._error(e)}}}),wp={},Sp={_is_supported:function(){return!0},_error:function(e){Ra.error("memoryStorage error: "+e)},_get:function(e){return wp[e]||null},_parse:function(e){return wp[e]||null},_set:function(e,t){wp[e]=t},_remove:function(e){delete wp[e]}},kp=null,xp={_is_supported:function(){if(!Ns(kp))return kp;if(kp=!0,Ds(cs))kp=!1;else try{var e="__support__";xp._set(e,"xyz"),'"xyz"'!==xp._get(e)&&(kp=!1),xp._remove(e)}catch(e){kp=!1}return kp},_error:function(e){Ra.error("sessionStorage error: ",e)},_get:function(e){try{return null==cs?void 0:cs.sessionStorage.getItem(e)}catch(e){xp._error(e)}return null},_parse:function(e){try{return JSON.parse(xp._get(e))||null}catch(e){}return null},_set:function(e,t){try{null==cs||cs.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){xp._error(e)}},_remove:function(e){try{null==cs||cs.sessionStorage.removeItem(e)}catch(e){xp._error(e)}}},Ep=function(e){return e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED",e}({}),Cp=function(){function e(e){this._instance=e}var t=e.prototype;return t.isOptedOut=function(){return"always"===this._config.cookieless_mode||(this.consent===Ep.DENIED||this.consent===Ep.PENDING&&(this._config.opt_out_capturing_by_default||"on_reject"===this._config.cookieless_mode))},t.isOptedIn=function(){return!this.isOptedOut()},t.isExplicitlyOptedOut=function(){return this.consent===Ep.DENIED},t.optInOut=function(e){this._storage._set(this._storageKey,e?1:0,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie)},t.reset=function(){this._storage._remove(this._storageKey,this._config.cross_subdomain_cookie)},t._getDnt=function(){return!!this._config.respect_dnt&&!!Va([null==_s?void 0:_s.doNotTrack,null==_s?void 0:_s.msDoNotTrack,Ss.doNotTrack],(function(e){return Ys(e)}))},Hi(e,[{key:"_config",get:function(){return this._instance.config}},{key:"consent",get:function(){return this._getDnt()?Ep.DENIED:this._storedConsent}},{key:"_storageKey",get:function(){var e=this._instance.config,t=e.token,n=e.opt_out_capturing_cookie_prefix,r=e.consent_persistence_name;return r||(n?n+t:"__ph_opt_in_out_"+t)}},{key:"_storedConsent",get:function(){var e=this._storage._get(this._storageKey);return Ys(e)?Ep.GRANTED:Es(Qs,e)?Ep.DENIED:Ep.PENDING}},{key:"_storage",get:function(){if(!this._persistentStore){var e=this._config.opt_out_capturing_persistence_type;this._persistentStore="localStorage"===e?mp:vp;var t="localStorage"===e?vp:mp;t._get(this._storageKey)&&(this._persistentStore._get(this._storageKey)||this.optInOut(Ys(t._get(this._storageKey))),t._remove(this._storageKey,this._config.cross_subdomain_cookie))}return this._persistentStore}}])}(),Tp=Fa("[Dead Clicks]"),Ip=function(){return!0},Pp=function(e){var t,n=!(null==(t=e.instance.persistence)||!t.get_property($d)),r=e.instance.config.capture_dead_clicks;return js(r)?r:n},Rp=function(){function e(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}var t=e.prototype;return t.onRemoteConfig=function(e){var t;this.instance.persistence&&this.instance.persistence.register(((t={})[$d]=null==e?void 0:e.captureDeadClicks,t));this.startIfEnabled()},t.startIfEnabled=function(){var e=this;this.isEnabled(this)&&this._loadScript((function(){e._start()}))},t._loadScript=function(e){var t,n;null!=(t=Ss.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this.instance,"dead-clicks-autocapture",(function(t){t?Tp.error("failed to load script",t):e()}))},t._start=function(){var e;if(vs){if(!this._lazyLoadedDeadClicksAutocapture&&null!=(e=Ss.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=Os(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Ss.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this._lazyLoadedDeadClicksAutocapture.start(vs),Tp.info("starting...")}}else Tp.error("`document` not found. Cannot start.")},t.stop=function(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,Tp.info("stopping..."))},Hi(e,[{key:"lazyLoadedDeadClicksAutocapture",get:function(){return this._lazyLoadedDeadClicksAutocapture}}])}(),Fp=Fa("[ExceptionAutocapture]"),Mp=function(){function e(e){var t,n,r,i=this;this._startCapturing=function(){var e;if(cs&&i.isEnabled&&null!=(e=Ss.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=Ss.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,n=Ss.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,r=Ss.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!i._unwrapOnError&&i._config.capture_unhandled_errors&&(i._unwrapOnError=t(i.captureException.bind(i))),!i._unwrapUnhandledRejection&&i._config.capture_unhandled_rejections&&(i._unwrapUnhandledRejection=n(i.captureException.bind(i))),!i._unwrapConsoleError&&i._config.capture_console_errors&&(i._unwrapConsoleError=r(i.captureException.bind(i)))}catch(e){Fp.error("failed to start",e),i._stopCapturing()}}},this._instance=e,this._remoteEnabled=!(null==(t=this._instance.persistence)||!t.props[Od]),this._config=this._requiredConfig(),this._rateLimiter=new ta({refillRate:null!==(n=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==n?n:1,bucketSize:null!==(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==r?r:10,refillInterval:1e4,_logger:Fp}),this.startIfEnabled()}var t=e.prototype;return t._requiredConfig=function(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Os(e)?t=ji({},t,e):(Ds(e)?this._remoteEnabled:e)&&(t=ji({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t},t.startIfEnabled=function(){this.isEnabled&&(Fp.info("enabled"),this._loadScript(this._startCapturing))},t._loadScript=function(e){var t,n;null!=(t=Ss.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"exception-autocapture",(function(t){if(t)return Fp.error("failed to load script",t);e()}))},t._stopCapturing=function(){var e,t,n;null==(e=this._unwrapOnError)||e.call(this),this._unwrapOnError=void 0,null==(t=this._unwrapUnhandledRejection)||t.call(this),this._unwrapUnhandledRejection=void 0,null==(n=this._unwrapConsoleError)||n.call(this),this._unwrapConsoleError=void 0},t.onRemoteConfig=function(e){var t,n=e.autocaptureExceptions;(this._remoteEnabled=!!n||!1,this._config=this._requiredConfig(),this._instance.persistence)&&this._instance.persistence.register(((t={})[Od]=this._remoteEnabled,t));this.startIfEnabled()},t.captureException=function(e){var t,n,r=null!==(t=null==e||null==(n=e.$exception_list)||null==(n=n[0])?void 0:n.type)&&void 0!==t?t:"Exception";this._rateLimiter.consumeRateLimit(r)?Fp.info("Skipping exception capture because of client rate limiting.",{exception:r}):this._instance.exceptions.sendExceptionEvent(e)},Hi(e,[{key:"isEnabled",get:function(){return this._config.capture_console_errors||this._config.capture_unhandled_errors||this._config.capture_unhandled_rejections}}])}(),Lp=function(){function e(e){var t;this._instance=e,this._lastPathname=(null==cs||null==(t=cs.location)?void 0:t.pathname)||""}var t=e.prototype;return t.startIfEnabled=function(){this.isEnabled&&(Ra.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())},t.stop=function(){this._popstateListener&&this._popstateListener(),this._popstateListener=void 0,Ra.info("History API monitoring stopped")},t.monitorHistoryChanges=function(){var e,t;if(cs&&cs.history){var n=this;null!=(e=cs.history.pushState)&&e.__posthog_wrapped__||Ef(cs.history,"pushState",(function(e){return function(t,r,i){e.call(this,t,r,i),n._capturePageview("pushState")}})),null!=(t=cs.history.replaceState)&&t.__posthog_wrapped__||Ef(cs.history,"replaceState",(function(e){return function(t,r,i){e.call(this,t,r,i),n._capturePageview("replaceState")}})),this._setupPopstateListener()}},t._capturePageview=function(e){try{var t,n=null==cs||null==(t=cs.location)?void 0:t.pathname;if(!n)return;n!==this._lastPathname&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this._lastPathname=n}catch(t){Ra.error("Error capturing "+e+" pageview",t)}},t._setupPopstateListener=function(){var e=this;if(!this._popstateListener){var t=function(){e._capturePageview("popstate")};za(cs,"popstate",t),this._popstateListener=function(){cs&&cs.removeEventListener("popstate",t)}}},Hi(e,[{key:"isEnabled",get:function(){return"history_change"===this._instance.config.capture_pageview}}])}();function Op(e){var t,n;return(null==(t=JSON.stringify(e,(n=[],function(e,t){if(Os(t)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(t)?"[Circular]":(n.push(t),t)}return t})))?void 0:t.length)||0}function Ap(e,t){if(void 0===t&&(t=6606028.8),e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Ap({size:Op(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Ap({size:Op(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap((function(e){return e}))}return[e]}var Dp=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(Dp||{}),qp=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(qp||{}),$p="[SessionRecording]",Np="redacted",Hp={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},Bp=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],jp=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Up=["/s/","/e/","/i/"];function Vp(e,t,n,r){if(Hs(e))return e;var i=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return qs(i)&&(i=parseInt(i)),i>n?$p+" "+r+" body too large to record ("+i+" bytes)":e}function zp(e,t){if(Hs(e))return e;var n=e;return ep(n,!1)||(n=$p+" "+t+" body "+Np),Oa(jp,(function(e){var r,i;null!=(r=n)&&r.length&&-1!==(null==(i=n)?void 0:i.indexOf(e))&&(n=$p+" "+t+" body "+Np+" as might contain: "+e)})),n}var Wp=function(e,t){var n,r,i,o={payloadSizeLimitBytes:Hp.payloadSizeLimitBytes,performanceEntryTypeToObserve:[].concat(Hp.performanceEntryTypeToObserve),payloadHostDenyList:[].concat(t.payloadHostDenyList||[],Hp.payloadHostDenyList)},s=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,u=!1!==e.capture_performance&&t.recordPerformance,l=(n=o,i=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),function(e){return null!=e&&e.requestBody&&(e.requestBody=Vp(e.requestBody,e.requestHeaders,i,"Request")),null!=e&&e.responseBody&&(e.responseBody=Vp(e.responseBody,e.responseHeaders,i,"Response")),e}),c=function(t){return l(function(e,t){var n,r=fl(e.name),i=0===t.indexOf("http")?null==(n=fl(t))?void 0:n.pathname:t;"/"===i&&(i="");var o=null==r?void 0:r.pathname.replace(i||"","");if(!(r&&o&&Up.some((function(e){return 0===o.indexOf(e)}))))return e}((r=(n=t).requestHeaders,Hs(r)||Oa(Object.keys(null!=r?r:{}),(function(e){Bp.includes(e.toLowerCase())&&(r[e]=Np)})),n),e.api_host));var n,r},d=Ls(e.session_recording.maskNetworkRequestFn);return d&&Ls(e.session_recording.maskCapturedNetworkRequestFn)&&Ra.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=function(t){var n=e.session_recording.maskNetworkRequestFn({url:t.name});return ji({},t,{name:null==n?void 0:n.url})}),o.maskRequestFn=Ls(e.session_recording.maskCapturedNetworkRequestFn)?function(t){var n,r=c(t);return r&&null!==(n=null==e.session_recording.maskCapturedNetworkRequestFn?void 0:e.session_recording.maskCapturedNetworkRequestFn(r))&&void 0!==n?n:void 0}:function(e){return function(e){if(!Ds(e))return e.requestBody=zp(e.requestBody,"Request"),e.responseBody=zp(e.responseBody,"Response"),e}(c(e))},ji({},Hp,o,{recordHeaders:s,recordBody:a,recordPerformance:u,recordInitialRequests:u})},Gp=function(e,t){var n,r,i=this;void 0===t&&(t={}),this._loggedTracker={},this._onNodeRateLimited=function(e){if(!i._loggedTracker[e]){i._loggedTracker[e]=!0;var t=i._getNode(e);null==i._options.onBlockedNode||i._options.onBlockedNode(e,t)}},this._getNodeOrRelevantParent=function(e){var t=i._getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[i._rrweb.mirror.getId(n),n]}return[e,t]},this._getNode=function(e){return i._rrweb.mirror.getNode(e)},this._numberOfChanges=function(e){var t,n,r,i,o,s,a,u;return(null!==(t=null==(n=e.removes)?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null==(i=e.attributes)?void 0:i.length)&&void 0!==r?r:0)+(null!==(o=null==(s=e.texts)?void 0:s.length)&&void 0!==o?o:0)+(null!==(a=null==(u=e.adds)?void 0:u.length)&&void 0!==a?a:0)},this.throttleMutations=function(e){if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=i._numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((function(e){var t=i._getNodeOrRelevantParent(e.id)[0];return!i._rateLimiter.consumeRateLimit(t)&&e})));var r=i._numberOfChanges(t);return 0!==r||n===r?e:void 0},this._rrweb=e,this._options=t,this._rateLimiter=new ta({bucketSize:null!==(n=this._options.bucketSize)&&void 0!==n?n:100,refillRate:null!==(r=this._options.refillRate)&&void 0!==r?r:10,refillInterval:1e3,_onBucketRateLimited:this._onNodeRateLimited,_logger:Ra})};function Zp(e,t){return function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}(e)%100<Xs(100*t,0,100,Ra)}var Yp="disabled",Qp="sampled",Xp="active",Jp="buffering",Kp="paused",eh="trigger",th=eh+"_activated",nh=eh+"_pending",rh=eh+"_"+Yp;function ih(e,t){return t.some((function(t){return"regex"===t.matching&&new RegExp(t.url).test(e)}))}var oh=function(){function e(e){this._matchers=e}var t=e.prototype;return t.triggerStatus=function(e){var t=this._matchers.map((function(t){return t.triggerStatus(e)}));return t.includes(th)?th:t.includes(nh)?nh:rh},t.stop=function(){this._matchers.forEach((function(e){return e.stop()}))},e}(),sh=function(){function e(e){this._matchers=e}var t=e.prototype;return t.triggerStatus=function(e){for(var t,n=new Set,r=Bi(this._matchers);!(t=r()).done;){var i=t.value;n.add(i.triggerStatus(e))}switch(n.delete(rh),n.size){case 0:return rh;case 1:return Array.from(n)[0];default:return nh}},t.stop=function(){this._matchers.forEach((function(e){return e.stop()}))},e}(),ah=function(){function e(){}var t=e.prototype;return t.triggerStatus=function(){return nh},t.stop=function(){},e}(),uh=function(e){return"sessionRecording"in e},lh=function(){function e(e){this._urlTriggers=[],this._urlBlocklist=[],this.urlBlocked=!1,this._instance=e}var t=e.prototype;return t.onConfig=function(e){var t,n;this._urlTriggers=(uh(e)?null==(t=e.sessionRecording)?void 0:t.urlTriggers:null==e?void 0:e.urlTriggers)||[],this._urlBlocklist=(uh(e)?null==(n=e.sessionRecording)?void 0:n.urlBlocklist:null==e?void 0:e.urlBlocklist)||[]},t.onRemoteConfig=function(e){this.onConfig(e)},t._urlTriggerStatus=function(e){var t;return 0===this._urlTriggers.length?rh:(null==(t=this._instance)?void 0:t.get_property(Xd))===e?th:nh},t.triggerStatus=function(e){var t=this._urlTriggerStatus(e),n=t===th?th:t===nh?nh:rh;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:n}),n},t.checkUrlTriggerConditions=function(e,t,n){if(void 0!==cs&&cs.location.href){var r=cs.location.href,i=this.urlBlocked,o=ih(r,this._urlBlocklist);i&&o||(o&&!i?e():!o&&i&&t(),ih(r,this._urlTriggers)&&n("url"))}},t.stop=function(){},e}(),ch=function(){function e(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this._flagListenerCleanup=function(){},this._instance=e}var t=e.prototype;return t.triggerStatus=function(){var e=nh;return Hs(this.linkedFlag)&&(e=rh),this.linkedFlagSeen&&(e=th),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e},t.onConfig=function(e,t){var n,r=this;if(this.linkedFlag=(uh(e)?null==(n=e.sessionRecording)?void 0:n.linkedFlag:null==e?void 0:e.linkedFlag)||null,!Hs(this.linkedFlag)&&!this.linkedFlagSeen){var i=qs(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,o=qs(this.linkedFlag)?null:this.linkedFlag.variant;this._flagListenerCleanup=this._instance.onFeatureFlags((function(e,n){var s=!1;if(Os(n)&&i in n){var a=n[i];s=js(a)?!0===a:o?a===o:!!a}r.linkedFlagSeen=s,s&&t(i,o)}))}},t.onRemoteConfig=function(e,t){this.onConfig(e,t)},t.stop=function(){this._flagListenerCleanup()},e}(),dh=function(){function e(e){this._eventTriggers=[],this._instance=e}var t=e.prototype;return t.onConfig=function(e){var t;this._eventTriggers=(uh(e)?null==(t=e.sessionRecording)?void 0:t.eventTriggers:null==e?void 0:e.eventTriggers)||[]},t.onRemoteConfig=function(e){this.onConfig(e)},t._eventTriggerStatus=function(e){var t;return 0===this._eventTriggers.length?rh:(null==(t=this._instance)?void 0:t.get_property(Jd))===e?th:nh},t.triggerStatus=function(e){var t=this._eventTriggerStatus(e),n=t===th?th:t===nh?nh:rh;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:n}),n},t.stop=function(){},e}();function fh(e){return e.isRecordingEnabled?Jp:Yp}function ph(e){if(!e.receivedFlags)return Jp;if(!e.isRecordingEnabled)return Yp;if(e.urlTriggerMatching.urlBlocked)return Kp;var t=!0===e.isSampled,n=new oh([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?Qp:n===th?Xp:n===nh?Jp:!1===e.isSampled?Yp:Xp}function hh(e){if(!e.receivedFlags)return Jp;if(!e.isRecordingEnabled)return Yp;if(e.urlTriggerMatching.urlBlocked)return Kp;var t=new sh([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),n=t!==rh,r=js(e.isSampled);return n&&t===nh?Jp:n&&t===rh||r&&!e.isSampled?Yp:!0===e.isSampled?Qp:Xp}var _h="[SessionRecording]",vh=Fa(_h);function gh(){var e;return null==Ss||null==(e=Ss.__PosthogExtensions__)||null==(e=e.rrweb)?void 0:e.record}var mh=3e5,yh=[qp.MouseMove,qp.MouseInteraction,qp.Scroll,qp.ViewportResize,qp.Input,qp.TouchMove,qp.MediaInteraction,qp.Drag],bh=function(e){return{rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}};function wh(e){return function(e,t){for(var n="",r=0;r<e.length;){var i=e[r++];n+=String.fromCharCode(i)}return n}(Kl(ec(JSON.stringify(e))))}function Sh(e){return e.type===Dp.Custom&&"sessionIdle"===e.data.tag}var kh=function(){function e(e){var t=this;if(this._statusMatcher=fh,this._receivedFlags=!1,this._queuedRRWebEvents=[],this._isIdle="unknown",this._lastActivityTimestamp=Date.now(),this._triggerMatching=new ah,this._removePageViewCaptureHook=void 0,this._onSessionIdListener=void 0,this._persistFlagsOnSessionListener=void 0,this._samplingSessionListener=void 0,this._removeEventTriggerCaptureHook=void 0,this._forceAllowLocalhostNetworkCapture=!1,this._onBeforeUnload=function(){t._flushBuffer()},this._onOffline=function(){t.tryAddCustomEvent("browser offline",{})},this._onOnline=function(){t.tryAddCustomEvent("browser online",{})},this._onVisibilityChange=function(){if(null!=vs&&vs.visibilityState){var e="window "+vs.visibilityState;t.tryAddCustomEvent(e,{})}},this._instance=e,this._captureStarted=!1,this._endpoint="/s/",this._stopRrweb=void 0,this._receivedFlags=!1,!this._instance.sessionManager)throw vh.error("started without valid sessionManager"),new Error(_h+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(_h+' cannot be used with cookieless_mode="always"');this._linkedFlagMatching=new ch(this._instance),this._urlTriggerMatching=new lh(this._instance),this._eventTriggerMatching=new dh(this._instance);var n=this._sessionManager.checkAndGetSessionAndWindowId(),r=n.sessionId,i=n.windowId;this._sessionId=r,this._windowId=i,this._buffer=this._clearBuffer(),this._sessionIdleThresholdMilliseconds>=this._sessionManager.sessionTimeoutMs&&vh.warn("session_idle_threshold_ms ("+this._sessionIdleThresholdMilliseconds+") is greater than the session timeout ("+this._sessionManager.sessionTimeoutMs+"). Session will never be detected as idle")}var t=e.prototype;return t.startIfEnabledOrStop=function(e){var t=this;this._isRecordingEnabled?(this._startCapture(e),za(cs,"beforeunload",this._onBeforeUnload),za(cs,"offline",this._onOffline),za(cs,"online",this._onOnline),za(cs,"visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Hs(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this._instance.on("eventCaptured",(function(e){try{if("$pageview"===e.event){var n=null!=e&&e.properties.$current_url?t._maskUrl(null==e?void 0:e.properties.$current_url):"";if(!n)return;t.tryAddCustomEvent("$pageview",{href:n})}}catch(e){vh.error("Could not add $pageview to rrweb session",e)}}))),this._onSessionIdListener||(this._onSessionIdListener=this._sessionManager.onSessionId((function(e,n,r){var i,o;r&&(t.tryAddCustomEvent("$session_id_change",{sessionId:e,windowId:n,changeReason:r}),null==(i=t._instance)||null==(i=i.persistence)||i.unregister(Jd),null==(o=t._instance)||null==(o=o.persistence)||o.unregister(Xd))})))):this.stopRecording()},t.stopRecording=function(){var e,t,n,r;this._captureStarted&&this._stopRrweb&&(this._stopRrweb(),this._stopRrweb=void 0,this._captureStarted=!1,null==cs||cs.removeEventListener("beforeunload",this._onBeforeUnload),null==cs||cs.removeEventListener("offline",this._onOffline),null==cs||cs.removeEventListener("online",this._onOnline),null==cs||cs.removeEventListener("visibilitychange",this._onVisibilityChange),this._clearBuffer(),clearInterval(this._fullSnapshotTimer),null==(e=this._removePageViewCaptureHook)||e.call(this),this._removePageViewCaptureHook=void 0,null==(t=this._removeEventTriggerCaptureHook)||t.call(this),this._removeEventTriggerCaptureHook=void 0,null==(n=this._onSessionIdListener)||n.call(this),this._onSessionIdListener=void 0,null==(r=this._samplingSessionListener)||r.call(this),this._samplingSessionListener=void 0,this._eventTriggerMatching.stop(),this._urlTriggerMatching.stop(),this._linkedFlagMatching.stop(),vh.info("stopped"))},t._resetSampling=function(){var e;null==(e=this._instance.persistence)||e.unregister(Qd)},t._makeSamplingDecision=function(e){var t,n,r=this._sessionId!==e,i=this._sampleRate;if(Bs(i)){var o=this._isSampled,s=r||!js(o),a=s?Zp(e,i):o;s&&(a?this._reportStarted(Qp):vh.warn("Sample rate ("+i+") has determined that this sessionId ("+e+") will not be sent to the server."),this.tryAddCustomEvent("samplingDecisionMade",{sampleRate:i,isSampled:a})),null==(t=this._instance.persistence)||t.register(((n={})[Qd]=a,n))}else this._resetSampling()},t.onRemoteConfig=function(e){var t,n,r,i,o=this;(this.tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),null!=(t=e.sessionRecording)&&t.endpoint)&&(this._endpoint=null==(i=e.sessionRecording)?void 0:i.endpoint);this._setupSampling(),"any"===(null==(n=e.sessionRecording)?void 0:n.triggerMatchType)?(this._statusMatcher=ph,this._triggerMatching=new oh([this._eventTriggerMatching,this._urlTriggerMatching])):(this._statusMatcher=hh,this._triggerMatching=new sh([this._eventTriggerMatching,this._urlTriggerMatching])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==(r=e.sessionRecording)?void 0:r.triggerMatchType}),this._urlTriggerMatching.onConfig(e),this._eventTriggerMatching.onConfig(e),this._linkedFlagMatching.onConfig(e,(function(e,t){o._reportStarted("linked_flag_matched",{flag:e,variant:t})})),this._receivedFlags=!0,this.startIfEnabledOrStop()},t._setupSampling=function(){var e=this;Bs(this._sampleRate)&&Hs(this._samplingSessionListener)&&(this._samplingSessionListener=this._sessionManager.onSessionId((function(t){e._makeSamplingDecision(t)})))},t._persistRemoteConfig=function(e){var t=this;if(this._instance.persistence){var n,r=this._instance.persistence,i=function(){var n,i,o,s,a,u,l,c,d,f,p=null==(n=e.sessionRecording)?void 0:n.sampleRate,h=Hs(p)?null:parseFloat(p);Hs(h)&&t._resetSampling();var _=null==(i=e.sessionRecording)?void 0:i.minimumDurationMilliseconds;r.register(((f={})[Bd]=!!e.sessionRecording,f[jd]=null==(o=e.sessionRecording)?void 0:o.consoleLogRecordingEnabled,f[Ud]=ji({capturePerformance:e.capturePerformance},null==(s=e.sessionRecording)?void 0:s.networkPayloadCapture),f[Vd]=null==(a=e.sessionRecording)?void 0:a.masking,f[zd]={enabled:null==(u=e.sessionRecording)?void 0:u.recordCanvas,fps:null==(l=e.sessionRecording)?void 0:l.canvasFps,quality:null==(c=e.sessionRecording)?void 0:c.canvasQuality},f[Wd]=h,f[Gd]=Ds(_)?null:_,f[Zd]=null==(d=e.sessionRecording)?void 0:d.scriptConfig,f))};i(),null==(n=this._persistFlagsOnSessionListener)||n.call(this),this._persistFlagsOnSessionListener=this._sessionManager.onSessionId(i)}},t.log=function(e,t){var n;void 0===t&&(t="log"),null==(n=this._instance.sessionRecording)||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:t,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})},t._startCapture=function(e){var t=this;if(!Ds(Object.assign)&&!Ds(Array.from)&&!(this._captureStarted||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;if(this._captureStarted=!0,this._sessionManager.checkAndGetSessionAndWindowId(),gh())this._onScriptLoaded();else null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,this._scriptName,(function(e){if(e)return vh.error("could not load recorder",e);t._onScriptLoaded()}));vh.info("starting"),this.status===Xp&&this._reportStarted(e||"recording_initialized")}},t._isInteractiveEvent=function(e){var t;return 3===e.type&&-1!==yh.indexOf(null==(t=e.data)?void 0:t.source)},t._updateWindowAndSessionIds=function(e){var t=this._isInteractiveEvent(e);t||this._isIdle||e.timestamp-this._lastActivityTimestamp>this._sessionIdleThresholdMilliseconds&&(this._isIdle=!0,clearInterval(this._fullSnapshotTimer),this.tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this._sessionIdleThresholdMilliseconds,bufferLength:this._buffer.data.length,bufferSize:this._buffer.size}),this._flushBuffer());var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this._isIdle)){var r="unknown"===this._isIdle;this._isIdle=!1,r||(this.tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)}if(!this._isIdle){var i=this._sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),o=i.windowId,s=i.sessionId,a=this._sessionId!==s,u=this._windowId!==o;this._windowId=o,this._sessionId=s,a||u?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this._scheduleFullSnapshot()}},t._tryRRWebMethod=function(e){try{return e.rrwebMethod(),!0}catch(t){return this._queuedRRWebEvents.length<10?this._queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):vh.warn("could not emit queued rrweb event.",t,e),!1}},t.tryAddCustomEvent=function(e,t){return this._tryRRWebMethod(bh((function(){return gh().addCustomEvent(e,t)})))},t._tryTakeFullSnapshot=function(){return this._tryRRWebMethod(bh((function(){return gh().takeFullSnapshot()})))},t._onScriptLoaded=function(){for(var e,t,n,r,i=this,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this._instance.config.session_recording,a=0,u=Object.entries(s||{});a<u.length;a++){var l=u[a],c=l[0],d=l[1];c in o&&("maskInputOptions"===c?o.maskInputOptions=ji({password:!0},d):o[c]=d)}(this._canvasRecording&&this._canvasRecording.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this._canvasRecording.fps},o.dataURLOptions={type:"image/webp",quality:this._canvasRecording.quality}),this._masking)&&(o.maskAllInputs=null===(t=this._masking.maskAllInputs)||void 0===t||t,o.maskTextSelector=null!==(n=this._masking.maskTextSelector)&&void 0!==n?n:void 0,o.blockSelector=null!==(r=this._masking.blockSelector)&&void 0!==r?r:void 0);var f=gh();if(f){this._mutationThrottler=null!==(e=this._mutationThrottler)&&void 0!==e?e:new Gp(f,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:function(e,t){var n="Too many mutations on node '"+e+"'. Rate limiting. This could be due to SVG animations or something similar";vh.info(n,{node:t}),i.log(_h+" "+n,"warn")}});var p=this._gatherRRWebPlugins();this._stopRrweb=f(ji({emit:function(e){i.onRRwebEmit(e)},plugins:p},o)),this._lastActivityTimestamp=Date.now(),this._isIdle=js(this._isIdle)?this._isIdle:"unknown",this.tryAddCustomEvent("$session_options",{sessionRecordingOptions:o,activePlugins:p.map((function(e){return null==e?void 0:e.name}))}),this.tryAddCustomEvent("$posthog_config",{config:this._instance.config})}else vh.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")},t._scheduleFullSnapshot=function(){var e=this;if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!0!==this._isIdle){var t=this._fullSnapshotIntervalMillis;t&&(this._fullSnapshotTimer=setInterval((function(){e._tryTakeFullSnapshot()}),t))}},t._gatherRRWebPlugins=function(){var e,t,n=[],r=null==(e=Ss.__PosthogExtensions__)||null==(e=e.rrwebPlugins)?void 0:e.getRecordConsolePlugin;r&&this._isConsoleLogCaptureEnabled&&n.push(r());var i=null==(t=Ss.__PosthogExtensions__)||null==(t=t.rrwebPlugins)?void 0:t.getRecordNetworkPlugin;this._networkPayloadCapture&&Ls(i)&&(!dl.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?n.push(i(Wp(this._instance.config,this._networkPayloadCapture))):vh.info("NetworkCapture not started because we are on localhost."));return n},t.onRRwebEmit=function(e){var t,n=this;if(this._processQueuedEvents(),e&&Os(e)){if(e.type===Dp.Meta){var r=this._maskUrl(e.data.href);if(this._lastHref=r,!r)return;e.data.href=r}else this._pageViewFallBack();if(this._urlTriggerMatching.checkUrlTriggerConditions((function(){return n._pauseRecording()}),(function(){return n._resumeRecording()}),(function(e){return n._activateTrigger(e)})),!this._urlTriggerMatching.urlBlocked||function(e){return e.type===Dp.Custom&&"recording paused"===e.data.tag}(e)){e.type===Dp.FullSnapshot&&this._scheduleFullSnapshot(),e.type===Dp.FullSnapshot&&this._receivedFlags&&this._triggerMatching.triggerStatus(this.sessionId)===nh&&this._clearBufferBeforeMostRecentMeta();var i=this._mutationThrottler?this._mutationThrottler.throttleMutations(e):e;if(i){var o=function(e){var t=e;if(t&&Os(t)&&6===t.type&&Os(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(i);if(this._updateWindowAndSessionIds(o),!0!==this._isIdle||Sh(o)){if(Sh(o)){var s=o.data.payload;if(s){var a=s.lastActivityTimestamp,u=s.threshold;o.timestamp=a+u}}var l=null===(t=this._instance.config.session_recording.compress_events)||void 0===t||t?function(e){try{if(e.type===Dp.FullSnapshot)return ji({},e,{data:wh(e.data),cv:"2024-10"});if(e.type===Dp.IncrementalSnapshot&&e.data.source===qp.Mutation)return ji({},e,{cv:"2024-10",data:ji({},e.data,{texts:wh(e.data.texts),attributes:wh(e.data.attributes),removes:wh(e.data.removes),adds:wh(e.data.adds)})});if(e.type===Dp.IncrementalSnapshot&&e.data.source===qp.StyleSheetRule)return ji({},e,{cv:"2024-10",data:ji({},e.data,{adds:e.data.adds?wh(e.data.adds):void 0,removes:e.data.removes?wh(e.data.removes):void 0})})}catch(e){vh.error("could not compress event - will use uncompressed event",e)}return e}(o):o,c={$snapshot_bytes:Op(l),$snapshot_data:l,$session_id:this._sessionId,$window_id:this._windowId};this.status!==Yp?this._captureSnapshotBuffered(c):this._clearBuffer()}}}}},t._pageViewFallBack=function(){if(!this._instance.config.capture_pageview&&cs){var e=this._maskUrl(cs.location.href);this._lastHref!==e&&(this.tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}},t._processQueuedEvents=function(){var e=this;if(this._queuedRRWebEvents.length){var t=[].concat(this._queuedRRWebEvents);this._queuedRRWebEvents=[],t.forEach((function(t){Date.now()-t.enqueuedAt<=2e3&&e._tryRRWebMethod(t)}))}},t._maskUrl=function(e){var t=this._instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null==(n=r=t.maskNetworkRequestFn(r))?void 0:n.url}return e},t._clearBufferBeforeMostRecentMeta=function(){if(!this._buffer||0===this._buffer.data.length)return this._clearBuffer();for(var e=-1,t=this._buffer.data.length-1;t>=0;t--)if(this._buffer.data[t].type===Dp.Meta){e=t;break}return e>=0?(this._buffer.data=this._buffer.data.slice(e),this._buffer.size=this._buffer.data.reduce((function(e,t){return e+Op(t)}),0),this._buffer):this._clearBuffer()},t._clearBuffer=function(){return this._buffer={size:0,data:[],sessionId:this._sessionId,windowId:this._windowId},this._buffer},t._flushBuffer=function(){var e=this;this._flushBufferTimer&&(clearTimeout(this._flushBufferTimer),this._flushBufferTimer=void 0);var t=this._minimumDuration,n=this._sessionDuration,r=Bs(n)&&n>=0,i=Bs(t)&&r&&n<t;if(this.status===Jp||this.status===Kp||this.status===Yp||i)return this._flushBufferTimer=setTimeout((function(){e._flushBuffer()}),2e3),this._buffer;this._buffer.data.length>0&&Ap(this._buffer).forEach((function(t){e._captureSnapshot({$snapshot_bytes:t.size,$snapshot_data:t.data,$session_id:t.sessionId,$window_id:t.windowId,$lib:"web",$lib_version:ks.LIB_VERSION})}));return this._clearBuffer()},t._captureSnapshotBuffered=function(e){var t,n=this,r=2+((null==(t=this._buffer)?void 0:t.data.length)||0);!this._isIdle&&(this._buffer.size+e.$snapshot_bytes+r>943718.4||this._buffer.sessionId!==this._sessionId)&&(this._buffer=this._flushBuffer()),this._buffer.size+=e.$snapshot_bytes,this._buffer.data.push(e.$snapshot_data),this._flushBufferTimer||this._isIdle||(this._flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))},t._captureSnapshot=function(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})},t._activateTrigger=function(e){var t,n;this._triggerMatching.triggerStatus(this.sessionId)===nh&&(null==(t=this._instance)||null==(t=t.persistence)||t.register(((n={})["url"===e?Xd:Jd]=this._sessionId,n)),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))},t._pauseRecording=function(){this._urlTriggerMatching.urlBlocked||(this._urlTriggerMatching.urlBlocked=!0,clearInterval(this._fullSnapshotTimer),vh.info("recording paused due to URL blocker"),this.tryAddCustomEvent("recording paused",{reason:"url blocker"}))},t._resumeRecording=function(){this._urlTriggerMatching.urlBlocked&&(this._urlTriggerMatching.urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this.tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),vh.info("recording resumed"))},t._addEventTriggerListener=function(){var e=this;0!==this._eventTriggerMatching._eventTriggers.length&&Hs(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this._instance.on("eventCaptured",(function(t){try{e._eventTriggerMatching._eventTriggers.includes(t.event)&&e._activateTrigger("event")}catch(e){vh.error("Could not activate event trigger",e)}})))},t.overrideLinkedFlag=function(){this._linkedFlagMatching.linkedFlagSeen=!0,this._tryTakeFullSnapshot(),this._reportStarted("linked_flag_overridden")},t.overrideSampling=function(){var e,t;null==(e=this._instance.persistence)||e.register(((t={})[Qd]=!0,t)),this._tryTakeFullSnapshot(),this._reportStarted("sampling_overridden")},t.overrideTrigger=function(e){this._activateTrigger(e)},t._reportStarted=function(e,t){this._instance.register_for_session({$session_recording_start_reason:e}),vh.info(e.replace("_"," "),t),Es(["recording_initialized","session_id_changed"],e)||this.tryAddCustomEvent(e,t)},Hi(e,[{key:"sessionId",get:function(){return this._sessionId}},{key:"_sessionIdleThresholdMilliseconds",get:function(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}},{key:"started",get:function(){return this._captureStarted}},{key:"_sessionManager",get:function(){if(!this._instance.sessionManager)throw new Error(_h+" must be started with a valid sessionManager.");return this._instance.sessionManager}},{key:"_fullSnapshotIntervalMillis",get:function(){var e,t;return this._triggerMatching.triggerStatus(this.sessionId)===nh?6e4:null!==(e=null==(t=this._instance.config.session_recording)?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:mh}},{key:"_isSampled",get:function(){var e=this._instance.get_property(Qd);return js(e)?e:null}},{key:"_sessionDuration",get:function(){var e,t,n=null==(e=this._buffer)?void 0:e.data[(null==(t=this._buffer)?void 0:t.data.length)-1],r=this._sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-r:null}},{key:"_isRecordingEnabled",get:function(){var e=!!this._instance.get_property(Bd),t=!this._instance.config.disable_session_recording;return cs&&e&&t}},{key:"_isConsoleLogCaptureEnabled",get:function(){var e=!!this._instance.get_property(jd),t=this._instance.config.enable_recording_console_log;return null!=t?t:e}},{key:"_canvasRecording",get:function(){var e,t,n,r,i,o,s=this._instance.config.session_recording.captureCanvas,a=this._instance.get_property(zd),u=null!==(e=null!==(t=null==s?void 0:s.recordCanvas)&&void 0!==t?t:null==a?void 0:a.enabled)&&void 0!==e&&e,l=null!==(n=null!==(r=null==s?void 0:s.canvasFps)&&void 0!==r?r:null==a?void 0:a.fps)&&void 0!==n?n:4,c=null!==(i=null!==(o=null==s?void 0:s.canvasQuality)&&void 0!==o?o:null==a?void 0:a.quality)&&void 0!==i?i:.4;if("string"==typeof c){var d=parseFloat(c);c=isNaN(d)?.4:d}return{enabled:u,fps:Xs(l,0,12,vh.createLogger("canvas recording fps"),4),quality:Xs(c,0,1,vh.createLogger("canvas recording quality"),.4)}}},{key:"_networkPayloadCapture",get:function(){var e,t,n=this._instance.get_property(Ud),r={recordHeaders:null==(e=this._instance.config.session_recording)?void 0:e.recordHeaders,recordBody:null==(t=this._instance.config.session_recording)?void 0:t.recordBody},i=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),o=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),s=Os(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,a=!!(js(s)?s:null==n?void 0:n.capturePerformance);return i||o||a?{recordHeaders:i,recordBody:o,recordPerformance:a}:void 0}},{key:"_masking",get:function(){var e,t,n,r,i,o,s=this._instance.get_property(Vd),a={maskAllInputs:null==(e=this._instance.config.session_recording)?void 0:e.maskAllInputs,maskTextSelector:null==(t=this._instance.config.session_recording)?void 0:t.maskTextSelector,blockSelector:null==(n=this._instance.config.session_recording)?void 0:n.blockSelector},u=null!==(r=null==a?void 0:a.maskAllInputs)&&void 0!==r?r:null==s?void 0:s.maskAllInputs,l=null!==(i=null==a?void 0:a.maskTextSelector)&&void 0!==i?i:null==s?void 0:s.maskTextSelector,c=null!==(o=null==a?void 0:a.blockSelector)&&void 0!==o?o:null==s?void 0:s.blockSelector;return Ds(u)&&Ds(l)&&Ds(c)?void 0:{maskAllInputs:null==u||u,maskTextSelector:l,blockSelector:c}}},{key:"_sampleRate",get:function(){var e=this._instance.get_property(Wd);return Bs(e)?e:null}},{key:"_minimumDuration",get:function(){var e=this._instance.get_property(Gd);return Bs(e)?e:null}},{key:"status",get:function(){return this._receivedFlags?this._statusMatcher({receivedFlags:this._receivedFlags,isRecordingEnabled:this._isRecordingEnabled,isSampled:this._isSampled,urlTriggerMatching:this._urlTriggerMatching,eventTriggerMatching:this._eventTriggerMatching,linkedFlagMatching:this._linkedFlagMatching,sessionId:this.sessionId}):Jp}},{key:"_scriptName",get:function(){var e;return(null==(e=this._instance)||null==(e=e.persistence)||null==(e=e.get_property(Zd))?void 0:e.script)||"recorder"}},{key:"sdkDebugProperties",get:function(){var e=this._sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this._buffer.data.length,$sdk_debug_replay_internal_buffer_size:this._buffer.size,$sdk_debug_current_session_duration:this._sessionDuration,$sdk_debug_session_start:e}}}])}(),xh=Fa("[SegmentIntegration]");function Eh(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=function(n){var r=function(){return n.anonymousId()||cu()};e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(uf,"identified")),t()},i=n.user();"then"in i&&Ls(i.then)?i.then((function(e){return r(e)})):r(i)}(e,(function(){n.register(function(e){Promise&&Promise.resolve||xh.warn("This browser does not have Promise support, and can not use the segment integration");var t=function(t,n){if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(xh.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(xh.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var r=e.calculateEventProperties(n,t.event.properties);return t.event.properties=Object.assign({},r,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(e,e.event.event)},page:function(e){return t(e,"$pageview")},identify:function(e){return t(e,"$identify")},screen:function(e){return t(e,"$screen")}}}(e)).then((function(){t()}))}))}var Ch="posthog-js";function Th(e,t){var n=void 0===t?{}:t,r=n.organization,i=n.projectId,o=n.prefix,s=n.severityAllowList,a=void 0===s?["error"]:s,u=n.sendExceptionsToPostHog,l=void 0===u||u;return function(t){var n,s,u,c,d;if(!("*"===a||a.includes(t.level))||!e.__loaded)return t;t.tags||(t.tags={});var f=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=f,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=(null==(n=t.exception)?void 0:n.values)||[],h=p.map((function(e){return ji({},e,{stacktrace:e.stacktrace?ji({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map((function(e){return ji({},e,{platform:"web:javascript"})}))}):void 0})})),_={$exception_message:(null==(s=p[0])?void 0:s.value)||t.message,$exception_type:null==(u=p[0])?void 0:u.type,$exception_personURL:f,$exception_level:t.level,$exception_list:h,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(c=p[0])?void 0:c.value)||t.message,$sentry_exception_type:null==(d=p[0])?void 0:d.type,$sentry_tags:t.tags};return r&&i&&(_.$sentry_url=(o||"https://sentry.io/organizations/")+r+"/issues/?project="+i+"&query="+t.event_id),l&&e.exceptions.sendExceptionEvent(_),t}}var Ih=function(e,t,n,r,i,o){this.name=Ch,this.setupOnce=function(s){s(Th(e,{organization:t,projectId:n,prefix:r,severityAllowList:i,sendExceptionsToPostHog:null==o||o}))}},Ph=null!=cs&&cs.location?vl(cs.location.hash,"__posthog")||vl(location.hash,"state"):null,Rh="_postHogToolbarParams",Fh=Fa("[Toolbar]"),Mh=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(Mh||{}),Lh=function(){function e(e){this.instance=e}var t=e.prototype;return t._setToolbarState=function(e){Ss.ph_toolbar_state=e},t._getToolbarState=function(){var e;return null!==(e=Ss.ph_toolbar_state)&&void 0!==e?e:Mh.UNINITIALIZED},t.maybeLoadToolbar=function(e,t,n){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),!cs||!vs)return!1;e=null!=e?e:cs.location,n=null!=n?n:cs.history;try{if(!t){try{cs.localStorage.setItem("test","test"),cs.localStorage.removeItem("test")}catch(e){return!1}t=null==cs?void 0:cs.localStorage}var r,i=Ph||vl(e.hash,"__posthog")||vl(e.hash,"state"),o=i?$a((function(){return JSON.parse(atob(decodeURIComponent(i)))}))||$a((function(){return JSON.parse(decodeURIComponent(i))})):null;return o&&"ph_authorize"===o.action?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:n?n.replaceState(n.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(t.getItem(Rh)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch(e){return!1}},t._callLoadToolbar=function(e){var t=Ss.ph_load_toolbar||Ss.ph_load_editor;!Hs(t)&&Ls(t)?t(e,this.instance):Fh.warn("No toolbar load function found")},t.loadToolbar=function(e){var t=this,n=!(null==vs||!vs.getElementById(_f));if(!cs||n)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,i=ji({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(cs.localStorage.setItem(Rh,JSON.stringify(ji({},i,{source:void 0}))),this._getToolbarState()===Mh.LOADED)this._callLoadToolbar(i);else if(this._getToolbarState()===Mh.UNINITIALIZED){var o;this._setToolbarState(Mh.LOADING),null==(o=Ss.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this.instance,"toolbar",(function(e){if(e)return Fh.error("[Toolbar] Failed to load",e),void t._setToolbarState(Mh.UNINITIALIZED);t._setToolbarState(Mh.LOADED),t._callLoadToolbar(i)})),za(cs,"turbolinks:load",(function(){t._setToolbarState(Mh.UNINITIALIZED),t.loadToolbar(i)}))}return!0},t._loadEditor=function(e){return this.loadToolbar(e)},t.maybeLoadEditor=function(e,t,n){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.maybeLoadToolbar(e,t,n)},e}(),Oh=Fa("[TracingHeaders]"),Ah=function(){function e(e){var t=this;this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0,this._startCapturing=function(){var e,n;Ds(t._restoreXHRPatch)&&(null==(e=Ss.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(t._instance.config.__add_tracing_headers||[],t._instance.get_distinct_id(),t._instance.sessionManager));Ds(t._restoreFetchPatch)&&(null==(n=Ss.__PosthogExtensions__)||null==(n=n.tracingHeadersPatchFns)||n._patchFetch(t._instance.config.__add_tracing_headers||[],t._instance.get_distinct_id(),t._instance.sessionManager))},this._instance=e}var t=e.prototype;return t._loadScript=function(e){var t,n;null!=(t=Ss.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"tracing-headers",(function(t){if(t)return Oh.error("failed to load script",t);e()}))},t.startIfEnabledOrStop=function(){var e,t;this._instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null==(e=this._restoreXHRPatch)||e.call(this),null==(t=this._restoreFetchPatch)||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)},e}(),Dh=Fa("[Web Vitals]"),qh=9e5,$h=function(){function e(e){var t,n=this;this._enabledServerSide=!1,this._initialized=!1,this._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0},this._flushToCapture=function(){clearTimeout(n._delayedFlushTimer),0!==n._buffer.metrics.length&&(n._instance.capture("$web_vitals",n._buffer.metrics.reduce((function(e,t){var n;return ji({},e,((n={})["$web_vitals_"+t.name+"_event"]=ji({},t),n["$web_vitals_"+t.name+"_value"]=t.value,n))}),{})),n._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this._addToBuffer=function(e){var t,r=null==(t=n._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(Ds(r))Dh.error("Could not read session ID. Dropping metrics!");else{n._buffer=n._buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var i=n._currentURL();if(!Ds(i))if(Hs(null==e?void 0:e.name)||Hs(null==e?void 0:e.value))Dh.error("Invalid metric received",e);else if(n._maxAllowedValue&&e.value>=n._maxAllowedValue)Dh.error("Ignoring metric with value >= "+n._maxAllowedValue,e);else n._buffer.url!==i&&(n._flushToCapture(),n._delayedFlushTimer=setTimeout(n._flushToCapture,n.flushToCaptureTimeoutMs)),Ds(n._buffer.url)&&(n._buffer.url=i),n._buffer.firstMetricTimestamp=Ds(n._buffer.firstMetricTimestamp)?Date.now():n._buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),n._buffer.metrics.push(ji({},e,{$current_url:i,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),n._buffer.metrics.length===n.allowedMetrics.length&&n._flushToCapture()}},this._startCapturing=function(){var e,t,r,i,o=Ss.__PosthogExtensions__;if(!Ds(o)&&!Ds(o.postHogWebVitalsCallbacks)){var s=o.postHogWebVitalsCallbacks;e=s.onLCP,t=s.onCLS,r=s.onFCP,i=s.onINP}e&&t&&r&&i?(n.allowedMetrics.indexOf("LCP")>-1&&e(n._addToBuffer.bind(n)),n.allowedMetrics.indexOf("CLS")>-1&&t(n._addToBuffer.bind(n)),n.allowedMetrics.indexOf("FCP")>-1&&r(n._addToBuffer.bind(n)),n.allowedMetrics.indexOf("INP")>-1&&i(n._addToBuffer.bind(n)),n._initialized=!0):Dh.error("web vitals callbacks not loaded - not starting")},this._instance=e,this._enabledServerSide=!(null==(t=this._instance.persistence)||!t.props[qd]),this.startIfEnabled()}var t=e.prototype;return t.startIfEnabled=function(){this.isEnabled&&!this._initialized&&(Dh.info("enabled, starting..."),this._loadScript(this._startCapturing))},t.onRemoteConfig=function(e){var t,n,r=Os(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=Os(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register(((t={})[qd]=r,t)),this._instance.persistence.register(((n={})[Nd]=i,n)));this._enabledServerSide=r,this.startIfEnabled()},t._loadScript=function(e){var t,n;null!=(t=Ss.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"web-vitals",(function(t){t?Dh.error("failed to load script",t):e()}))},t._currentURL=function(){var e=cs?cs.location.href:void 0;return e||Dh.error("Could not determine current URL"),e},Hi(e,[{key:"allowedMetrics",get:function(){var e,t,n=Os(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return Ds(n)?(null==(t=this._instance.persistence)?void 0:t.props[Nd])||["CLS","FCP","INP","LCP"]:n}},{key:"flushToCaptureTimeoutMs",get:function(){return(Os(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}},{key:"_maxAllowedValue",get:function(){var e=Os(this._instance.config.capture_performance)&&Bs(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:qh;return 0<e&&e<=6e4?qh:e}},{key:"isEnabled",get:function(){var e=null==gs?void 0:gs.protocol;if("http:"!==e&&"https:"!==e)return Dh.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=Os(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:js(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return js(t)?t:this._enabledServerSide}}])}(),Nh=Fa("[Heatmaps]");function Hh(e){return Os(e)&&"clientX"in e&&"clientY"in e&&Bs(e.clientX)&&Bs(e.clientY)}var Bh=function(){function e(e){var t;this.rageclicks=new sp,this._enabledServerSide=!1,this._initialized=!1,this._flushInterval=null,this.instance=e,this._enabledServerSide=!(null==(t=this.instance.persistence)||!t.props[Ld])}var t=e.prototype;return t.startIfEnabled=function(){if(this.isEnabled){if(this._initialized)return;Nh.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this._flush.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),null==(t=this._deadClicksCapture)||t.stop(),this.getAndClearBuffer()}},t.onRemoteConfig=function(e){var t,n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register(((t={})[Ld]=n,t));this._enabledServerSide=n,this.startIfEnabled()},t.getAndClearBuffer=function(){var e=this._buffer;return this._buffer=void 0,e},t._onDeadClick=function(e){this._onClick(e.originalEvent,"deadclick")},t._setupListeners=function(){var e=this;cs&&vs&&(za(cs,"beforeunload",this._flush.bind(this)),za(vs,"click",(function(t){return e._onClick(t||(null==cs?void 0:cs.event))}),{capture:!0}),za(vs,"mousemove",(function(t){return e._onMouseMove(t||(null==cs?void 0:cs.event))}),{capture:!0}),this._deadClicksCapture=new Rp(this.instance,Ip,this._onDeadClick.bind(this)),this._deadClicksCapture.startIfEnabled(),this._initialized=!0)},t._getProperties=function(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),o=function(e,t,n){for(var r=e;r&&Pf(r)&&!Rf(r,"body");){if(r===n)return!1;if(Es(t,null==cs?void 0:cs.getComputedStyle(r).position))return!0;r=Bf(r)}return!1}($f(e),["fixed","sticky"],i);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:n),target_fixed:o,type:t}},t._onClick=function(e,t){var n;if(void 0===t&&(t="click"),!If(e.target)&&Hh(e)){var r=this._getProperties(e,t);null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(ji({},r,{type:"rageclick"})),this._capture(r)}},t._onMouseMove=function(e){var t=this;!If(e.target)&&Hh(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){t._capture(t._getProperties(e,"mousemove"))}),500))},t._capture=function(e){if(cs){var t=cs.location.href;this._buffer=this._buffer||{},this._buffer[t]||(this._buffer[t]=[]),this._buffer[t].push(e)}},t._flush=function(){this._buffer&&!As(this._buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})},Hi(e,[{key:"flushIntervalMilliseconds",get:function(){var e=5e3;return Os(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}},{key:"isEnabled",get:function(){return Ds(this.instance.config.capture_heatmaps)?Ds(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}}])}(),jh=function(){function e(e){this._instance=e}var t=e.prototype;return t.doPageView=function(e,t){var n,r=this._previousPageViewProperties(e,t);return this._currentPageview={pathname:null!==(n=null==cs?void 0:cs.location.pathname)&&void 0!==n?n:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r},t.doPageLeave=function(e){var t;return this._previousPageViewProperties(e,null==(t=this._currentPageview)?void 0:t.pageViewId)},t.doEvent=function(){var e;return{$pageview_id:null==(e=this._currentPageview)?void 0:e.pageViewId}},t._previousPageViewProperties=function(e,t){var n=this._currentPageview;if(!n)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:n.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var o=i.maxScrollHeight,s=i.lastScrollY,a=i.maxScrollY,u=i.maxContentHeight,l=i.lastContentY,c=i.maxContentY;if(!(Ds(o)||Ds(s)||Ds(a)||Ds(u)||Ds(l)||Ds(c))){o=Math.ceil(o),s=Math.ceil(s),a=Math.ceil(a),u=Math.ceil(u),l=Math.ceil(l),c=Math.ceil(c);var d=o<=1?1:Xs(s/o,0,1,Ra),f=o<=1?1:Xs(a/o,0,1,Ra),p=u<=1?1:Xs(l/u,0,1,Ra),h=u<=1?1:Xs(c/u,0,1,Ra);r=Aa(r,{$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:f,$prev_pageview_last_content:l,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:c,$prev_pageview_max_content_percentage:h})}}return n.pathname&&(r.$prev_pageview_pathname=n.pathname),n.timestamp&&(r.$prev_pageview_duration=(e.getTime()-n.timestamp.getTime())/1e3),r},e}(),Uh="https?://(.*)",Vh=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],zh=Da(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Vh),Wh="<masked>",Gh=["li_fat_id"];function Zh(e,t,n){if(!vs)return{};var r,i=t?Da([],Vh,n||[]):[],o=Yh(_l(vs.URL,i,Wh),e),s=(r={},Oa(Gh,(function(e){var t=vp._get(e);r[e]=t||null})),r);return Aa(s,o)}function Yh(e,t){var n=zh.concat(t||[]),r={};return Oa(n,(function(t){var n=hl(e,t);r[t]=n||null})),r}function Qh(e){var t=function(e){return e?0===e.search(Uh+"google.([^/?]*)")?"google":0===e.search(Uh+"bing.com")?"bing":0===e.search(Uh+"yahoo.com")?"yahoo":0===e.search(Uh+"duckduckgo.com")?"duckduckgo":null:null}(e),n="yahoo"!=t?"q":"p",r={};if(!Ns(t)){r.$search_engine=t;var i=vs?hl(vs.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function Xh(){return navigator.language||navigator.userLanguage}function Jh(){return(null==vs?void 0:vs.referrer)||"$direct"}function Kh(e,t){var n=e?Da([],Vh,t||[]):[],r=null==gs?void 0:gs.href.substring(0,1e3);return{r:Jh().substring(0,1e3),u:r?_l(r,n,Wh):void 0}}function e_(e){var t,n=e.r,r=e.u,i={$referrer:n,$referring_domain:null==n?void 0:"$direct"==n?"$direct":null==(t=fl(n))?void 0:t.host};if(r){i.$current_url=r;var o=fl(r);i.$host=null==o?void 0:o.host,i.$pathname=null==o?void 0:o.pathname;var s=Yh(r);Aa(i,s)}if(n){var a=Qh(n);Aa(i,a)}return i}function t_(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}function n_(){try{return(new Date).getTimezoneOffset()}catch(e){return}}function r_(e,t){if(!ws)return{};var n,r=e?Da([],Vh,t||[]):[],i=function(e){for(var t=0;t<sl.length;t++){var n=sl[t],r=n[0],i=n[1],o=r.exec(e),s=o&&(Ls(i)?i(o,e):i);if(s)return s}return["",""]}(ws),o=i[0],s=i[1];return Aa(Ha({$os:o,$os_version:s,$browser:rl(ws,navigator.vendor),$device:al(ws),$device_type:ul(ws),$timezone:t_(),$timezone_offset:n_()}),{$current_url:_l(null==gs?void 0:gs.href,r,Wh),$host:null==gs?void 0:gs.host,$pathname:null==gs?void 0:gs.pathname,$raw_user_agent:ws.length>1e3?ws.substring(0,997)+"...":ws,$browser_version:ol(ws,navigator.vendor),$browser_language:Xh(),$browser_language_prefix:(n=Xh(),"string"==typeof n?n.split("-")[0]:void 0),$screen_height:null==cs?void 0:cs.screen.height,$screen_width:null==cs?void 0:cs.screen.width,$viewport_height:null==cs?void 0:cs.innerHeight,$viewport_width:null==cs?void 0:cs.innerWidth,$lib:"web",$lib_version:ks.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var i_=Fa("[FeatureFlags]"),o_="$active_feature_flags",s_="$override_feature_flags",a_="$feature_flag_payloads",u_="$override_feature_flag_payloads",l_="$feature_flag_request_id",c_=function(e){for(var t,n={},r=Bi(qa(e||{}));!(t=r()).done;){var i=t.value,o=i[0],s=i[1];s&&(n[o]=s)}return n},d_=function(e){var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map((function(e){var n;return[e,null!==(n=t[e].variant)&&void 0!==n?n:t[e].enabled]}))),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter((function(e){return t[e].enabled})).filter((function(e){var n;return null==(n=t[e].metadata)?void 0:n.payload})).map((function(e){var n;return[e,null==(n=t[e].metadata)?void 0:n.payload]})))):i_.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e},f_=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({}),p_=function(){function e(e){this._override_warning=!1,this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this._instance=e,this.featureFlagEventHandlers=[]}var t=e.prototype;return t._getValidEvaluationEnvironments=function(){var e=this._instance.config.evaluation_environments;return null!=e&&e.length?e.filter((function(e){var t=e&&"string"==typeof e&&e.trim().length>0;return t||i_.error("Invalid evaluation environment found:",e,"Expected non-empty string"),t})):[]},t._shouldIncludeEvaluationEnvironments=function(){return this._getValidEvaluationEnvironments().length>0},t.flags=function(){if(this._instance.config.__preview_remote_config)this._flagsCalled=!0;else{var e=!this._reloadDebouncer&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this._callFlagsEndpoint({disableFlags:e})}},t.getFlags=function(){return Object.keys(this.getFlagVariants())},t.getFlagsWithDetails=function(){var e=this._instance.get_property(tf),t=this._instance.get_property(s_),n=this._instance.get_property(u_);if(!n&&!t)return e||{};for(var r,i=Aa({},e||{}),o=Bi([].concat(new Set([].concat(Object.keys(n||{}),Object.keys(t||{})))));!(r=o()).done;){var s,a,u=r.value,l=i[u],c=null==t?void 0:t[u],d=Ds(c)?null!==(s=null==l?void 0:l.enabled)&&void 0!==s&&s:!!c,f=Ds(c)?l.variant:"string"==typeof c?c:void 0,p=null==n?void 0:n[u],h=ji({},l,{enabled:d,variant:d?null!=f?f:null==l?void 0:l.variant:void 0});if(d!==(null==l?void 0:l.enabled)&&(h.original_enabled=null==l?void 0:l.enabled),f!==(null==l?void 0:l.variant)&&(h.original_variant=null==l?void 0:l.variant),p)h.metadata=ji({},null==l?void 0:l.metadata,{payload:p,original_payload:null==l||null==(a=l.metadata)?void 0:a.payload});i[u]=h}return this._override_warning||(i_.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:n,finalDetails:i}),this._override_warning=!0),i},t.getFlagVariants=function(){var e=this._instance.get_property(Kd),t=this._instance.get_property(s_);if(!t)return e||{};for(var n=Aa({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(i_.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n},t.getFlagPayloads=function(){var e=this._instance.get_property(a_),t=this._instance.get_property(u_);if(!t)return e||{};for(var n=Aa({},e||{}),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(i_.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:n}),this._override_warning=!0),n},t.reloadFeatureFlags=function(){var e=this;this._reloadingDisabled||this._instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout((function(){e._callFlagsEndpoint()}),5))},t._clearDebouncer=function(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0},t.ensureFlagsLoaded=function(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()},t.setAnonymousDistinctId=function(e){this.$anon_distinct_id=e},t.setReloadingPaused=function(e){this._reloadingDisabled=e},t._callFlagsEndpoint=function(e){var t,n=this;if(this._clearDebouncer(),!this._instance._shouldDisableFlags())if(this._requestInFlight)this._additionalReloadRequested=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:ji({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(nf)||{}),group_properties:this._instance.get_property(rf)};(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this._shouldIncludeEvaluationEnvironments()&&(r.evaluation_environments=this._getValidEvaluationEnvironments());var i=this._instance.config.__preview_remote_config,o=i?"/flags/?v=2":"/flags/?v=2&config=true",s=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",o+s);i&&(r.timezone=t_()),this._requestInFlight=!0,this._instance._send_request({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:cl.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:function(e){var t,i,o=!0;(200===e.statusCode&&(n._additionalReloadRequested||(n.$anon_distinct_id=void 0),o=!1),n._requestInFlight=!1,n._flagsCalled)||(n._flagsCalled=!0,n._instance._onRemoteConfig(null!==(i=e.json)&&void 0!==i?i:{}));if(!r.disable_flags||n._additionalReloadRequested)if(n._flagsLoadedFromRemote=!o,e.json&&null!=(t=e.json.quotaLimited)&&t.includes(f_.FeatureFlags))i_.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var s;if(!r.disable_flags)n.receivedFeatureFlags(null!==(s=e.json)&&void 0!==s?s:{},o);n._additionalReloadRequested&&(n._additionalReloadRequested=!1,n._callFlagsEndpoint())}}})}},t.getFeatureFlag=function(e,t){if(void 0===t&&(t={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var n=this.getFlagVariants()[e],r=""+n,i=this._instance.get_property(l_)||void 0,o=this._instance.get_property(af)||{};if((t.send_event||!("send_event"in t))&&(!(e in o)||!o[e].includes(r))){var s,a,u,l,c,d,f,p,h,_;Ms(o[e])?o[e].push(r):o[e]=[r],null==(s=this._instance.persistence)||s.register(((a={})[af]=o,a));var v=this.getFeatureFlagDetails(e),g={$feature_flag:e,$feature_flag_response:n,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_bootstrapped_response:(null==(u=this._instance.config.bootstrap)||null==(u=u.featureFlags)?void 0:u[e])||null,$feature_flag_bootstrapped_payload:(null==(l=this._instance.config.bootstrap)||null==(l=l.featureFlagPayloads)?void 0:l[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote};Ds(null==v||null==(c=v.metadata)?void 0:c.version)||(g.$feature_flag_version=v.metadata.version);var m,y=null!==(d=null==v||null==(f=v.reason)?void 0:f.description)&&void 0!==d?d:null==v||null==(p=v.reason)?void 0:p.code;if(y&&(g.$feature_flag_reason=y),null!=v&&null!=(h=v.metadata)&&h.id&&(g.$feature_flag_id=v.metadata.id),Ds(null==v?void 0:v.original_variant)&&Ds(null==v?void 0:v.original_enabled)||(g.$feature_flag_original_response=Ds(v.original_variant)?v.original_enabled:v.original_variant),null!=v&&null!=(_=v.metadata)&&_.original_payload)g.$feature_flag_original_payload=null==v||null==(m=v.metadata)?void 0:m.original_payload;this._instance.capture("$feature_flag_called",g)}return n}i_.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")},t.getFeatureFlagDetails=function(e){return this.getFlagsWithDetails()[e]},t.getFeatureFlagPayload=function(e){return this.getFlagPayloads()[e]},t.getRemoteConfigPayload=function(e,t){var n=this._instance.config.token,r={distinct_id:this._instance.get_distinct_id(),token:n};this._shouldIncludeEvaluationEnvironments()&&(r.evaluation_environments=this._getValidEvaluationEnvironments()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:r,compression:this._instance.config.disable_compression?void 0:cl.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:function(n){var r,i=null==(r=n.json)?void 0:r.featureFlagPayloads;t((null==i?void 0:i[e])||void 0)}})},t.isFeatureEnabled=function(e,t){if(void 0===t&&(t={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var n=this.getFeatureFlag(e,t);return Ds(n)?void 0:!!n}i_.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")},t.addFeatureFlagsHandler=function(e){this.featureFlagEventHandlers.push(e)},t.removeFeatureFlagsHandler=function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(t){return t!==e}))},t.receivedFeatureFlags=function(e,t){if(this._instance.persistence){this._hasLoadedFlags=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads(),i=this.getFlagsWithDetails();!function(e,t,n,r,i){var o,s;void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={});var a=d_(e),u=a.flags,l=a.featureFlags,c=a.featureFlagPayloads;if(l){var d=e.requestId;if(Ms(l)){var f;i_.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var p={};if(l)for(var h=0;h<l.length;h++)p[l[h]]=!0;t&&t.register(((f={})[o_]=l,f[Kd]=p,f))}else{var _=l,v=c,g=u;e.errorsWhileComputingFlags&&(_=ji({},n,_),v=ji({},r,v),g=ji({},i,g)),t&&t.register(ji(((o={})[o_]=Object.keys(c_(_)),o[Kd]=_||{},o[a_]=v||{},o[tf]=g||{},o),d?((s={})[l_]=d,s):{}))}}}(e,this._instance.persistence,n,r,i),this._fireFeatureFlagsCallbacks(t)}},t.override=function(e,t){void 0===t&&(t=!1),i_.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})},t.overrideFeatureFlags=function(e){if(!this._instance.__loaded||!this._instance.persistence)return i_.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(s_),this._instance.persistence.unregister(u_),void this._fireFeatureFlagsCallbacks();if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,n=e;if(this._override_warning=Boolean(null!==(t=n.suppressWarning)&&void 0!==t&&t),"flags"in n)if(!1===n.flags)this._instance.persistence.unregister(s_);else if(n.flags)if(Ms(n.flags)){for(var r,i={},o=0;o<n.flags.length;o++)i[n.flags[o]]=!0;this._instance.persistence.register(((r={})[s_]=i,r))}else{var s;this._instance.persistence.register(((s={})[s_]=n.flags,s))}if("payloads"in n)if(!1===n.payloads)this._instance.persistence.unregister(u_);else if(n.payloads){var a;this._instance.persistence.register(((a={})[u_]=n.payloads,a))}this._fireFeatureFlagsCallbacks()}else this._fireFeatureFlagsCallbacks()},t.onFeatureFlags=function(e){var t=this;if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;e(r,i)}return function(){return t.removeFeatureFlagsHandler(e)}},t.updateEarlyAccessFeatureEnrollment=function(e,t,n){var r,i,o,s,a=(this._instance.get_property(ef)||[]).find((function(t){return t.flagKey===e})),u=((r={})["$feature_enrollment/"+e]=t,r),l={$feature_flag:e,$feature_enrollment:t,$set:u};a&&(l.$early_access_feature_name=a.name),n&&(l.$feature_enrollment_stage=n),this._instance.capture("$feature_enrollment_update",l),this.setPersonPropertiesForFlags(u,!1);var c=ji({},this.getFlagVariants(),((i={})[e]=t,i));null==(o=this._instance.persistence)||o.register(((s={})[o_]=Object.keys(c_(c)),s[Kd]=c,s)),this._fireFeatureFlagsCallbacks()},t.getEarlyAccessFeatures=function(e,t,n){var r=this;void 0===t&&(t=!1);var i=this._instance.get_property(ef),o=n?"&"+n.map((function(e){return"stage="+e})).join("&"):"";if(i&&!t)return e(i);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+o),method:"GET",callback:function(t){var n,i,o;if(t.json){var s=t.json.earlyAccessFeatures;return null==(n=r._instance.persistence)||n.unregister(ef),null==(i=r._instance.persistence)||i.register(((o={})[ef]=s,o)),e(s)}}})},t._prepareFeatureFlagsForCallbacks=function(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((function(e){return t[e]})),flagVariants:Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){return e[n]=t[n],e}),{})}},t._fireFeatureFlagsCallbacks=function(e){var t=this._prepareFeatureFlagsForCallbacks(),n=t.flags,r=t.flagVariants;this.featureFlagEventHandlers.forEach((function(t){return t(n,r,{errorsLoading:e})}))},t.setPersonPropertiesForFlags=function(e,t){var n;void 0===t&&(t=!0);var r=this._instance.get_property(nf)||{};this._instance.register(((n={})[nf]=ji({},r,e),n)),t&&this._instance.reloadFeatureFlags()},t.resetPersonPropertiesForFlags=function(){this._instance.unregister(nf)},t.setGroupPropertiesForFlags=function(e,t){var n;void 0===t&&(t=!0);var r=this._instance.get_property(rf)||{};0!==Object.keys(r).length&&Object.keys(r).forEach((function(t){r[t]=ji({},r[t],e[t]),delete e[t]})),this._instance.register(((n={})[rf]=ji({},r,e),n)),t&&this._instance.reloadFeatureFlags()},t.resetGroupPropertiesForFlags=function(e){if(e){var t,n,r=this._instance.get_property(rf)||{};this._instance.register(((n={})[rf]=ji({},r,((t={})[e]={},t)),n))}else this._instance.unregister(rf)},t.reset=function(){this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this.$anon_distinct_id=void 0,this._clearDebouncer(),this._override_warning=!1},Hi(e,[{key:"hasLoadedFlags",get:function(){return this._hasLoadedFlags}}])}(),h_=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],__=function(){function e(e,t){this._config=e,this.props={},this._campaign_params_saved=!1,this._name=function(e){var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"}(e),this._storage=this._buildStorage(e),this.load(),e.debug&&Ra.info("Persistence loaded",e.persistence,ji({},this.props)),this.update_config(e,e,t),this.save()}var t=e.prototype;return t.isDisabled=function(){return!!this._disabled},t._buildStorage=function(e){-1===h_.indexOf(e.persistence.toLowerCase())&&(Ra.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&mp._is_supported()?mp:"localstorage+cookie"===t&&bp._is_supported()?bp:"sessionstorage"===t&&xp._is_supported()?xp:"memory"===t?Sp:"cookie"===t?vp:bp._is_supported()?bp:vp},t.properties=function(){var e={};return Oa(this.props,(function(t,n){if(n===Kd&&Os(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/"+r[i]]=t[r[i]];else s=n,a=!1,(Ns(o=gf)?a:hs&&o.indexOf===hs?-1!=o.indexOf(s):(Oa(o,(function(e){if(a||(a=e===s))return Ma})),a))||(e[n]=t);var o,s,a})),e},t.load=function(){if(!this._disabled){var e=this._storage._parse(this._name);e&&(this.props=Aa({},e))}},t.save=function(){this._disabled||this._storage._set(this._name,this.props,this._expire_days,this._cross_subdomain,this._secure,this._config.debug)},t.remove=function(){this._storage._remove(this._name,!1),this._storage._remove(this._name,!0)},t.clear=function(){this.remove(),this.props={}},t.register_once=function(e,t,n){var r=this;if(Os(e)){Ds(t)&&(t="None"),this._expire_days=Ds(n)?this._default_expiry:n;var i=!1;if(Oa(e,(function(e,n){r.props.hasOwnProperty(n)&&r.props[n]!==t||(r.props[n]=e,i=!0)})),i)return this.save(),!0}return!1},t.register=function(e,t){var n=this;if(Os(e)){this._expire_days=Ds(t)?this._default_expiry:t;var r=!1;if(Oa(e,(function(t,i){e.hasOwnProperty(i)&&n.props[i]!==t&&(n.props[i]=t,r=!0)})),r)return this.save(),!0}return!1},t.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},t.update_campaign_params=function(){if(!this._campaign_params_saved){var e=Zh(this._config.custom_campaign_params,this._config.mask_personal_data_properties,this._config.custom_personal_data_properties);As(Ha(e))||this.register(e),this._campaign_params_saved=!0}},t.update_search_keyword=function(){var e;this.register((e=null==vs?void 0:vs.referrer)?Qh(e):{})},t.update_referrer_info=function(){var e;this.register_once({$referrer:Jh(),$referring_domain:null!=vs&&vs.referrer&&(null==(e=fl(vs.referrer))?void 0:e.host)||"$direct"},void 0)},t.set_initial_person_info=function(){var e;this.props[df]||this.props[ff]||this.register_once(((e={})[pf]=Kh(this._config.mask_personal_data_properties,this._config.custom_personal_data_properties),e),void 0)},t.get_initial_props=function(){var e=this,t={};Oa([ff,df],(function(n){var r=e.props[n];r&&Oa(r,(function(e,n){t["$initial_"+Ts(n)]=e}))}));var n,r,i=this.props[pf];if(i){var o=(n=e_(i),r={},Oa(n,(function(e,t){r["$initial_"+Ts(t)]=e})),r);Aa(t,o)}return t},t.safe_merge=function(e){return Oa(this.props,(function(t,n){n in e||(e[n]=t)})),e},t.update_config=function(e,t,n){if(this._default_expiry=this._expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!n),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var r=this._buildStorage(e),i=this.props;this.clear(),this._storage=r,this.props=i,this.save()}},t.set_disabled=function(e){this._disabled=e,this._disabled?this.remove():this.save()},t.set_cross_subdomain=function(e){e!==this._cross_subdomain&&(this._cross_subdomain=e,this.remove(),this.save())},t.set_secure=function(e){e!==this._secure&&(this._secure=e,this.remove(),this.save())},t.set_event_timer=function(e,t){var n=this.props[Fd]||{};n[e]=t,this.props[Fd]=n,this.save()},t.remove_event_timer=function(e){var t=(this.props[Fd]||{})[e];return Ds(t)||(delete this.props[Fd][e],this.save()),t},t.get_property=function(e){return this.props[e]},t.set_property=function(e,t){this.props[e]=t,this.save()},e}(),v_=function(){function e(){this._events={},this._events={}}var t=e.prototype;return t.on=function(e,t){var n=this;return this._events[e]||(this._events[e]=[]),this._events[e].push(t),function(){n._events[e]=n._events[e].filter((function(e){return e!==t}))}},t.emit=function(e,t){for(var n,r=Bi(this._events[e]||[]);!(n=r()).done;){(0,n.value)(t)}for(var i,o=Bi(this._events["*"]||[]);!(i=o()).done;){(0,i.value)(e,t)}},e}(),g_=function(){function e(e){var t=this;this._debugEventEmitter=new v_,this._checkStep=function(e,n){return t._checkStepEvent(e,n)&&t._checkStepUrl(e,n)&&t._checkStepElement(e,n)},this._checkStepEvent=function(e,t){return null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event)},this._instance=e,this._actionEvents=new Set,this._actionRegistry=new Set}var t=e.prototype;return t.init=function(){var e,t=this;if(!Ds(null==(e=this._instance)?void 0:e._addCaptureHook)){var n;null==(n=this._instance)||n._addCaptureHook((function(e,n){t.on(e,n)}))}},t.register=function(e){var t,n,r=this;if(!Ds(null==(t=this._instance)?void 0:t._addCaptureHook)&&(e.forEach((function(e){var t,n;null==(t=r._actionRegistry)||t.add(e),null==(n=e.steps)||n.forEach((function(e){var t;null==(t=r._actionEvents)||t.add((null==e?void 0:e.event)||"")}))})),null!=(n=this._instance)&&n.autocapture)){var i,o=new Set;e.forEach((function(e){var t;null==(t=e.steps)||t.forEach((function(e){null!=e&&e.selector&&o.add(null==e?void 0:e.selector)}))})),null==(i=this._instance)||i.autocapture.setElementSelectors(o)}},t.on=function(e,t){var n,r=this;null!=t&&0!=e.length&&(this._actionEvents.has(e)||this._actionEvents.has(null==t?void 0:t.event))&&this._actionRegistry&&(null==(n=this._actionRegistry)?void 0:n.size)>0&&this._actionRegistry.forEach((function(e){r._checkAction(t,e)&&r._debugEventEmitter.emit("actionCaptured",e.name)}))},t._addActionHook=function(e){this.onAction("actionCaptured",(function(t){return e(t)}))},t._checkAction=function(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var n,r=Bi(t.steps);!(n=r()).done;){var i=n.value;if(this._checkStep(e,i))return!0}return!1},t.onAction=function(e,t){return this._debugEventEmitter.on(e,t)},t._checkStepUrl=function(t,n){if(null!=n&&n.url){var r,i=null==t||null==(r=t.properties)?void 0:r.$current_url;if(!i||"string"!=typeof i)return!1;if(!e._matchString(i,null==n?void 0:n.url,(null==n?void 0:n.url_matching)||"contains"))return!1}return!0},e._matchString=function(t,n,r){switch(r){case"regex":return!!cs&&uc(t,n);case"exact":return n===t;case"contains":var i=e._escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return uc(t,i);default:return!1}},e._escapeStringRegexp=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},t._checkStepElement=function(t,n){if((null!=n&&n.href||null!=n&&n.tag_name||null!=n&&n.text)&&!this._getElementsList(t).some((function(t){return!(null!=n&&n.href&&!e._matchString(t.href||"",null==n?void 0:n.href,(null==n?void 0:n.href_matching)||"exact"))&&((null==n||!n.tag_name||t.tag_name===(null==n?void 0:n.tag_name))&&!(null!=n&&n.text&&!e._matchString(t.text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact")&&!e._matchString(t.$el_text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact")))})))return!1;if(null!=n&&n.selector){var r,i=null==t||null==(r=t.properties)?void 0:r.$element_selectors;if(!i)return!1;if(!i.includes(null==n?void 0:n.selector))return!1}return!0},t._getElementsList=function(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements},e}(),m_=function(){function e(e){this._instance=e,this._eventToSurveys=new Map,this._actionToSurveys=new Map}var t=e.prototype;return t.register=function(e){var t;Ds(null==(t=this._instance)?void 0:t._addCaptureHook)||(this._setupEventBasedSurveys(e),this._setupActionBasedSurveys(e))},t._setupActionBasedSurveys=function(e){var t=this,n=e.filter((function(e){var t,n;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)?void 0:n.length)>0}));if(0!==n.length){if(null==this._actionMatcher){this._actionMatcher=new g_(this._instance),this._actionMatcher.init();this._actionMatcher._addActionHook((function(e){t.onAction(e)}))}n.forEach((function(e){var n,r,i,o,s;e.conditions&&null!=(n=e.conditions)&&n.actions&&null!=(r=e.conditions)&&null!=(r=r.actions)&&r.values&&(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)?void 0:i.length)>0&&(null==(o=t._actionMatcher)||o.register(e.conditions.actions.values),null==(s=e.conditions)||null==(s=s.actions)||null==(s=s.values)||s.forEach((function(n){if(n&&n.name){var r=t._actionToSurveys.get(n.name);r&&r.push(e.id),t._actionToSurveys.set(n.name,r||[e.id])}})))}))}},t._setupEventBasedSurveys=function(e){var t,n=this;if(0!==e.filter((function(e){var t,n;return(null==(t=e.conditions)?void 0:t.events)&&(null==(n=e.conditions)||null==(n=n.events)||null==(n=n.values)?void 0:n.length)>0})).length){null==(t=this._instance)||t._addCaptureHook((function(e,t){n.onEvent(e,t)})),e.forEach((function(e){var t;null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||t.forEach((function(t){if(t&&t.name){var r=n._eventToSurveys.get(t.name);r&&r.push(e.id),n._eventToSurveys.set(t.name,r||[e.id])}}))}))}},t.onEvent=function(e,t){var n,r,i=this,o=(null==(n=this._instance)||null==(n=n.persistence)?void 0:n.props[sf])||[];if(as.SHOWN===e&&t&&o.length>0){var s;Wa.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:o});var a=null==t||null==(s=t.properties)?void 0:s.$survey_id;if(a){var u=o.indexOf(a);u>=0&&(o.splice(u,1),this._updateActivatedSurveys(o))}}else if(this._eventToSurveys.has(e)){Wa.info("survey event name matched",{event:e,eventPayload:t,surveys:this._eventToSurveys.get(e)});var l=[];null==(r=this._instance)||r.getSurveys((function(t){l=t.filter((function(t){var n;return null==(n=i._eventToSurveys.get(e))?void 0:n.includes(t.id)}))}));var c=l.filter((function(n){var r,i=null==(r=n.conditions)||null==(r=r.events)||null==(r=r.values)?void 0:r.find((function(t){return t.name===e}));return!!i&&(!i.propertyFilters||Object.entries(i.propertyFilters).every((function(e){var n,r=e[0],i=e[1],o=null==t||null==(n=t.properties)?void 0:n[r];if(Ds(o)||Ns(o))return!1;var s=[String(o)],a=cc[i.operator];return a?a(i.values,s):(Wa.warn("Unknown property comparison operator: "+i.operator),!1)})))}));this._updateActivatedSurveys(o.concat(c.map((function(e){return e.id}))||[]))}},t.onAction=function(e){var t,n=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[sf])||[];this._actionToSurveys.has(e)&&this._updateActivatedSurveys(n.concat(this._actionToSurveys.get(e)||[]))},t._updateActivatedSurveys=function(e){var t,n;Wa.info("updating activated surveys",{activatedSurveys:e}),null==(t=this._instance)||null==(t=t.persistence)||t.register(((n={})[sf]=[].concat(new Set(e)),n))},t.getSurveys=function(){var e,t=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[sf];return t||[]},t.getEventToSurveys=function(){return this._eventToSurveys},t._getActionMatcher=function(){return this._actionMatcher},e}(),y_=function(){function e(e){this._isSurveysEnabled=void 0,this._surveyManager=null,this._isFetchingSurveys=!1,this._isInitializingSurveys=!1,this._surveyCallbacks=[],this._instance=e,this._surveyEventReceiver=null}var t=e.prototype;return t.onRemoteConfig=function(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(Hs(t))return Wa.warn("Flags not loaded yet. Not loading surveys.");var n=Ms(t);this._isSurveysEnabled=n?t.length>0:t,Wa.info("flags response received, isSurveysEnabled: "+this._isSurveysEnabled),this.loadIfEnabled()}},t.reset=function(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);(null!=n&&n.startsWith(Qa)||null!=n&&n.startsWith(Xa))&&e.push(n)}e.forEach((function(e){return localStorage.removeItem(e)}))},t.loadIfEnabled=function(){var e=this;if(!this._surveyManager)if(this._isInitializingSurveys)Wa.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Wa.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Wa.info("Not loading surveys in cookieless mode without consent.");else{var t=null==Ss?void 0:Ss.__PosthogExtensions__;if(t){if(!Ds(this._isSurveysEnabled)||this._instance.config.advanced_enable_surveys){var n=this._isSurveysEnabled||this._instance.config.advanced_enable_surveys;this._isInitializingSurveys=!0;try{var r=t.generateSurveys;if(r)return void this._completeSurveyInitialization(r,n);var i=t.loadExternalDependency;if(!i)return void this._handleSurveyLoadError("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",(function(r){r||!t.generateSurveys?e._handleSurveyLoadError("Could not load surveys script",r):e._completeSurveyInitialization(t.generateSurveys,n)}))}catch(e){throw this._handleSurveyLoadError("Error initializing surveys",e),e}finally{this._isInitializingSurveys=!1}}}else Wa.error("PostHog Extensions not found.")}},t._completeSurveyInitialization=function(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new m_(this._instance),Wa.info("Surveys loaded successfully"),this._notifySurveyCallbacks({isLoaded:!0})},t._handleSurveyLoadError=function(e,t){Wa.error(e,t),this._notifySurveyCallbacks({isLoaded:!1,error:e})},t.onSurveysLoaded=function(e){var t=this;return this._surveyCallbacks.push(e),this._surveyManager&&this._notifySurveyCallbacks({isLoaded:!0}),function(){t._surveyCallbacks=t._surveyCallbacks.filter((function(t){return t!==e}))}},t.getSurveys=function(e,t){var n=this;if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return Wa.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(of);if(r&&!t)return e(r,{isLoaded:!0});if(this._isFetchingSurveys)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this._isFetchingSurveys=!0,this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:function(t){var r,i;n._isFetchingSurveys=!1;var o=t.statusCode;if(200!==o||!t.json){var s="Surveys API could not be loaded, status: "+o;return Wa.error(s),e([],{isLoaded:!1,error:s})}var a,u=t.json.surveys||[],l=u.filter((function(e){return Ga(e)&&(Za(e)||Ya(e))}));l.length>0&&(null==(a=n._surveyEventReceiver)||a.register(l));return null==(r=n._instance.persistence)||r.register(((i={})[of]=u,i)),e(u,{isLoaded:!0})}})}catch(e){throw this._isFetchingSurveys=!1,e}},t._notifySurveyCallbacks=function(e){for(var t,n=Bi(this._surveyCallbacks);!(t=n()).done;){var r=t.value;try{if(!e.isLoaded)return r([],e);this.getSurveys(r)}catch(e){Wa.error("Error in survey callback",e)}}},t.getActiveMatchingSurveys=function(e,t){if(void 0===t&&(t=!1),!Hs(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);Wa.warn("init was not called")},t._getSurveyById=function(e){var t=null;return this.getSurveys((function(n){var r;t=null!==(r=n.find((function(t){return t.id===e})))&&void 0!==r?r:null})),t},t._checkSurveyEligibility=function(e){if(Hs(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this._getSurveyById(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}},t.canRenderSurvey=function(e){if(Hs(this._surveyManager))return Wa.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this._checkSurveyEligibility(e);return{visible:t.eligible,disabledReason:t.reason}},t.canRenderSurveyAsync=function(e,t){var n=this;return Hs(this._surveyManager)?(Wa.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((function(r){n.getSurveys((function(t){var i,o=null!==(i=t.find((function(t){return t.id===e})))&&void 0!==i?i:null;if(o){var s=n._checkSurveyEligibility(o);r({visible:s.eligible,disabledReason:s.reason})}else r({visible:!1,disabledReason:"Survey not found"})}),t)}))},t.renderSurvey=function(e,t){var n,r=this;if(Hs(this._surveyManager))Wa.warn("init was not called");else{var i="string"==typeof e?this._getSurveyById(e):e;if(null!=i&&i.id)if(tu.includes(i.type)){var o=null==vs?void 0:vs.querySelector(t);if(o)return null!=(n=i.appearance)&&n.surveyPopupDelaySeconds?(Wa.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((function(){var e,t;Wa.info("Rendering survey "+i.id+" with delay of "+(null==(e=i.appearance)?void 0:e.surveyPopupDelaySeconds)+" seconds"),null==(t=r._surveyManager)||t.renderSurvey(i,o),Wa.info("Survey "+i.id+" rendered")}),1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,o);Wa.warn("Survey element not found")}else Wa.warn("Surveys of type "+i.type+" cannot be rendered in the app");else Wa.warn("Survey not found")}},t.displaySurvey=function(e,t){var n;if(Hs(this._surveyManager))Wa.warn("init was not called");else{var r=this._getSurveyById(e);if(r){var i=r;if(null!=(n=r.appearance)&&n.surveyPopupDelaySeconds&&t.ignoreDelay&&(i=ji({},r,{appearance:ji({},r.appearance,{surveyPopupDelaySeconds:0})})),!1===t.ignoreConditions){var o=this.canRenderSurvey(r);if(!o.visible)return void Wa.warn("Survey is not eligible to be displayed: ",o.disabledReason)}t.displayType!==ls.Inline?this._surveyManager.handlePopoverSurvey(i):this.renderSurvey(i,t.selector)}else Wa.warn("Survey not found")}},e}(),b_=Fa("[RateLimiter]"),w_=function(){function e(e){var t,n,r=this;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=function(e){var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((function(e){b_.info((e||"events")+" is quota limited."),r.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void b_.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(n=e.config.rate_limiting)?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}var t=e.prototype;return t.clientRateLimitContext=function(e){var t,n,r;void 0===e&&(e=!1);var i=(new Date).getTime(),o=null!==(t=null==(n=this.instance.persistence)?void 0:n.get_property(cf))&&void 0!==t?t:{tokens:this.captureEventsBurstLimit,last:i};o.tokens+=(i-o.last)/1e3*this.captureEventsPerSecond,o.last=i,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var s=o.tokens<1;return s||e||(o.tokens=Math.max(0,o.tokens-1)),!s||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=s,null==(r=this.instance.persistence)||r.set_property(cf,o),{isRateLimited:s,remainingTokens:o.tokens}},t.isServerRateLimited=function(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t},e}(),S_=Fa("[RemoteConfig]"),k_=function(){function e(e){this._instance=e}var t=e.prototype;return t._loadRemoteConfigJs=function(e){var t,n,r=this;null!=(t=Ss.__PosthogExtensions__)&&t.loadExternalDependency?null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"remote-config",(function(){return e(r.remoteConfig)})):(S_.error("PostHog Extensions not found. Cannot load remote config."),e())},t._loadRemoteConfigJSON=function(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:function(t){e(t.json)}})},t.load=function(){var e=this;try{if(this.remoteConfig)return S_.info("Using preloaded remote config",this.remoteConfig),void this._onRemoteConfig(this.remoteConfig);if(this._instance._shouldDisableFlags())return void S_.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs((function(t){if(!t)return S_.info("No config found after loading remote JS config. Falling back to JSON."),void e._loadRemoteConfigJSON((function(t){e._onRemoteConfig(t)}));e._onRemoteConfig(t)}))}catch(e){S_.error("Error loading remote config",e)}},t._onRemoteConfig=function(e){e?this._instance.config.__preview_remote_config?(this._instance._onRemoteConfig(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):S_.info("__preview_remote_config is disabled. Logging config instead",e):S_.error("Failed to fetch remote config from PostHog.")},Hi(e,[{key:"remoteConfig",get:function(){var e;return null==(e=Ss._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}}])}(),x_=3e3,E_=function(){function e(e,t){this._isPaused=!0,this._queue=[],this._flushTimeoutMs=Xs((null==t?void 0:t.flush_interval_ms)||x_,250,5e3,Ra.createLogger("flush interval"),x_),this._sendRequest=e}var t=e.prototype;return t.enqueue=function(e){this._queue.push(e),this._flushTimeout||this._setFlushTimeout()},t.unload=function(){var e=this;this._clearFlushTimeout();var t=this._queue.length>0?this._formatQueue():{},n=Object.values(t),r=[].concat(n.filter((function(e){return 0===e.url.indexOf("/e")})),n.filter((function(e){return 0!==e.url.indexOf("/e")})));r.map((function(t){e._sendRequest(ji({},t,{transport:"sendBeacon"}))}))},t.enable=function(){this._isPaused=!1,this._setFlushTimeout()},t._setFlushTimeout=function(){var e=this;this._isPaused||(this._flushTimeout=setTimeout((function(){if(e._clearFlushTimeout(),e._queue.length>0){var t=e._formatQueue(),n=function(){var n=t[r],i=(new Date).getTime();n.data&&Ms(n.data)&&Oa(n.data,(function(e){e.offset=Math.abs(e.timestamp-i),delete e.timestamp})),e._sendRequest(n)};for(var r in t)n()}}),this._flushTimeoutMs))},t._clearFlushTimeout=function(){clearTimeout(this._flushTimeout),this._flushTimeout=void 0},t._formatQueue=function(){var e={};return Oa(this._queue,(function(t){var n,r=t,i=(r?r.batchKey:null)||r.url;Ds(e[i])&&(e[i]=ji({},r,{data:[]})),null==(n=e[i].data)||n.push(r.data)})),this._queue=[],e},e}(),C_=["retriesPerformedSoFar"];var T_=function(){function e(e){var t=this;this._isPolling=!1,this._pollIntervalMs=3e3,this._queue=[],this._instance=e,this._queue=[],this._areWeOnline=!0,!Ds(cs)&&"onLine"in cs.navigator&&(this._areWeOnline=cs.navigator.onLine,za(cs,"online",(function(){t._areWeOnline=!0,t._flush()})),za(cs,"offline",(function(){t._areWeOnline=!1})))}var t=e.prototype;return t.retriableRequest=function(e){var t=this,n=e.retriesPerformedSoFar,r=Ui(e,C_);Bs(n)&&n>0&&(r.url=ic(r.url,{retry_count:n})),this._instance._send_request(ji({},r,{callback:function(e){200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=n?n:0)<10?t._enqueue(ji({retriesPerformedSoFar:n},r)):null==r.callback||r.callback(e)}}))},t._enqueue=function(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,r=Math.min(18e5,t),i=(Math.random()-.5)*(r-n);return Math.ceil(r+i)}(t),r=Date.now()+n;this._queue.push({retryAt:r,requestOptions:e});var i="Enqueued failed request for retry in "+n;navigator.onLine||(i+=" (Browser is offline)"),Ra.warn(i),this._isPolling||(this._isPolling=!0,this._poll())},t._poll=function(){var e=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout((function(){e._areWeOnline&&e._queue.length>0&&e._flush(),e._poll()}),this._pollIntervalMs)},t._flush=function(){var e=Date.now(),t=[],n=this._queue.filter((function(n){return n.retryAt<e||(t.push(n),!1)}));if(this._queue=t,n.length>0)for(var r,i=Bi(n);!(r=i()).done;){var o=r.value.requestOptions;this.retriableRequest(o)}},t.unload=function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);for(var e,t=Bi(this._queue);!(e=t()).done;){var n=e.value.requestOptions;try{this._instance._send_request(ji({},n,{transport:"sendBeacon"}))}catch(e){Ra.error(e)}}this._queue=[]},Hi(e,[{key:"length",get:function(){return this._queue.length}}])}(),I_=function(){function e(e){var t=this;this._updateScrollData=function(){var e,n,r,i;t._context||(t._context={});var o=t.scrollElement(),s=t.scrollY(),a=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=s+((null==o?void 0:o.clientHeight)||0),l=(null==o?void 0:o.scrollHeight)||0;t._context.lastScrollY=Math.ceil(s),t._context.maxScrollY=Math.max(s,null!==(e=t._context.maxScrollY)&&void 0!==e?e:0),t._context.maxScrollHeight=Math.max(a,null!==(n=t._context.maxScrollHeight)&&void 0!==n?n:0),t._context.lastContentY=u,t._context.maxContentY=Math.max(u,null!==(r=t._context.maxContentY)&&void 0!==r?r:0),t._context.maxContentHeight=Math.max(l,null!==(i=t._context.maxContentHeight)&&void 0!==i?i:0)},this._instance=e}var t=e.prototype;return t.getContext=function(){return this._context},t.resetContext=function(){var e=this._context;return setTimeout(this._updateScrollData,0),e},t.startMeasuringScrollPosition=function(){za(cs,"scroll",this._updateScrollData,{capture:!0}),za(cs,"scrollend",this._updateScrollData,{capture:!0}),za(cs,"resize",this._updateScrollData)},t.scrollElement=function(){if(!this._instance.config.scroll_root_selector)return null==cs?void 0:cs.document.documentElement;for(var e,t=Bi(Ms(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]);!(e=t()).done;){var n=e.value,r=null==cs?void 0:cs.document.querySelector(n);if(r)return r}},t.scrollY=function(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return cs&&(cs.scrollY||cs.pageYOffset||cs.document.documentElement.scrollTop)||0},t.scrollX=function(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return cs&&(cs.scrollX||cs.pageXOffset||cs.document.documentElement.scrollLeft)||0},e}(),P_=function(e){return Kh(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties)},R_=function(){function e(e,t,n,r){var i=this;this._onSessionIdCallback=function(e){var t,n=i._getStored();if(!n||n.sessionId!==e){var r={sessionId:e,props:i._sessionSourceParamGenerator(i._instance)};i._persistence.register(((t={})[lf]=r,t))}},this._instance=e,this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||P_,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}var t=e.prototype;return t._getStored=function(){return this._persistence.props[lf]},t.getSetOnceProps=function(){var e,t=null==(e=this._getStored())?void 0:e.props;return t?"r"in t?e_(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}},t.getSessionProps=function(){var e={};return Oa(Ha(this.getSetOnceProps()),(function(t,n){"$current_url"===n&&(n="url"),e["$session_entry_"+Ts(n)]=t})),e},e}(),F_=Fa("[SessionId]"),M_=function(){function e(e,t,n){var r,i=this;if(this._sessionIdChangedHandlers=[],this._eventEmitter=new v_,this._sessionHasBeenIdleTooLong=function(e,t){return Math.abs(e-t)>i.sessionTimeoutMs},!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this._config=e.config,this._persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=t||cu,this._windowIdGenerator=n||cu;var o=this._config.persistence_name||this._config.token,s=this._config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Xs(s,60,36e3,F_.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this._resetIdleTimer(),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var a=xp._parse(this._window_id_storage_key),u=xp._parse(this._primary_window_exists_storage_key);a&&!u?this._windowId=a:xp._remove(this._window_id_storage_key),xp._set(this._primary_window_exists_storage_key,!0)}if(null!=(r=this._config.bootstrap)&&r.sessionID)try{var l=function(e){var t=e.replace(/-/g,"");if(32!==t.length)throw new Error("Not a valid UUID");if("7"!==t[12])throw new Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)}(this._config.bootstrap.sessionID);this._setSessionId(this._config.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){F_.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}var t=e.prototype;return t.on=function(e,t){return this._eventEmitter.on(e,t)},t.onSessionId=function(e){var t=this;return Ds(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){t._sessionIdChangedHandlers=t._sessionIdChangedHandlers.filter((function(t){return t!==e}))}},t._canUseSessionStorage=function(){return"memory"!==this._config.persistence&&!this._persistence._disabled&&xp._is_supported()},t._setWindowId=function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&xp._set(this._window_id_storage_key,e))},t._getWindowId=function(){return this._windowId?this._windowId:this._canUseSessionStorage()?xp._parse(this._window_id_storage_key):null},t._setSessionId=function(e,t,n){var r;e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this._persistence.register(((r={})[Yd]=[t,e,n],r)))},t._getSessionId=function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this._persistence.props[Yd];return Ms(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]},t.resetSessionId=function(){this._setSessionId(null,null,null)},t._listenToReloadWindow=function(){var e=this;za(cs,"beforeunload",(function(){e._canUseSessionStorage()&&xp._remove(e._primary_window_exists_storage_key)}),{capture:!1})},t.checkAndGetSessionAndWindowId=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this._config.cookieless_mode)throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var n=t||(new Date).getTime(),r=this._getSessionId(),i=r[0],o=r[1],s=r[2],a=this._getWindowId(),u=Bs(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,c=!o,d=!e&&this._sessionHasBeenIdleTooLong(n,i);c||d||u?(o=this._sessionIdGenerator(),a=this._windowIdGenerator(),F_.info("new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:u}}),s=n,l=!0):a||(a=this._windowIdGenerator(),l=!0);var f=0===i||!e||u?n:i,p=0===s?(new Date).getTime():s;return this._setWindowId(a),this._setSessionId(o,f,p),e||this._resetIdleTimer(),l&&this._sessionIdChangedHandlers.forEach((function(e){return e(o,a,l?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:u}:void 0)})),{sessionId:o,windowId:a,sessionStartTimestamp:p,changeReason:l?{noSessionId:c,activityTimeout:d,sessionPastMaximumLength:u}:void 0,lastActivityTimestamp:i}},t._resetIdleTimer=function(){var e=this;clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout((function(){var t=e._getSessionId()[0];if(e._sessionHasBeenIdleTooLong((new Date).getTime(),t)){var n=e._sessionId;e.resetSessionId(),e._eventEmitter.emit("forcedIdleReset",{idleSessionId:n})}}),1.1*this.sessionTimeoutMs)},Hi(e,[{key:"sessionTimeoutMs",get:function(){return this._sessionTimeoutMs}}])}(),L_=["$set_once","$set"],O_=Fa("[SiteApps]"),A_=function(){function e(e){this._instance=e,this._bufferedInvocations=[],this.apps={}}var t=e.prototype;return t._eventCollector=function(e,t){if(t){var n=this.globalsForEvent(t);this._bufferedInvocations.push(n),this._bufferedInvocations.length>1e3&&(this._bufferedInvocations=this._bufferedInvocations.slice(10))}},t.init=function(){var e=this;if(this.isEnabled){var t=this._instance._addCaptureHook(this._eventCollector.bind(this));this._stopBuffering=function(){t(),e._bufferedInvocations=[],e._stopBuffering=void 0}}},t.globalsForEvent=function(e){var t,n,r,i,o,s,a;if(!e)throw new Error("Event payload is required");for(var u={},l=this._instance.get_property("$groups")||[],c=this._instance.get_property("$stored_group_properties")||{},d=0,f=Object.entries(c);d<f.length;d++){var p=f[d],h=p[0],_=p[1];u[h]={id:l[h],type:h,properties:_}}var v=e.$set_once,g=e.$set;return{event:ji({},Ui(e,L_),{properties:ji({},e.properties,g?{$set:ji({},null!==(t=null==(n=e.properties)?void 0:n.$set)&&void 0!==t?t:{},g)}:{},v?{$set_once:ji({},null!==(r=null==(i=e.properties)?void 0:i.$set_once)&&void 0!==r?r:{},v)}:{}),elements_chain:null!==(o=null==(s=e.properties)?void 0:s.$elements_chain)&&void 0!==o?o:"",distinct_id:null==(a=e.properties)?void 0:a.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}},t.setupSiteApp=function(e){var t=this,n=this.apps[e.id],r=function(){!n.errored&&t._bufferedInvocations.length&&(O_.info("Processing "+t._bufferedInvocations.length+" events for site app with id "+e.id),t._bufferedInvocations.forEach((function(e){return null==n.processEvent?void 0:n.processEvent(e)})),n.processedBuffer=!0),Object.values(t.apps).every((function(e){return e.processedBuffer||e.errored}))&&(null==t._stopBuffering||t._stopBuffering())},i=!1,o=function(t){n.errored=!t,n.loaded=!0,O_.info("Site app with id "+e.id+" "+(t?"loaded":"errored")),i&&r()};try{var s=e.init({posthog:this._instance,callback:function(e){o(e)}}).processEvent;s&&(n.processEvent=s),i=!0}catch(t){O_.error("Error while initializing PostHog app with config id "+e.id,t),o(!1)}if(i&&n.loaded)try{r()}catch(t){O_.error("Error while processing buffered events PostHog app with config id "+e.id,t),n.errored=!0}},t._setupSiteApps=function(){for(var e,t=this.siteAppLoaders||[],n=Bi(t);!(e=n()).done;){var r=e.value;this.apps[r.id]={id:r.id,loaded:!1,errored:!1,processedBuffer:!1}}for(var i,o=Bi(t);!(i=o()).done;){var s=i.value;this.setupSiteApp(s)}},t._onCapturedEvent=function(e){if(0!==Object.keys(this.apps).length)for(var t=this.globalsForEvent(e),n=0,r=Object.values(this.apps);n<r.length;n++){var i=r[n];try{null==i.processEvent||i.processEvent(t)}catch(t){O_.error("Error while processing event "+e.event+" for site app "+i.id,t)}}},t.onRemoteConfig=function(e){var t,n,r,i=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this._setupSiteApps(),void this._instance.on("eventCaptured",(function(e){return i._onCapturedEvent(e)}))):void O_.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(n=this._stopBuffering)||n.call(this),null!=(r=e.siteApps)&&r.length)if(this.isEnabled)for(var o,s=function(){var e,t=o.value,n=t.id,r=t.url;Ss["__$$ph_site_app_"+n]=i._instance,null==(e=Ss.__PosthogExtensions__)||null==e.loadSiteApp||e.loadSiteApp(i._instance,r,(function(e){if(e)return O_.error("Error while initializing PostHog app with config id "+n,e)}))},a=Bi(e.siteApps);!(o=a()).done;)s();else O_.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')},Hi(e,[{key:"isEnabled",get:function(){return!!this._instance.config.opt_in_site_apps}},{key:"siteAppLoaders",get:function(){var e;return null==(e=Ss._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}}])}(),D_=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],q_=function(e,t){if(!e)return!1;var n=e.toLowerCase();return D_.concat(t||[]).some((function(e){var t=e.toLowerCase();return-1!==n.indexOf(t)}))},$_=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&q_(n,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some((function(e){return q_(null==e?void 0:e.brand,t)})))return!0}catch(e){}return!!e.webdriver},N_=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),H_="i.posthog.com",B_=function(){function e(e){this._regionCache={},this.instance=e}return e.prototype.endpointFor=function(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if(this.region===N_.CUSTOM)return this.apiHost+t;var n=H_+t;switch(e){case"assets":return"https://"+this.region+"-assets."+n;case"api":return"https://"+this.region+"."+n}},Hi(e,[{key:"apiHost",get:function(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}},{key:"uiHost",get:function(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+H_,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=N_.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=N_.EU:this._regionCache[this.apiHost]=N_.CUSTOM),this._regionCache[this.apiHost]}}])}(),j_={icontains:function(e,t){return!!cs&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1},not_icontains:function(e,t){return!!cs&&-1===t.href.toLowerCase().indexOf(e.toLowerCase())},regex:function(e,t){return!!cs&&uc(t.href,e)},not_regex:function(e,t){return!!cs&&!uc(t.href,e)},exact:function(e,t){return t.href===e},is_not:function(e,t){return t.href!==e}},U_=function(){function e(t){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(t){void 0===t&&(t=!1),n.getWebExperiments((function(t){e._logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,t.forEach((function(t){if(t.feature_flag_key){var r;if(n._flagToExperiments)e._logInfo("setting flag key ",t.feature_flag_key," to web experiment ",t),null==(r=n._flagToExperiments)||r.set(t.feature_flag_key,t);var i=n._instance.getFeatureFlag(t.feature_flag_key);qs(i)&&t.variants[i]&&n._applyTransforms(t.name,i,t.variants[i].transforms)}else if(t.variants)for(var o in t.variants){var s=t.variants[o];e._matchesTestVariant(s)&&n._applyTransforms(t.name,o,s.transforms)}}))}),t)},this._instance=t,this._instance.onFeatureFlags((function(e){n.onFeatureFlags(e)}))}var t=e.prototype;return t.onFeatureFlags=function(t){var n=this;if(this._is_bot())e._logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Hs(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();e._logInfo("applying feature flags",t),t.forEach((function(e){var t;if(n._flagToExperiments&&null!=(t=n._flagToExperiments)&&t.has(e)){var r,i=n._instance.getFeatureFlag(e),o=null==(r=n._flagToExperiments)?void 0:r.get(e);i&&null!=o&&o.variants[i]&&n._applyTransforms(o.name,i,o.variants[i].transforms)}}))}},t.previewWebExperiment=function(){var t=this,n=e.getWindowLocation();if(null!=n&&n.search){var r=hl(null==n?void 0:n.search,"__experiment_id"),i=hl(null==n?void 0:n.search,"__experiment_variant");r&&i&&(e._logInfo("previewing web experiments "+r+" && "+i),this.getWebExperiments((function(e){t._showPreviewWebExperiment(parseInt(r),i,e)}),!1,!0))}},t.loadIfEnabled=function(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()},t.getWebExperiments=function(e,t,n){if(this._instance.config.disable_web_experiments&&!n)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:function(t){if(200!==t.statusCode||!t.json)return e([]);var n=t.json.experiments||[];return e(n)}})},t._showPreviewWebExperiment=function(t,n,r){var i=r.filter((function(e){return e.id===t}));i&&i.length>0&&(e._logInfo("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this._applyTransforms(i[0].name,n,i[0].variants[n].transforms))},e._matchesTestVariant=function(t){return!Hs(t.conditions)&&(e._matchUrlConditions(t)&&e._matchUTMConditions(t))},e._matchUrlConditions=function(t){var n;if(Hs(t.conditions)||Hs(null==(n=t.conditions)?void 0:n.url))return!0;var r,i,o,s=e.getWindowLocation();return!!s&&(null==(r=t.conditions)||!r.url||j_[null!==(i=null==(o=t.conditions)?void 0:o.urlMatchType)&&void 0!==i?i:"icontains"](t.conditions.url,s))},e.getWindowLocation=function(){return null==cs?void 0:cs.location},e._matchUTMConditions=function(e){var t;if(Hs(e.conditions)||Hs(null==(t=e.conditions)?void 0:t.utm))return!0;var n=Zh();if(n.utm_source){var r,i,o,s,a,u,l,c,d=null==(r=e.conditions)||null==(r=r.utm)||!r.utm_campaign||(null==(i=e.conditions)||null==(i=i.utm)?void 0:i.utm_campaign)==n.utm_campaign,f=null==(o=e.conditions)||null==(o=o.utm)||!o.utm_source||(null==(s=e.conditions)||null==(s=s.utm)?void 0:s.utm_source)==n.utm_source,p=null==(a=e.conditions)||null==(a=a.utm)||!a.utm_medium||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_medium)==n.utm_medium,h=null==(l=e.conditions)||null==(l=l.utm)||!l.utm_term||(null==(c=e.conditions)||null==(c=c.utm)?void 0:c.utm_term)==n.utm_term;return d&&p&&h&&f}return!1},e._logInfo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ra.info("[WebExperiments] "+e,n)},t._applyTransforms=function(t,n,r){this._is_bot()?e._logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==n?r.forEach((function(r){if(r.selector){var i;e._logInfo("applying transform of variant "+n+" for experiment "+t+" ",r);var o=null==(i=document)?void 0:i.querySelectorAll(r.selector);null==o||o.forEach((function(e){var t=e;r.html&&(t.innerHTML=r.html),r.css&&t.setAttribute("style",r.css)}))}})):e._logInfo("Control variants leave the page unmodified.")},t._is_bot=function(){return _s&&this._instance?$_(_s,this._instance.config.custom_blocked_useragents):void 0},e}(),V_=Fa("[PostHog ExternalIntegrations]"),z_={intercom:"intercom-integration",crispChat:"crisp-chat-integration"},W_=function(){function e(e){this._instance=e}var t=e.prototype;return t._loadScript=function(e,t){var n;null==(n=Ss.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,e,(function(e){if(e)return V_.error("failed to load script",e);t()}))},t.startIfEnabledOrStop=function(){for(var e=this,t=function(){var t,i,o,s=r[n],a=s[0],u=s[1];(!u||null!=(t=Ss.__PosthogExtensions__)&&null!=(t=t.integrations)&&t[a]||e._loadScript(z_[a],(function(){var t;null==(t=Ss.__PosthogExtensions__)||null==(t=t.integrations)||null==(t=t[a])||t.start(e._instance)})),!u&&null!=(i=Ss.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[a])&&(null==(o=Ss.__PosthogExtensions__)||null==(o=o.integrations)||null==(o=o[a])||o.stop())},n=0,r=Object.entries(null!==(i=this._instance.config.integrations)&&void 0!==i?i:{});n<r.length;n++){var i;t()}},e}(),G_="[SessionRecording]",Z_=Fa(G_),Y_=function(){function e(e){if(this._forceAllowLocalhostNetworkCapture=!1,this._persistFlagsOnSessionListener=void 0,this._instance=e,!this._instance.sessionManager)throw Z_.error("started without valid sessionManager"),new Error(G_+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(G_+' cannot be used with cookieless_mode="always"')}var t=e.prototype;return t.startIfEnabledOrStop=function(e){var t;if(!this._isRecordingEnabled||null==(t=this._lazyLoadedSessionRecording)||!t.isStarted){var n=!Ds(Object.assign)&&!Ds(Array.from);this._isRecordingEnabled&&n?(this._lazyLoadAndStart(e),Z_.info("starting")):this.stopRecording()}},t._lazyLoadAndStart=function(e){var t,n,r,i=this;this._isRecordingEnabled&&(null!=Ss&&null!=(t=Ss.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(n=Ss.__PosthogExtensions__)&&n.initSessionRecording?this._onScriptLoaded(e):null==(r=Ss.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,this._scriptName,(function(t){if(t)return Z_.error("could not load recorder",t);i._onScriptLoaded(e)})))},t.stopRecording=function(){var e;null==(e=this._lazyLoadedSessionRecording)||e.stop()},t._resetSampling=function(){var e;null==(e=this._instance.persistence)||e.unregister(Qd)},t._persistRemoteConfig=function(e){var t=this;if(this._instance.persistence){var n,r,i=this._instance.persistence,o=function(){var n,r=e.sessionRecording,o=null==r?void 0:r.sampleRate,s=Hs(o)?null:parseFloat(o);Hs(s)&&t._resetSampling();var a=null==r?void 0:r.minimumDurationMilliseconds;i.register(((n={})[Hd]=ji({enabled:!!r},r,{networkPayloadCapture:ji({capturePerformance:e.capturePerformance},null==r?void 0:r.networkPayloadCapture),canvasRecording:{enabled:null==r?void 0:r.recordCanvas,fps:null==r?void 0:r.canvasFps,quality:null==r?void 0:r.canvasQuality},sampleRate:s,minimumDurationMilliseconds:Ds(a)?null:a,endpoint:null==r?void 0:r.endpoint,triggerMatchType:null==r?void 0:r.triggerMatchType,masking:null==r?void 0:r.masking,urlTriggers:null==r?void 0:r.urlTriggers}),n))};o(),null==(n=this._persistFlagsOnSessionListener)||n.call(this),this._persistFlagsOnSessionListener=null==(r=this._instance.sessionManager)?void 0:r.onSessionId(o)}},t.onRemoteConfig=function(e){"sessionRecording"in e?(this._persistRemoteConfig(e),this.startIfEnabledOrStop()):Z_.info("skipping remote config with no sessionRecording",e)},t.log=function(e,t){var n;void 0===t&&(t="log"),null!=(n=this._lazyLoadedSessionRecording)&&n.log?this._lazyLoadedSessionRecording.log(e,t):Z_.warn("log called before recorder was ready")},t._onScriptLoaded=function(e){var t,n;if(null==(t=Ss.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this._lazyLoadedSessionRecording||(this._lazyLoadedSessionRecording=null==(n=Ss.__PosthogExtensions__)?void 0:n.initSessionRecording(this._instance),this._lazyLoadedSessionRecording._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture);this._lazyLoadedSessionRecording.start(e)},t.onRRwebEmit=function(e){var t;null==(t=this._lazyLoadedSessionRecording)||null==t.onRRwebEmit||t.onRRwebEmit(e)},t.overrideLinkedFlag=function(){var e;null==(e=this._lazyLoadedSessionRecording)||e.overrideLinkedFlag()},t.overrideSampling=function(){var e;null==(e=this._lazyLoadedSessionRecording)||e.overrideSampling()},t.overrideTrigger=function(e){var t;null==(t=this._lazyLoadedSessionRecording)||t.overrideTrigger(e)},t.tryAddCustomEvent=function(e,t){var n;return!(null==(n=this._lazyLoadedSessionRecording)||!n.tryAddCustomEvent(e,t))},Hi(e,[{key:"started",get:function(){var e;return!(null==(e=this._lazyLoadedSessionRecording)||!e.isStarted)}},{key:"status",get:function(){var e;return(null==(e=this._lazyLoadedSessionRecording)?void 0:e.status)||"lazy_loading"}},{key:"_isRecordingEnabled",get:function(){var e,t=!(null==(e=this._instance.get_property(Hd))||!e.enabled),n=!this._instance.config.disable_session_recording,r=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return cs&&t&&n&&!r}},{key:"_scriptName",get:function(){var e,t,n=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.get_property(Hd);return(null==n||null==(t=n.scriptConfig)?void 0:t.script)||"lazy-recorder"}},{key:"sdkDebugProperties",get:function(){var e;return(null==(e=this._lazyLoadedSessionRecording)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}}])}(),Q_={},X_=function(){},J_="posthog",K_=!nc&&-1===(null==ws?void 0:ws.indexOf("MSIE"))&&-1===(null==ws?void 0:ws.indexOf("Mozilla")),ev=function(e){var t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:Ua(null==vs?void 0:vs.location),persistence:"localStorage+cookie",persistence_name:"",loaded:X_,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:"2025-05-24"!==e||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",debug:gs&&qs(null==gs?void 0:gs.search)&&-1!==gs.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==cs||null==(t=cs.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:function(e){var t="Bad HTTP status: "+e.statusCode+" "+e.text;Ra.error(t)},get_device_id:function(e){return e},capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:x_},error_tracking:{},_onCapture:X_,__preview_eager_load_replay:!0}},tv=function(e){var t={};Ds(e.process_person)||(t.person_profiles=e.process_person),Ds(e.xhr_headers)||(t.request_headers=e.xhr_headers),Ds(e.cookie_name)||(t.persistence_name=e.cookie_name),Ds(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),Ds(e.store_google)||(t.save_campaign_params=e.store_google),Ds(e.verbose)||(t.debug=e.verbose);var n=Aa({},t,e);return Ms(e.property_blacklist)&&(Ds(e.property_denylist)?n.property_denylist=e.property_blacklist:Ms(e.property_denylist)?n.property_denylist=[].concat(e.property_blacklist,e.property_denylist):Ra.error("Invalid value for property_denylist config: "+e.property_denylist)),n},nv=function(){return Hi((function(){this.__forceAllowLocalhost=!1}),[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){Ra.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}])}(),rv=function(){function e(){var e=this;this.webPerformance=new nv,this._personProcessingSetOncePropertiesSent=!1,this.version=ks.LIB_VERSION,this._internalEventEmitter=new v_,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=ev(),this.SentryIntegration=Ih,this.sentryIntegration=function(t){return function(e,t){var n=Th(e,t);return{name:Ch,processEvent:function(e){return n(e)}}}(e,t)},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._visibilityStateListener=null,this._initialPersonProfilesConfig=null,this._cachedPersonProperties=null,this.featureFlags=new p_(this),this.toolbar=new Lh(this),this.scrollManager=new I_(this),this.pageViewManager=new jh(this),this.surveys=new y_(this),this.experiments=new U_(this),this.exceptions=new bf(this),this.rateLimiter=new w_(this),this.requestRouter=new B_(this),this.consent=new Cp(this),this.externalIntegrations=new W_(this),this.people={set:function(t,n,r){var i,o=qs(t)?((i={})[t]=n,i):t;e.setPersonProperties(o),null==r||r({})},set_once:function(t,n,r){var i,o=qs(t)?((i={})[t]=n,i):t;e.setPersonProperties(void 0,o),null==r||r({})}},this.on("eventCaptured",(function(e){return Ra.info('send "'+(null==e?void 0:e.event)+'"',e)}))}var t=e.prototype;return t.init=function(t,n,r){if(r&&r!==J_){var i,o=null!==(i=Q_[r])&&void 0!==i?i:new e;return o._init(t,n,r),Q_[r]=o,Q_[J_][r]=o,o}return this._init(t,n,r)},t._init=function(e,t,n){var r,i,o=this;if(void 0===t&&(t={}),Ds(e)||$s(e))return Ra.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ra.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._originalUserConfig=t,this._triggered_notifs=[],t.person_profiles&&(this._initialPersonProfilesConfig=t.person_profiles),this.set_config(Aa({},ev(t.defaults),tv(t),{name:n,token:e})),this.config.on_xhr_error&&Ra.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:cl.GZipJS;var s=this._is_persistence_disabled();this.persistence=new __(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new __(ji({},this.config,{persistence:"sessionStorage"}),s);var a=ji({},this.persistence.props),u=ji({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this._requestQueue=new E_((function(e){return o._send_retriable_request(e)}),this.config.request_queue_config),this._retryQueue=new T_(this),this.__request_queue=[];var l="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(l||(this.sessionManager=new M_(this),this.sessionPropsManager=new R_(this,this.sessionManager,this.persistence)),new Ah(this).startIfEnabledOrStop(),this.siteApps=new A_(this),null==(r=this.siteApps)||r.init(),l||(this.config.__preview_eager_load_replay?this.sessionRecording=new kh(this):this.sessionRecording=new Y_(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new fp(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Bh(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new $h(this),this.exceptionObserver=new Mp(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new Rp(this,Pp),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new Lp(this),this.historyAutocapture.startIfEnabled(),ks.DEBUG=ks.DEBUG||this.config.debug,ks.DEBUG&&Ra.info("Starting in debug mode",{this:this,config:t,thisC:ji({},this.config),p:a,s:u}),void 0!==(null==(i=t.bootstrap)?void 0:i.distinctID)){var c,d,f=this.config.get_device_id(cu()),p=null!=(c=t.bootstrap)&&c.isIdentifiedID?f:t.bootstrap.distinctID;this.persistence.set_property(uf,null!=(d=t.bootstrap)&&d.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var h,_,v=Object.keys((null==(h=t.bootstrap)?void 0:h.featureFlags)||{}).filter((function(e){var n;return!(null==(n=t.bootstrap)||null==(n=n.featureFlags)||!n[e])})).reduce((function(e,n){var r;return e[n]=(null==(r=t.bootstrap)||null==(r=r.featureFlags)?void 0:r[n])||!1,e}),{}),g=Object.keys((null==(_=t.bootstrap)?void 0:_.featureFlagPayloads)||{}).filter((function(e){return v[e]})).reduce((function(e,n){var r,i;null!=(r=t.bootstrap)&&null!=(r=r.featureFlagPayloads)&&r[n]&&(e[n]=null==(i=t.bootstrap)||null==(i=i.featureFlagPayloads)?void 0:i[n]);return e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:g})}if(l)this.register_once({distinct_id:vf,$device_id:null},"");else if(!this.get_distinct_id()){var m=this.config.get_device_id(cu());this.register_once({distinct_id:m,$device_id:m},""),this.persistence.set_property(uf,"anonymous")}return za(cs,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?Eh(this,(function(){return o._loaded()})):this._loaded(),Ls(this.config._onCapture)&&this.config._onCapture!==X_&&(Ra.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(function(e){return o.config._onCapture(e.event,e)}))),this.config.ip&&Ra.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this},t._onRemoteConfig=function(e){var t,n,r,i,o,s,a,u,l=this;if(!vs||!vs.body)return Ra.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){l._onRemoteConfig(e)}),500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Es(e.supportedCompression,cl.GZipJS)?cl.GZipJS:Es(e.supportedCompression,cl.Base64)?cl.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:"identified_only"}),null==(n=this.siteApps)||n.onRemoteConfig(e),null==(r=this.sessionRecording)||r.onRemoteConfig(e),null==(i=this.autocapture)||i.onRemoteConfig(e),null==(o=this.heatmaps)||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null==(s=this.webVitalsAutocapture)||s.onRemoteConfig(e),null==(a=this.exceptionObserver)||a.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(u=this.deadClicksAutocapture)||u.onRemoteConfig(e)},t._loaded=function(){var e=this;try{this.config.loaded(this)}catch(e){Ra.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){(e.consent.isOptedIn()||"always"===e.config.cookieless_mode)&&e._captureInitialPageview()}),1),new k_(this).load(),this.featureFlags.flags()},t._start_queue_if_opted_in=function(){var e;this.is_capturing()&&(this.config.request_batching&&(null==(e=this._requestQueue)||e.enable()))},t._dom_loaded=function(){var e=this;this.is_capturing()&&La(this.__request_queue,(function(t){return e._send_retriable_request(t)})),this.__request_queue=[],this._start_queue_if_opted_in()},t._handle_unload=function(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null==(e=this._requestQueue)||e.unload(),null==(t=this._retryQueue)||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})},t._send_request=function(e){var t=this;this.__loaded&&(K_?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=ic(e.url,{ip:this.config.ip?1:0}),e.headers=ji({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,function(e){var t,n,r,i=ji({},e);i.timeout=i.timeout||6e4,i.url=ic(i.url,{_:(new Date).getTime().toString(),ver:ks.LIB_VERSION,compression:i.compression});var o=null!==(t=i.transport)&&void 0!==t?t:"fetch",s=ac.filter((function(e){return!i.disableTransport||!e.transport||!i.disableTransport.includes(e.transport)})),a=null!==(n=null==(r=Va(s,(function(e){return e.transport===o})))?void 0:r.method)&&void 0!==n?n:s[0].method;if(!a)throw new Error("No available transport method");a(i)}(ji({},e,{callback:function(n){t.rateLimiter.checkForLimiting(n),n.statusCode>=400&&(null==t.config.on_request_error||t.config.on_request_error(n)),null==e.callback||e.callback(n)}}))))},t._send_retriable_request=function(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)},t._execute_array=function(e){var t,n=this,r=[],i=[],o=[];La(e,(function(e){e&&(t=e[0],Ms(t)?o.push(e):Ls(e)?e.call(n):Ms(e)&&"alias"===t?r.push(e):Ms(e)&&-1!==t.indexOf("capture")&&Ls(n[t])?o.push(e):i.push(e))}));var s=function(e,t){La(e,(function(e){if(Ms(e[0])){var n=t;Oa(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};s(r,this),s(i,this),s(o,this)},t._hasBootstrappedFeatureFlags=function(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1},t.push=function(e){this._execute_array([e])},t.capture=function(e,t,n){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(this.is_capturing())if(!Ds(e)&&qs(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var i=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==i||!i.isRateLimited){null!=t&&t.$current_url&&!qs(null==t?void 0:t.$current_url)&&(Ra.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,s=(null==n?void 0:n.timestamp)||o,a=cu(),u={uuid:a,event:e,properties:this.calculateEventProperties(e,t||{},s,a)};i&&(u.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),(null==n?void 0:n.$set)&&(u.$set=null==n?void 0:n.$set);var l=this._calculate_set_once_properties(null==n?void 0:n.$set_once);if(l&&(u.$set_once=l),(u=Ba(u,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=s,Ds(null==n?void 0:n.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=o),e===as.DISMISSED||e===as.SENT){var c,d=null==t?void 0:t[us.SURVEY_ID],f=null==t?void 0:t[us.SURVEY_ITERATION];eu({id:d,current_iteration:f}),u.$set=ji({},u.$set,((c={})[Ja({id:d,current_iteration:f},e===as.SENT?"responded":"dismissed")]=!0,c))}var p=ji({},u.properties.$set,u.$set);if(As(p)||this.setPersonPropertiesForFlags(p),!Hs(this.config.before_send)){var h=this._runBeforeSend(u);if(!h)return;u=h}this._internalEventEmitter.emit("eventCaptured",u);var _={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(_):this._requestQueue.enqueue(_),u}Ra.critical("This capture call is ignored due to client rate limiting.")}}else Ra.error("No event name provided to posthog.capture")}else Ra.uninitializedWarning("posthog.capture")},t._addCaptureHook=function(e){return this.on("eventCaptured",(function(t){return e(t.event,t)}))},t.calculateEventProperties=function(e,t,n,r,i){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return t;var o=i?void 0:this.persistence.remove_event_timer(e),s=ji({},t);if(s.token=this.config.token,s.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(s.$cookieless_mode=!0),"$snapshot"===e){var a=ji({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!qs(s.distinct_id)&&!Bs(s.distinct_id)||$s(s.distinct_id))&&Ra.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var u,l=r_(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var c=this.sessionManager.checkAndGetSessionAndWindowId(i,n.getTime()),d=c.sessionId,f=c.windowId;s.$session_id=d,s.$window_id=f}this.sessionPropsManager&&Aa(s,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&Aa(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=null==(p=this._retryQueue)?void 0:p.length}catch(e){s.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===N_.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),u="$pageview"!==e||i?"$pageleave"!==e||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(n):this.pageViewManager.doPageView(n,r),s=Aa(s,u),"$pageview"===e&&vs&&(s.title=vs.title),!Ds(o)){var h=n.getTime()-o;s.$duration=parseFloat((h/1e3).toFixed(3))}ws&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Aa({},l,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Ms(this.config.property_denylist)?Oa(this.config.property_denylist,(function(e){delete s[e]})):Ra.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var _=this.config.sanitize_properties;_&&(Ra.error("sanitize_properties is deprecated. Use before_send instead"),s=_(s,e));var v=this._hasPersonProcessing();return s.$process_person_profile=v,v&&!i&&this._requirePersonProcessing("_calculate_event_properties"),s},t._calculate_set_once_properties=function(e){var t;if(!this.persistence||!this._hasPersonProcessing())return e;if(this._personProcessingSetOncePropertiesSent)return e;var n=this.persistence.get_initial_props(),r=null==(t=this.sessionPropsManager)?void 0:t.getSetOnceProps(),i=Aa({},n,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ra.error("sanitize_properties is deprecated. Use before_send instead"),i=o(i,"$set_once")),this._personProcessingSetOncePropertiesSent=!0,As(i)?void 0:i},t.register=function(e,t){var n;null==(n=this.persistence)||n.register(e,t)},t.register_once=function(e,t,n){var r;null==(r=this.persistence)||r.register_once(e,t,n)},t.register_for_session=function(e){var t;null==(t=this.sessionPersistence)||t.register(e)},t.unregister=function(e){var t;null==(t=this.persistence)||t.unregister(e)},t.unregister_for_session=function(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)},t._register_single=function(e,t){var n;this.register(((n={})[e]=t,n))},t.getFeatureFlag=function(e,t){return this.featureFlags.getFeatureFlag(e,t)},t.getFeatureFlagPayload=function(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}},t.isFeatureEnabled=function(e,t){return this.featureFlags.isFeatureEnabled(e,t)},t.reloadFeatureFlags=function(){this.featureFlags.reloadFeatureFlags()},t.updateEarlyAccessFeatureEnrollment=function(e,t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,n)},t.getEarlyAccessFeatures=function(e,t,n){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,n)},t.on=function(e,t){return this._internalEventEmitter.on(e,t)},t.onFeatureFlags=function(e){return this.featureFlags.onFeatureFlags(e)},t.onSurveysLoaded=function(e){return this.surveys.onSurveysLoaded(e)},t.onSessionId=function(e){var t,n;return null!==(t=null==(n=this.sessionManager)?void 0:n.onSessionId(e))&&void 0!==t?t:function(){}},t.getSurveys=function(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)},t.getActiveMatchingSurveys=function(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)},t.renderSurvey=function(e,t){this.surveys.renderSurvey(e,t)},t.displaySurvey=function(e,t){void 0===t&&(t=nu),this.surveys.displaySurvey(e,t)},t.canRenderSurvey=function(e){return this.surveys.canRenderSurvey(e)},t.canRenderSurveyAsync=function(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)},t.identify=function(e,t,n){if(!this.__loaded||!this.persistence)return Ra.uninitializedWarning("posthog.identify");if(Bs(e)&&(e=e.toString(),Ra.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ra.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==vf){if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(Rd)&&(this.unregister(Rd),this.register({distinct_id:e}));var o="anonymous"===(this.persistence.get_property(uf)||"anonymous");e!==r&&o?(this.persistence.set_property(uf,"identified"),this.setPersonPropertiesForFlags(ji({},n||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this._cachedPersonProperties=lc(e,t,n),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(af))}}else Ra.critical('The string "'+vf+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ra.error("Unique user id has not been set in posthog.identify")},t.setPersonProperties=function(e,t){if((e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")){var n=lc(this.get_distinct_id(),e,t);this._cachedPersonProperties!==n?(this.setPersonPropertiesForFlags(ji({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this._cachedPersonProperties=n):Ra.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}},t.group=function(e,t,n){var r;if(e&&t){if(this._requirePersonProcessing("posthog.group")){var i,o=this.getGroups();if(o[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ji({},o,(r={},r[e]=t,r))}),n)this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags(((i={})[e]=n,i));o[e]===t||n||this.reloadFeatureFlags()}}else Ra.error("posthog.group requires a group type and group key")},t.resetGroups=function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()},t.setPersonPropertiesForFlags=function(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)},t.resetPersonPropertiesForFlags=function(){this.featureFlags.resetPersonPropertiesForFlags()},t.setGroupPropertiesForFlags=function(e,t){void 0===t&&(t=!0),this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)},t.resetGroupPropertiesForFlags=function(e){this.featureFlags.resetGroupPropertiesForFlags(e)},t.reset=function(e){var t,n,r,i;if(Ra.info("reset"),!this.__loaded)return Ra.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(n=this.sessionPersistence)||n.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(r=this.persistence)||r.set_property(uf,"anonymous"),null==(i=this.sessionManager)||i.resetSessionId(),this._cachedPersonProperties=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:vf,$device_id:null},"");else{var s=this.config.get_device_id(cu());this.register_once({distinct_id:s,$device_id:e?s:o},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)},t.get_distinct_id=function(){return this.get_property("distinct_id")},t.getGroups=function(){return this.get_property("$groups")||{}},t.get_session_id=function(){var e,t;return null!==(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""},t.get_session_replay_url=function(e){if(!this.sessionManager)return"";var t=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=t.sessionId,r=t.sessionStartTimestamp,i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(null!=e&&e.withTimestamp&&r){var o,s=null!==(o=e.timestampLookBack)&&void 0!==o?o:10;if(!r)return i;i+="?t="+Math.max(Math.floor(((new Date).getTime()-r)/1e3)-s,0)}return i},t.alias=function(e,t){return e===this.get_property(Pd)?(Ra.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Ds(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Rd,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Ra.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0},t.set_config=function(e){var t=ji({},this.config);if(Os(e)){var n,r,i,o,s;Aa(this.config,tv(e));var a=this._is_persistence_disabled();null==(n=this.persistence)||n.update_config(this.config,t,a),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new __(ji({},this.config,{persistence:"sessionStorage"}),a),mp._is_supported()&&"true"===mp._get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(ks.DEBUG=!0,Ra.info("set_config",{config:e,oldConfig:t,newConfig:ji({},this.config)})),null==(r=this.sessionRecording)||r.startIfEnabledOrStop(),null==(i=this.autocapture)||i.startIfEnabled(),null==(o=this.heatmaps)||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence(),null==(s=this.externalIntegrations)||s.startIfEnabledOrStop()}},t.startSessionRecording=function(e){var t=!0===e,n={sampling:t||!(null==e||!e.sampling),linked_flag:t||!(null==e||!e.linked_flag),url_trigger:t||!(null==e||!e.url_trigger),event_trigger:t||!(null==e||!e.event_trigger)};if(Object.values(n).some(Boolean)){var r,i,o,s,a;if(null==(r=this.sessionManager)||r.checkAndGetSessionAndWindowId(),n.sampling)null==(i=this.sessionRecording)||i.overrideSampling();if(n.linked_flag)null==(o=this.sessionRecording)||o.overrideLinkedFlag();if(n.url_trigger)null==(s=this.sessionRecording)||s.overrideTrigger("url");if(n.event_trigger)null==(a=this.sessionRecording)||a.overrideTrigger("event")}this.set_config({disable_session_recording:!1})},t.stopSessionRecording=function(){this.set_config({disable_session_recording:!0})},t.sessionRecordingStarted=function(){var e;return!(null==(e=this.sessionRecording)||!e.started)},t.captureException=function(e,t){var n=new Error("PostHog syntheticException"),r=this.exceptions.buildProperties(e,{handled:!0,syntheticException:n});return this.exceptions.sendExceptionEvent(ji({},r,t))},t.loadToolbar=function(e){return this.toolbar.loadToolbar(e)},t.get_property=function(e){var t;return null==(t=this.persistence)?void 0:t.props[e]},t.getSessionProperty=function(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]},t.toString=function(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:J_;return t!==J_&&(t=J_+"."+t),t},t._isIdentified=function(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(uf))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(uf))},t._hasPersonProcessing=function(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&As(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[Rd])&&(null==(t=this.persistence)||null==(t=t.props)||!t[hf]))},t._shouldCapturePageleave=function(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)},t.createPersonProfile=function(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})},t._requirePersonProcessing=function(e){return"never"===this.config.person_profiles?(Ra.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(hf,!0),!0)},t._is_persistence_disabled=function(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t},t._sync_opt_out_with_persistence=function(){var e,t,n,r,i=this._is_persistence_disabled();(null==(e=this.persistence)?void 0:e._disabled)!==i&&(null==(n=this.persistence)||n.set_disabled(i));(null==(t=this.sessionPersistence)?void 0:t._disabled)!==i&&(null==(r=this.sessionPersistence)||r.set_disabled(i));return i},t.opt_in_capturing=function(e){if("always"!==this.config.cookieless_mode){var t;if("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),this.sessionManager=new M_(this),this.persistence&&(this.sessionPropsManager=new R_(this,this.sessionManager,this.persistence)),this.sessionRecording=new kh(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),Ds(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0});this.config.capture_pageview&&this._captureInitialPageview()}else Ra.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')},t.opt_out_capturing=function(){var e;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._sync_opt_out_with_persistence(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:vf,$device_id:null}),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(e=this.sessionRecording)||e.stopRecording(),this.sessionRecording=void 0,this._captureInitialPageview())):Ra.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')},t.has_opted_in_capturing=function(){return this.consent.isOptedIn()},t.has_opted_out_capturing=function(){return this.consent.isOptedOut()},t.get_explicit_consent_status=function(){var e=this.consent.consent;return e===Ep.GRANTED?"granted":e===Ep.DENIED?"denied":"pending"},t.is_capturing=function(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())},t.clear_opt_in_out_capturing=function(){this.consent.reset(),this._sync_opt_out_with_persistence()},t._is_bot=function(){return _s?$_(_s,this.config.custom_blocked_useragents):void 0},t._captureInitialPageview=function(){vs&&("visible"===vs.visibilityState?this._initialPageviewCaptured||(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:vs.title},{send_instantly:!0}),this._visibilityStateListener&&(vs.removeEventListener("visibilitychange",this._visibilityStateListener),this._visibilityStateListener=null)):this._visibilityStateListener||(this._visibilityStateListener=this._captureInitialPageview.bind(this),za(vs,"visibilitychange",this._visibilityStateListener)))},t.debug=function(e){!1===e?(null==cs||cs.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==cs||cs.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))},t._shouldDisableFlags=function(){var e,t,n,r,i,o,s,a=this._originalUserConfig||{};return"advanced_disable_flags"in a?!!a.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(Ra.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(n="advanced_disable_decide",r=!1,i=Ra,o=(t="advanced_disable_flags")in(e=a)&&!Ds(e[t]),s=n in e&&!Ds(e[n]),o?e[t]:s?(i&&i.warn("Config field '"+n+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[n]):r)},t._runBeforeSend=function(e){if(Hs(this.config.before_send))return e;for(var t,n=e,r=Bi(Ms(this.config.before_send)?this.config.before_send:[this.config.before_send]);!(t=r()).done;){if(n=(0,t.value)(n),Hs(n)){var i="Event '"+e.event+"' was rejected in beforeSend function";return Vs(e.event)?Ra.warn(i+". This can cause unexpected behavior."):Ra.info(i),null}n.properties&&!As(n.properties)||Ra.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return n},t.getPageViewId=function(){var e;return null==(e=this.pageViewManager._currentPageview)?void 0:e.pageViewId},t.captureTraceFeedback=function(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})},t.captureTraceMetric=function(e,t,n){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(n)})},Hi(e,[{key:"decideEndpointWasHit",get:function(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}},{key:"flagsEndpointWasHit",get:function(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}}])}();!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=Na(e.prototype[t[n]])}(rv,["identify"]);var iv,ov;iv=Q_[J_]=new rv,(ov=Ss.posthog)&&Oa(ov._i,(function(e){if(e&&Ms(e)){var t=iv.init(e[0],e[1],e[2]),n=ov[e[2]]||ov;t&&(t._execute_array.call(t.people,n.people),t._execute_array(n))}})),Ss.posthog=iv,function(){function e(){e.done||(e.done=!0,K_=!1,Oa(Q_,(function(e){e._dom_loaded()})))}null!=vs&&vs.addEventListener?"complete"===vs.readyState?e():za(vs,"DOMContentLoaded",e,{capture:!1}):cs&&Ra.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}()}();
//# sourceMappingURL=array.full.es5.js.map
